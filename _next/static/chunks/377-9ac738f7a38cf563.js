"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[377],{1377:function(e,t,n){n.d(t,{Z:function(){return ln}});var i=n(7294),a=n(1163),s=n(5152),l=n.n(s),r=n(5616),o=n(7720),c=n(1458),d=n(44),h=n(5861),m=n(6886),x=n(9200),u=n(7998),g=n(5670),j=n(5511),p=n(5023),b=n(375),f=n(7446),Z=n(3920),v=n(8445),y=n(5739),S=n(9496),k=n(5662),w=n(7109),C=n(3946),P=n(4054),A=n(3841),$=n(7058),L=n(1292),F=n(6664),I=n(6824),E=n(622),W=n(4510),q=n(6066);function B(){const{data:e}=(0,q.UE)({fetchPolicy:"cache-only"});return e?.me?.account?.hero??void 0}var G=n(1789),M=n(5018),T=n(3599),D=n(1903),z=n(5893);function N({hero:e,to:t}){const[n,{loading:a}]=(0,q.Se)(),[s,{loading:l}]=(0,q.AF)(),{data:c,refetch:d}=(0,q._v)({pollInterval:5e3}),[x,u]=(0,i.useState)(0),[g,j]=(0,i.useState)(""),[p,{loading:b}]=(0,q.Fw)(),f=b||a;if(!c?.me?.account?.hero)return null;const{incomingTrades:Z,outgoingTrades:v}=c.me.account.hero,y="Select an item to offer",S=e.inventory.filter((e=>e.type!==q.$7.Quest)).sort(G.v4);async function w(e){try{await n({variables:{offer:e}})}catch(t){}}const C=S.find((e=>e.id===g));return(0,z.jsxs)(r.Z,{sx:{p:2,m:1,bgcolor:"background.paper"},children:[(0,z.jsx)(h.Z,{color:"error",variant:"h4",children:"Offer trade"}),(0,z.jsx)(h.Z,{children:"You can offer one of your items for gold, and then the other player must accept."}),(0,z.jsxs)(m.ZP,{sx:{mt:1},container:!0,columns:6,spacing:3,children:[(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(A.Z,{id:"trade-item-select-label",children:y}),(0,z.jsx)(M.Z,{id:"trade-item-select",labelId:"trade-item-select-label",label:y,value:g,onChange:e=>j(e.target.value),children:S.map((t=>(0,z.jsx)(T.Z,{value:t.id,disabled:(0,G.mQ)(e,t),children:(0,G.GJ)(t)},t.id)))})]})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(D.Z,{label:"Gold value",value:0===x?"":x,onChange:function(e){let t=Number(e.target.value);!isNaN(t)&&Number.isFinite(t)&&(t=Math.round(Math.max(0,Math.min(2e9,t))),console.log(t),u(t))}})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsxs)(k.Z,{variant:"contained",fullWidth:!0,disabled:x<=0||!g.length||f,onClick:async function(){try{const e=g;await p({variables:{offer:{to:t,item:e,gold:x}}});d()}catch(e){}},children:[C&&`Offer ${(0,G.GJ)(C)} for ${x.toLocaleString()} gold`,!C&&"Select an item to offer"]})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsx)(o.Z,{})}),Z.length>0&&(0,z.jsxs)(m.ZP,{item:!0,xs:6,children:["Received offers:",(0,z.jsx)(r.Z,{children:Z.map((t=>(0,z.jsx)(i.Fragment,{children:(0,z.jsxs)(r.Z,{sx:{mt:1,bgcolor:"info.main",p:2},children:["From: ",(0,z.jsx)("b",{children:t.fromName}),(0,z.jsx)("br",{}),"Item: ",(0,z.jsx)("b",{children:(0,G.GJ)(t.item)}),(0,z.jsx)("br",{}),"Gold: ",(0,z.jsx)("b",{children:t.gold.toLocaleString()}),(0,z.jsx)("br",{}),(0,z.jsx)(k.Z,{sx:{m:1},variant:"contained",color:"success",disabled:f||t.gold>e.gold,onClick:()=>async function(e){try{await s({variables:{offer:e}})}catch(t){}}(t.id),children:"Accept Trade"}),(0,z.jsx)(k.Z,{sx:{m:1},variant:"contained",color:"error",disabled:f,onClick:()=>w(t.id),children:"Reject Trade"})]})},t.id)))})]}),v.length>0&&(0,z.jsxs)(m.ZP,{item:!0,xs:6,children:["Sent offers:",(0,z.jsx)(r.Z,{children:v.map((e=>(0,z.jsx)(i.Fragment,{children:(0,z.jsxs)(r.Z,{sx:{mt:1,bgcolor:"info.main",p:2},children:["To: ",(0,z.jsx)("b",{children:e.toName}),(0,z.jsx)("br",{}),"Item: ",(0,z.jsx)("b",{children:(0,G.GJ)(e.item)}),(0,z.jsx)("br",{}),"Gold: ",(0,z.jsx)("b",{children:e.gold.toLocaleString()}),(0,z.jsx)("br",{}),(0,z.jsx)("br",{}),(0,z.jsx)(k.Z,{variant:"contained",color:"error",disabled:f,onClick:()=>w(e.id),children:"Cancel Trade"})]})},e.id)))})]})]})]})}var R=n(629);function H({artifact:e,title:t,affixes:n,sx:a,children:s}){if(!e||!t)return null;const l=(0,G.Vy)(e);let r=(e,t)=>(0,z.jsx)(h.Z,{variant:"body1",sx:a,children:(0,z.jsx)("b",{children:e})},t);return"function"===typeof s&&(r=s),(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(h.Z,{children:t}),l.map((e=>n&&!n.includes(e.type)?null:r((0,G.xq)(e),e.type)))]})}function Q({artifact:e,isSelected:t,title:n,onSelect:a,disabled:s=!1}){return(0,z.jsxs)(R.Z,{sx:{flex:1,p:2,cursor:s?"not-allowed":"pointer",transition:"all 0.2s",border:"2px solid",borderColor:t?"primary.main":"divider",bgcolor:t?"action.selected":"background.paper",opacity:s?.5:1,"&:hover":{bgcolor:s?"background.paper":"action.hover"}},elevation:t?8:1,onClick:s?void 0:a,children:[(0,z.jsx)(h.Z,{variant:"h6",gutterBottom:!0,"data-testid":`${n.toLowerCase().replace(/\s+/g,"-")}-title`,children:n}),e?(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(h.Z,{variant:"subtitle1",children:e.name}),(0,z.jsx)(H,{artifact:e,title:`${n} Stats`})]}):(0,z.jsx)(h.Z,{color:"text.secondary",children:"No artifact equipped"})]})}var J=n(657),Y=n(7645),O=n(6580),K=n(1425);function U({open:e,title:t,message:n,warningMessage:i,onConfirm:a,onCancel:s}){return(0,z.jsxs)(J.Z,{open:e,onClose:s,"aria-labelledby":"confirmation-dialog-title",children:[(0,z.jsx)(Y.Z,{id:"confirmation-dialog-title",children:t}),(0,z.jsxs)(O.Z,{children:[(0,z.jsx)(h.Z,{children:n}),i&&(0,z.jsx)(h.Z,{color:"error",sx:{mt:2},children:i})]}),(0,z.jsxs)(K.Z,{children:[(0,z.jsx)(k.Z,{onClick:s,color:"inherit","data-testid":"cancel-button",children:"Cancel"}),(0,z.jsx)(k.Z,{onClick:a,color:"primary",variant:"contained",autoFocus:!0,"data-testid":"confirm-button",children:"Confirm"})]})]})}function V({currentArtifact:e,newArtifact:t}){const[n,a]=(0,i.useState)(!1),[s,l]=(0,i.useState)(e?null:"new"),[o]=(0,q.jD)(),[c]=(0,q.MA)();return(0,z.jsxs)(i.Fragment,{children:[(0,z.jsxs)(r.Z,{sx:{textAlign:"center",mb:4},children:[(0,z.jsx)(h.Z,{variant:"h4",gutterBottom:!0,children:"Choose Your Artifact"}),(0,z.jsx)(h.Z,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:e?"Select which artifact you want to keep. This choice cannot be undone.":"You have no artifact equipped. The new artifact will be automatically equipped."})]}),(0,z.jsxs)(r.Z,{sx:{display:"flex",gap:4,mb:4},children:[(0,z.jsx)(Q,{artifact:e,isSelected:"current"===s,title:"Current Artifact",onSelect:()=>e&&l("current"),disabled:!e}),(0,z.jsx)(Q,{artifact:t,isSelected:"new"===s,title:"New Artifact",onSelect:()=>l("new")})]}),(0,z.jsx)(r.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,z.jsx)(k.Z,{variant:"contained",color:"primary",disabled:!s,onClick:()=>a(!0),sx:{minWidth:200},children:e?"Continue with Selected":"Accept New Artifact"})}),(0,z.jsx)(U,{open:n,title:"Confirm Your Choice",message:e?`Are you sure you want to keep the ${"new"===s?"new":"current"} artifact?`:"Are you sure you want to equip the new artifact?",warningMessage:e?"This action cannot be undone.":void 0,onConfirm:async()=>{"new"===s?await o():await c()},onCancel:()=>a(!1)})]})}var _=n(1042);function X(){const{enqueueSnackbar:e}=(0,S.Ds)(),t=B(),{data:n}=(0,q.UE)(),{data:a}=(0,q.TX)(),[s,l]=(0,i.useState)(!1),[o,c]=(0,i.useState)([]),[m,x]=(0,i.useState)(!1),[u,p]=(0,i.useState)(""),[f,M]=(0,i.useState)("all"),[T,D]=(0,i.useState)({all:{type:"built-in"},chat:{type:"built-in"},notifications:{type:"built-in"}}),R=(0,i.useRef)();function H(e){return e.trim()}(0,i.useEffect)((()=>{o.length>200&&c(o.slice(0,200))}),[o.length]),(0,i.useEffect)((()=>{if(R.current)return;if(!a?.chat?.token)return;const t={drop:"error",artifact:"warning",quest:"success",settlement:"info"},n=_.qZ||window.location.origin;return R.current=(0,Z.io)(n,{withCredentials:!0,path:_.Mb||"/socket.io",auth:{token:a.chat.token}}),R.current.on("hello",(e=>{c(e.chat)})),R.current.on("chat",(e=>{console.log("Got chat event!",e),c((t=>[e,...t]))})),R.current.on("notification",(n=>{if(n.item&&(n.message=n.message.replace("{{item}}",(0,G.GJ)(n.item))),"drop"===n.type)n.item?e(`You found ${(0,G.GJ)(n.item)}`,{variant:"success"}):e(n.message,{variant:"success"});else if("artifact"===n.type){const t=function(e,t){return e.includes("rejected")?{message:"Kept existing artifact",variant:"info"}:t?{message:`Equipped ${t.name}`,variant:"success"}:{message:e,variant:"success"}}(n.message,n.artifactItem);e(t.message,{variant:t.variant})}else"settlement"!==n.type&&e(n.message,{variant:"info"});c((e=>[{type:n.type??"notification",id:Math.random(),time:Date.now()/1e3,message:"",from:n.message,color:t[n.type]??"secondary",variant:"body1"},...e]))})),R.current.on("system-message",(t=>{e(t.message,{variant:"warning"}),c((e=>[{type:"system",id:Math.random(),time:Date.now()/1e3,message:t.message,from:"",color:t.color,variant:"h6"},...e]))})),()=>{R.current&&(R.current.disconnect(),R.current=void 0)}}),[a?.chat?.token]);const Q=H(u);async function J(){if(!R.current?.connected)return;if(!Q)return;const e=T[f];"private"===e.type?R.current.emit("private",{to:e.heroId,message:Q}):R.current.emit("chat",{message:Q}),p("")}const Y=o.filter((e=>{if("all"===f)return!0;if("chat"===f)return"chat"===e.type||"private"===e.type||"system"===e.type;if("notifications"===f)return"notification"===e.type||"drop"===e.type||"quest"===e.type||"system"===e.type;const t=T[f];return!t||"private"===t.type&&("private"===e.type&&(e.heroId===t.heroId||e.to===t.heroId))})),O=m?`Max message: ${140-Q.length}/140`:"Type here...",K=n?.me?.account?.hero?.pendingArtifact;return(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(F.Z,{open:!t?.currentQuest&&!!K,onClose:()=>{},children:(0,z.jsx)(r.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",padding:[2,4],minWidth:"320px",maxWidth:"580px",width:"80%",textAlign:"center"},children:K&&(0,z.jsx)(V,{currentArtifact:n?.me?.account?.hero?.equipment?.artifact??null,newArtifact:K})})}),(0,z.jsx)(g.ZP,{value:f,children:(0,z.jsx)(j.Z,{onChange:function(e,t){s&&l(!1),M(t)},"aria-label":"navigation tabs",variant:"scrollable",children:Object.keys(T).map((e=>(0,z.jsx)(d.Z,{label:e,value:e},e)))})}),"notifications"!==f&&(0,z.jsxs)(P.Z,{sx:{marginTop:1},fullWidth:!0,variant:"outlined",children:[(0,z.jsx)(A.Z,{htmlFor:"chat-input",children:O}),(0,z.jsx)($.Z,{disabled:!R.current?.connected,value:u,id:"chat-input",name:"Chat input",label:O,placeholder:"Type here...",onChange:function(e){const{value:t}=e.target;H(t).length<=140&&p(t)},onFocus:()=>x(!0),onBlur:()=>x(!1),autoComplete:"off",onKeyPress:function(e){"Enter"===e.key&&J()},endAdornment:(0,z.jsxs)(w.Z,{position:"end",children:[(0,z.jsx)(L.Z,{title:"Send message",children:(0,z.jsx)(C.Z,{"aria-label":"send chat",onClick:J,children:(0,z.jsx)(I.Z,{})})}),"private"===T[f]?.type&&(0,z.jsx)(L.Z,{title:s?"Cancel trade":"Trade with player",children:(0,z.jsxs)(C.Z,{onClick:()=>l(!s),children:[s&&(0,z.jsx)(W.Z,{}),!s&&(0,z.jsx)(E.Z,{})]})})]})})]}),s&&t&&T[f]?.heroId&&(0,z.jsx)(N,{hero:t,to:T[f].heroId??""}),(0,z.jsx)(r.Z,{sx:{padding:1,minHeight:"600px",bgcolor:"background.paper"},children:Y.map((e=>(0,z.jsxs)(h.Z,{variant:e.variant||"body1",sx:{color:`${"private"===e.type?"secondary":e.color||"text"}.main`},children:[e.time&&(0,z.jsxs)(h.Z,{variant:"caption","aria-hidden":"true",children:["(",(0,y.S)(new Date(1e3*e.time)),")\xa0"]}),e.heroId&&(0,z.jsx)(k.Z,{onClick:()=>{var t,n;e.heroId&&(t=e.from,n=e.heroId,D((e=>({...e,[t]:{type:"private",heroId:n}}))),M(t))},sx:{color:"inherit",textTransform:"none",paddingTop:0,paddingBottom:0,paddingLeft:1,paddingRight:.5,margin:0},children:(0,z.jsxs)("b",{children:[e.from,":"]})}),!e.heroId&&(0,z.jsx)("b",{children:e.from})," ",(0,v.emojify)(e.message)," ",e.time&&(0,z.jsxs)(h.Z,{variant:"caption",sx:b.Z,children:["(",(0,y.S)(new Date(1e3*e.time)),")\xa0"]})]},e.id)))}),(0,z.jsx)("br",{})]})}var ee=n(1409),te=n(2437);function ne(){const e=B(),{data:t}=(0,q.W1)({variables:e?.location?{location:{x:e.location.x,y:e.location.y,map:e.location.map}}:void 0,skip:!e?.location});return t?.locationDetails??null}function ie(){const e=ne()?.specialLocations||[];return e.length?e[0]:null}var ae=n(2734),se=n(6012),le=n(5499),re=n(8698),oe=n(7600),ce=n(5826);const de={[q.zP.Fire]:"Fireball",[q.zP.Ice]:"Blizzard",[q.zP.Lightning]:"Lightning Bolt",[q.zP.Blight]:"Wrathful"},he={[q.zP.Normal]:"Normal stance with no pros or cons.",[q.zP.Reckless]:"Double accuracy but makes you twice as easy to hit.",[q.zP.Fire]:"Converts 20% of magic damage into Fire damage.",[q.zP.Ice]:"Converts 20% of magic damage into Ice damage.",[q.zP.Lightning]:"Converts 20% of magic damage into Lightning damage.",[q.zP.Sunder]:"Converts 50% of damage into Physical damage.",[q.zP.Blight]:"Changes base damage type of smite from Holy to Blight."};function me(e){const t=B(),[n,a]=(0,i.useState)(t?.activeStance||q.zP.Normal);if(!t)return null;const s=t.availableStances.map((e=>({name:de[e]??e,stance:e,tooltip:he[e]})));return s.length<2?null:(0,z.jsx)(m.ZP,{item:!0,xs:12,children:(0,z.jsxs)(m.ZP,{container:!0,sx:{textAlign:"center"},columns:6,spacing:2,children:[(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsx)(o.Z,{})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsx)(h.Z,{variant:"h5",children:"Select Combat Style"})}),s.map((t=>(0,z.jsx)(m.ZP,{item:!0,lg:1,md:2,sm:3,xs:6,children:(0,z.jsx)(L.Z,{title:t.tooltip,children:(0,z.jsx)(k.Z,{variant:n===t.name?"outlined":"text",sx:{fontSize:"1rem",padding:2},size:"large",id:`set-stance-${t.name.toLowerCase()}`,onClick:()=>function(t){a(t),e.onChange&&e.onChange(t)}(t.stance),"aria-label":`set stance ${t.name}`,children:t.name})})},t.name)))]})})}function xe(e){const{autoBattle:t,canAutoBattle:n,fight:{id:a,monster:s},onVictory:l,onError:r,onAutoBattle:o,fightMutationRef:d,duel:x,hero:u}=e,[g,j]=(0,i.useState)(!1),[p,{data:b,loading:f}]=(0,q.zC)(),[Z,{data:v,loading:y}]=(0,q.E0)(),[S,w]=(0,i.useState)(100),[C,P]=(0,i.useState)(q.hK.Melee),A=b?.fight||v?.attackHero||null,$=b?.fight?.monster?.monster||v?.attackHero?.otherHero||null,F=(0,ae.Z)(),[I,E]=(0,i.useState)(u.activeStance||q.zP.Normal),W=!t&&n;async function B(e){P(e);try{if(x){(await Z({variables:{id:a,attackType:e,stance:I}})).data?.attackHero.victory&&l&&l()}else{(await p({variables:{monster:a,attackType:e,stance:I}})).data?.fight.victory&&l&&l()}}catch(t){if(t.graphQLErrors&&t.graphQLErrors[0]){const[e]=t.graphQLErrors;if(e.extensions?.delay)return;if(e.message.startsWith("Key not found in database"))return j(!0),void w(0)}r&&r(t)}}return(0,i.useEffect)((()=>{g&&j(!1),f||y||w(100*($?$.combat.health:s.combat.health)/s.combat.maxHealth)}),[$?.combat.health,$?.combat.maxHealth,s.combat.maxHealth]),d&&(d.current=B),(0,i.useEffect)((()=>()=>{d&&(d.current=()=>{})}),[]),(0,z.jsxs)(i.Fragment,{children:[!t&&(0,z.jsx)(me,{onChange:E}),(0,z.jsxs)(m.ZP,{id:"combat-display",sx:{position:"relative",minHeight:"320px",[F.breakpoints.down("md")]:{minHeight:"450px"},[F.breakpoints.down("sm")]:{minHeight:"580px"},[F.breakpoints.down("xs")]:{minHeight:"660px"}},item:!0,xs:6,children:[(0,z.jsxs)(m.ZP,{container:!0,sx:{textAlign:"center"},columns:6,children:[(0,z.jsxs)(m.ZP,{item:!0,xs:6,children:[(0,z.jsxs)(h.Z,{variant:"h4",children:[S>0&&(t?"Auto-Battling":"Battling"),S<=0&&"Dead"," ",s.name]}),(0,z.jsx)(c.Z,{variant:"determinate",value:S,color:"error"})]}),S>0&&(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:2,xl:2,children:(0,z.jsx)(L.Z,{title:"Attack using your melee weapons, uses strength and dexterity",describeChild:!0,children:(0,z.jsx)(k.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-melee",onClick:()=>B(q.hK.Melee),"aria-label":"melee attack",startIcon:(0,z.jsx)(se.Z,{}),children:"Melee attack"})})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:2,xl:2,children:(0,z.jsx)(L.Z,{title:"Attack using your ranged weapons, uses dexterity",describeChild:!0,children:(0,z.jsx)(k.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-ranged",onClick:()=>B(q.hK.Ranged),"aria-label":"ranged attack",startIcon:(0,z.jsx)(le.Z,{}),children:"Ranged attack"})})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:2,xl:2,children:(0,z.jsx)(L.Z,{title:"Cast spells using your wisdom and intelligence",describeChild:!0,children:(0,z.jsx)(k.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-cast",onClick:()=>B(q.hK.Cast),"aria-label":"cast spell",startIcon:(0,z.jsx)(re.Z,{}),children:"Cast Spell"})})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:3,xl:3,children:(0,z.jsx)(L.Z,{title:"Smite your foe using wisdom and willpower",describeChild:!0,children:(0,z.jsx)(k.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-holy",onClick:()=>B(q.hK.Smite),"aria-label":"holy attack",startIcon:(0,z.jsx)(oe.Z,{}),children:"Smite"})})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:6,md:3,xl:3,children:(0,z.jsx)(L.Z,{title:"Damage yourself to damage the enemy, uses constitution",describeChild:!0,children:(0,z.jsx)(k.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-blood",onClick:()=>B(q.hK.Blood),"aria-label":"blood magic",startIcon:(0,z.jsx)(ce.Z,{}),children:"Blood magic"})})})]})]}),g&&"This enemy was killed by another player",A&&A.log.map(((e,t)=>(0,z.jsx)(i.Fragment,{children:(0,z.jsxs)(h.Z,{children:[e.isEnchantment&&(0,z.jsxs)(i.Fragment,{children:[e.damage<0&&(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)("b",{children:e.from})," heals"," ",(0,z.jsx)("span",{id:`fight-${e.from}-enchantment-heal`,children:(0-e.damage).toLocaleString()})," ","health from their enchantments"]}),e.damage>0&&(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)("b",{children:e.from})," dealt"," ",(0,z.jsx)("span",{id:`fight-${e.from}-enchantment-damage`,children:e.damage.toLocaleString()})," ","enchantment damage to ",(0,z.jsx)("b",{children:e.to})]})]}),!e.isEnchantment&&(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)("b",{children:e.from}),` ${ue(e.attackType,e.success,e.critical)} `,(0,z.jsx)("b",{children:e.to}),e.success?` for ${e.damage.toLocaleString()} ${e.damageType?e.damageType.toLowerCase():""} damage!`:"."]})]})},`${e.from}-${t}`))),A&&A.victory&&(0,z.jsxs)(i.Fragment,{children:[(0,z.jsxs)(h.Z,{id:"fight-did-win",children:[s.name," has been killed!",(A.experience||A.gold)&&" You gain ",A.gold&&(0,z.jsxs)(i.Fragment,{children:[" ",(0,z.jsx)("span",{id:"fight-recap-gold",children:A.gold.toLocaleString()})," ","gold"]}),A.gold&&A.experience&&" and",A.experience&&(0,z.jsxs)(i.Fragment,{children:[" ",(0,z.jsx)("span",{id:"fight-recap-experience",children:A.experience.toLocaleString()})," ","experience"]}),(A.experience||A.gold)&&"!! ",A.didLevel&&(0,z.jsx)("b",{id:"fight-level-up",children:"You leveled up!!"})]}),A.drop&&(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)("br",{}),(0,z.jsxs)(h.Z,{id:"fight-got-drop",variant:"h5",children:["You find an enchanted item on the monster's corpse!",(0,z.jsx)("br",{}),(0,G.GJ)(A.drop)]})]}),(0,z.jsx)("br",{}),W&&(0,z.jsx)(k.Z,{fullWidth:!0,color:"secondary",variant:"contained",onClick:()=>{o&&o(s.id,C)},children:"Auto-Battle this enemy"})]})]})]})}function ue(e,t,n){switch(e){case q.hK.Blood:return t?n?"surges with blood magic against":"lets blood and casts forth towards":"attempts to cast a spell against";case q.hK.Smite:return t?n?"summons powers beyond this world against":"smites":"attempts to smite";case q.hK.Cast:return t?n?"carefully casts a powerful spell against":"shoots a magical bolt at":"attempts to cast a spell against";case q.hK.Ranged:return t?n?"lands a sneak attack from the shadows, critically damaging":"fires an arrow at":"shoots an arrow but it misses";case q.hK.Melee:default:return t?n?"lands a crippling blow against":"struck":"missed"}}function ge(){const[e,t]=(0,i.useState)(q.hK.Melee),[n,a]=(0,i.useState)(0),[s,l]=(0,i.useState)(0),[r,o]=(0,i.useState)([0,50,100]),d=(0,i.useRef)((()=>{})),[x,u]=(0,i.useState)(!1),[g,j]=(0,i.useState)(""),[p,b]=(0,i.useState)(0),[f,Z]=(0,i.useState)(null),[v,y]=(0,te.gZ)(),[S,w]=(0,i.useState)("");let[C,$]=(0,i.useState)(""),[L,F]=(0,i.useState)("");const[I,E]=(0,i.useState)(""),{data:W,loading:D,error:N,refetch:R}=(0,q.Of)(),[H]=(0,q.Ht)(),[Q,{loading:J}]=(0,q.hL)(),{data:Y,refetch:O}=(0,q.pL)();let K=Y?.challenges||[];const U=B(),[V,{data:_,loading:X}]=(0,q.zC)(),ie=(0,i.useRef)((e=>{}));let ae=ne()?.players??[];const se=W?.monsters?.find((e=>e.id===f));let le=!1,re=0;U&&(le=!!U.inventory.find((e=>(0,G.h8)(e.baseItem))),re=U.inventory.filter((e=>(0,G.Ke)(e.baseItem))).length);const oe=J||D||X;async function ce(){try{await Q()}catch(e){e.graphQLErrors&&e.graphQLErrors[0]?.extensions?.delay&&y(e.graphQLErrors[0].extensions.remaining)}}async function de(e){try{const{data:t}=await H({variables:{monster:e}});await R(),t?.challenge&&Z(t.challenge.id),t?.challenge?.id&&$(t?.challenge?.id),b(p+1),E("")}catch(t){R()}}(0,i.useEffect)((()=>(window.setChallengeMonster=w,()=>{delete window.setChallengeMonster})),[w]),(0,i.useEffect)((()=>{O(),R()}),[U?.location.x,U?.location.y,U?.location.map]),d.current=async()=>{if(l((s+1)%(4/Math.pow(2,re))),o([Math.random()>.5?100*Math.random():r[0],Math.random()>.5?100*Math.random():r[1],Math.random()>.5?100*Math.random():r[2]]),0===s&&!(oe||v>0))return 0===U?.combat.health?(console.log("[AutoBattler] Healing!"),ce()):se&&0!==se.monster.combat.health&&se.monster.id===g?se&&ie.current?(console.log(`[AutoBattler] Fighting ${e}!`),void ie.current(e)):void console.log("[AutoBattler] Doing nothing..."):(console.log("[AutoBattler] Challenging new mob!"),void de(g))},(0,i.useEffect)((()=>{if(!x||!g.length)return;const e=(0,ee.Zi)((()=>{d.current()}),500);return()=>{(0,ee.cv)(e)}}),[x,re]),(0,i.useEffect)((()=>{if(W?.monsters?.length){const e=W.monsters.concat().sort(((e,t)=>e.monster.level-t.monster.level));if(""===C)$(e[0].id);else{W.monsters.find((e=>e.id===C))||$(e[0].id)}}}),[C,W?.monsters?.length]);const he=W?.monsters?.find((e=>e.id===C));he||(C="");const me=ae.find((e=>e.id===I));if(ae.find((e=>e.id===L))||(L=""),!U)return null;U.levelCap>100||(K=K.slice(0,U.level)),ae=ae.filter((e=>e.combat.health>0));const ue="Select a new monster to challenge",ge="Fight an existing monster!",je="Duel with a nearby player!";return(0,z.jsx)(i.Fragment,{children:(0,z.jsxs)(m.ZP,{container:!0,columns:6,spacing:4,children:[!x&&U&&U.combat.health>0&&(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(m.ZP,{item:!0,md:3,xs:6,children:(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(A.Z,{id:"challenge-monster-select-label",children:ue}),(0,z.jsx)(M.Z,{id:"challenge-select",labelId:"challenge-monster-select-label",value:S,label:ue,disabled:x,onChange:e=>w(e.target.value),children:K.map((e=>(0,z.jsxs)(T.Z,{value:e.id,children:[e.name,"\xa0",(0,z.jsxs)(h.Z,{variant:"caption",display:"inline-block",children:["Tier ",e.level]})]},e.id)))}),(0,z.jsx)(k.Z,{id:"challenge-button",disabled:!S||v>0||J||x,onClick:async function(){return de(S)},variant:"contained",children:"Challenge!"})]})}),(0,z.jsx)(m.ZP,{item:!0,md:3,xs:6,children:(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(A.Z,{id:"fight-monster-select-label",children:ge}),(0,z.jsx)(M.Z,{id:"fight-select",labelId:"fight-monster-select-label",value:C,label:ge,disabled:x,onChange:e=>$(e.target.value),children:W?.monsters&&[...W?.monsters].sort(((e,t)=>e.monster.level-t.monster.level)).map((e=>(0,z.jsxs)(T.Z,{value:e.id,disabled:0===e.monster.combat.health,children:[0===e.monster.combat.health&&"Dead ",e.monster.name]},e.id)))}),(0,z.jsx)(k.Z,{id:"fight-button",disabled:!C||v>0||J||he&&0===he.monster.combat.health||x,onClick:async function(){W?.monsters.find((e=>e.id===C)),Z(C),E("")},variant:"contained",children:"Fight!"})]})}),ae.length>1&&(0,z.jsx)(m.ZP,{item:!0,md:3,xs:6,children:(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(A.Z,{id:"duel-select-label",children:je}),(0,z.jsx)(M.Z,{id:"duel-select",labelId:"duel-select-label",value:L,label:je,disabled:x,onChange:e=>F(e.target.value),children:ae.filter((e=>e.id!==U.id)).sort(((e,t)=>e.level-t.level)).map((e=>(0,z.jsx)(T.Z,{value:e.id,children:e.name},e.id)))}),(0,z.jsx)(k.Z,{id:"duel-button",disabled:!L.length||v>0||J||x,onClick:async function(){E(L),Z("")},variant:"contained",children:"Duel Player!"})]})})]}),x&&(0,z.jsxs)(m.ZP,{item:!0,xs:6,children:[(0,z.jsx)(c.Z,{sx:{margin:1,color:"#f00"},variant:"determinate",value:r[0],color:"inherit"}),(0,z.jsx)(c.Z,{color:"inherit",sx:{margin:1,color:"#0f0"},variant:"determinate",value:r[1]}),(0,z.jsx)(c.Z,{color:"inherit",sx:{margin:1,color:"#00f"},variant:"determinate",value:r[2]}),(0,z.jsx)(k.Z,{fullWidth:!0,variant:"contained",color:"error",size:"large",onClick:()=>u(!1),children:"Disable Auto-Battle"})]}),U&&U.combat.health<=0&&(0,z.jsx)(m.ZP,{item:!0,lg:3,xs:6,children:(0,z.jsx)(h.Z,{id:"you-are-dead",children:"You are dead."})}),se&&(0,z.jsx)(i.Fragment,{children:(0,z.jsx)(xe,{hero:U,fight:se,onError:()=>{R(),Z(null)},autoBattle:x,canAutoBattle:le,onAutoBattle:async function(e,n){console.log("Enabling auto battler! weee!"),u(!0),t(n),a(0),j(e)},fightMutationRef:ie,onVictory:()=>a(n+1)},`${se.id}-${p}`)}),me&&(0,z.jsx)(i.Fragment,{children:(0,z.jsx)(xe,{hero:U,fight:{id:me.id,monster:me},onError:()=>{R(),Z(null)},duel:!0,autoBattle:!1,canAutoBattle:!1},`${me.id}-${p}`)}),(0,z.jsx)(m.ZP,{item:!0,lg:3,xs:6,children:(0,z.jsx)(k.Z,{id:"heal-button",fullWidth:!0,onClick:ce,variant:"contained",disabled:v>0||J||U&&U.combat.health===U.combat.maxHealth,children:"Heal"})})]})})}var je=n(1767);const pe=n(4351).Z.table`
  border-collapse: collapse;

  tr {
    margin: 0px;
    padding: 0px;
    td {
      position: relative;
      width: ${({cellSize:e})=>e}px;
      height: ${({cellSize:e})=>e}px;
      overflow: visible;
      margin: 0px;
      padding: 0px;
    }
  }
`;function be({location:e,minimapSize:t=[24,24],gridSize:n=[128,96],cellSize:i=16,renderCell:a=(()=>null)}){const s=[Math.round(Math.min(n[0]-t[0],Math.max(0,e.x-t[0]/2))),Math.round(Math.min(n[1]-t[1],Math.max(0,e.y-t[1]/2)))];return(0,z.jsx)("div",{style:{position:"relative",display:"inline-block",backgroundImage:`url(/maps/${e.map}.jpg)`,backgroundPosition:`-${s[0]*i}px -${s[1]*i}px`,backgroundSize:`${128*i}px ${96*i}px `,width:t[0]*i+"px",height:t[1]*i+"px"},children:(0,z.jsx)(pe,{cellSize:i,children:(0,z.jsx)("tbody",{children:[...Array(t[1])].map(((e,n)=>(0,z.jsx)("tr",{children:[...Array(t[0])].map(((e,t)=>(0,z.jsx)("td",{children:a({x:s[0]+t,y:s[1]+n})},`cell-${s[0]+t}-${s[1]+n}`)))},`row-${s[1]+n}`)))})})})}function fe({location:e}){const[t,{loading:n}]=(0,q.L7)(),{data:a}=(0,q.dE)(),[s,l]=(0,i.useState)(""),o="Choose a port to sail to";function c(t){return(0,G.LW)(t.location,e.location)}function d(t){return Math.round(12*(0,G.LW)(t.location,e.location))}return(0,z.jsxs)(r.Z,{children:[(0,z.jsx)(h.Z,{variant:"h5",children:e.name}),(0,z.jsx)(h.Z,{children:"The wooden docks creak and sway with the water below."}),(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(A.Z,{id:"sail-dock-select-label",children:o}),(0,z.jsx)(M.Z,{id:"sail-select",labelId:"sail-dock-select-label",value:s,label:o,onChange:e=>l(e.target.value),children:a?.docks&&[...a?.docks].sort(((e,t)=>c(e)-c(t))).map((t=>(0,z.jsxs)(T.Z,{value:t.name,disabled:t.name===e.name,children:[t.name,":"," ",t.name!==e.name&&(0,z.jsxs)(i.Fragment,{children:[d(t).toLocaleString()," Gold"]}),t.name===e.name&&"Current location"]},t.name)))}),(0,z.jsx)(k.Z,{onClick:function(){if(!a)return;const e=a.docks.find((e=>e.name===s));e&&t({variables:{x:e.location.x,y:e.location.y}})},variant:"outlined",color:"success",disabled:!s.length||n,children:"Sail!"})]})]})}var Ze=n(6205);function ve({shop:e}){const[t,n]=(0,i.useState)(!1),[a,s]=(0,i.useState)(""),[l,{loading:r}]=(0,q.NA)();return(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(o.Z,{sx:{mt:1,mb:1}}),(0,z.jsx)(h.Z,{variant:"h4",component:"h5",color:"info.main",children:e.name}),(0,z.jsx)(h.Z,{sx:{mb:2},variant:"subtitle2",color:"info.main",children:"Hermit shop"}),a.length>0&&(0,z.jsx)(h.Z,{sx:{mb:2},variant:"body1",color:t?"success.main":"error.main",children:a}),e.trades.map(((e,t)=>(0,z.jsx)(i.Fragment,{children:(0,z.jsxs)(h.Z,{children:[(0,z.jsx)(ye,{trade:e}),(0,z.jsx)(k.Z,{disabled:r,onClick:()=>async function(e){console.log("attemptiong trade",e),s("");try{const t=await l({variables:{trade:e}});t?.data?.npcTrade&&(s(t.data.npcTrade.message),n(t.data.npcTrade.success))}catch(t){}}(e.id),sx:{ml:1},children:"Trade"})]})},`npc shop items ${t}`)))]})}function ye({trade:e}){return(0,z.jsxs)(i.Fragment,{children:["For the price of ",(0,z.jsx)(Se,{price:e.price}),", I'll give you"," ",(0,z.jsx)(Se,{price:e.offer})]})}function Se({price:e}){return(0,z.jsx)(L.Z,{title:ke(e),describeChild:!0,children:(0,z.jsx)(Ze.Z,{style:{background:"none",border:"none"},"aria-label":ke(e),children:e.description})})}function ke(e){let t=[];return e.gold&&t.push(`${e.gold.toLocaleString()} gold`),e.dust&&t.push(`${e.dust.toLocaleString()} dust`),e.baseItems?.length&&e.baseItems.forEach((e=>{t.push(`${e}`)})),e.enchantments?.length&&e.enchantments.forEach((e=>{t.push(`${(0,G.uD)(e)}`)})),e.questItems?.length&&e.questItems.forEach((e=>{t.push(`${e}`)})),t.length?t.join(", "):"???"}var we=n(3020),Ce=n(6242),Pe=n(2023),Ae=n(9748),$e=n(4267),Le=n(8951),Fe=n(1812),Ie=n(7855),Ee=n(3707),We=n(5843),qe=n(1233);function Be({hero:e,camp:t,onBuyResource:n}){const[a,s]=(0,i.useState)(!1),[l,{loading:o}]=(0,q.G_)(),[c,{loading:d}]=(0,q.jE)();q.G_;const[x,u]=(0,i.useState)(""),[g,j]=(0,i.useState)(""),p=d||o;const b=!!t.upgrades.find((e=>e===q.gT.TradingPost)),f=!x.length||!g.length||Number(g)<1||isNaN(Number(g))||!Number.isFinite(Number(g));return(0,z.jsx)(r.Z,{children:(0,z.jsxs)(m.ZP,{container:!0,columns:6,spacing:1,children:[b&&(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsxs)(qe.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,z.jsx)(h.Z,{children:"Buy"}),(0,z.jsx)(We.Z,{color:"success",checked:a,onChange:e=>s(e.target.checked)}),(0,z.jsx)(h.Z,{children:"Sell"})]})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsxs)(P.Z,{fullWidth:!0,sx:{mt:1,minWidth:200},children:[(0,z.jsxs)(A.Z,{children:["Select resource to ",a?"sell":"buy"]}),(0,z.jsxs)(M.Z,{label:"Select resource to "+(a?"sell":"buy"),value:x,onChange:e=>u(e.target.value),children:[(0,z.jsx)(T.Z,{value:"wood",children:"Wood"}),(0,z.jsx)(T.Z,{value:"food",children:"Food"}),(0,z.jsx)(T.Z,{value:"water",children:"Water"}),(0,z.jsx)(T.Z,{value:"stone",children:"Stone"})]})]})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(P.Z,{fullWidth:!0,sx:{mt:1,minWidth:200},children:(0,z.jsx)(D.Z,{label:"Amount to "+(a?"sell":"buy"),value:g,onChange:e=>j(e.target.value)})})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsx)(P.Z,{fullWidth:!0,children:(0,z.jsxs)(Fe.Z,{color:a?"success":"error",loading:p,variant:"contained",disabled:f,onClick:async function(){try{const e=a?l:c;await e({variables:{amount:Number(g),resource:x}}),j(""),u(""),n&&n()}catch(e){}},children:[a&&"Sell ",!a&&"Buy ",f&&"Resources",!f&&`${x} for ${(1e4*Number(g)).toLocaleString()} Gold`]})})})]})})}function Ge({hero:e,onShowSettlement:t}){const n=ie();let i=!1;return e.home&&e.home.location.x===e.location.x&&e.home.location.y===e.location.y&&e.home.location.map===e.location.map&&(i=!0),n&&"altar"!==n.type||!e.home&&e.gold<1e5?null:(0,z.jsxs)(r.Z,{children:[!e.home&&(0,z.jsx)(Me,{hero:e}),e.home&&(0,z.jsx)(Te,{isLocal:i,hero:e,onShowSettlement:t}),(0,z.jsx)(o.Z,{sx:{mt:2,mb:2}})]})}function Me({hero:e}){const[t,{loading:n}]=(0,q.kO)();return(0,z.jsxs)(r.Z,{children:[(0,z.jsx)(h.Z,{component:"h2",variant:"h5",sx:{mb:2},children:"Settle Camp"}),(0,z.jsx)(h.Z,{sx:{mb:2},children:"Settling a camp site allows you to heal faster while standing on that square. Additionally, you'll be able to upgrade the camp site to gain additional features and upgrades."}),(0,z.jsxs)(Fe.Z,{loading:n,color:"success",onClick:async function(){try{await t()}catch(e){}},sx:{p:2},startIcon:(0,z.jsx)(Ie.Z,{}),children:["Settle Camp for ",1e5.toLocaleString()," Gold"]})]})}function Te({hero:e,isLocal:t,onShowSettlement:n}){const[a,s]=(0,i.useState)(!1),[l,o]=(0,i.useState)(!1),[c,{loading:d}]=(0,q.kO)();if(!e.home)return null;const m=!!e.home.upgrades.find((e=>e===q.gT.TradingPost)),x=!!e.home.upgrades.find((e=>e===q.gT.Settlement));if(!t)return(0,z.jsxs)(r.Z,{children:[(0,z.jsxs)(J.Z,{open:a,onClose:()=>s(!1),"aria-labelledby":"confirmation-title","aria-describedby":"confirmation-description",children:[(0,z.jsxs)(Y.Z,{id:"confirmation-title",children:[!x&&"Destroy existing campsite?",x&&"Destroy settlement capital?"]}),(0,z.jsx)(O.Z,{children:(0,z.jsxs)(Le.Z,{id:"confirmation-description",children:["Settling a new camp here will leave your old"," ",x?"settlement":"campsite"," abandoned. You will lose any upgrades or anything stored there."]})}),(0,z.jsxs)(K.Z,{children:[(0,z.jsx)(Fe.Z,{color:"error",loading:d,onClick:()=>s(!1),children:"Nevermind"}),(0,z.jsx)(Fe.Z,{color:"success",loading:d,onClick:async function(){s(!1);try{await c()}catch(e){}},autoFocus:!0,children:"Re-Settle Camp"})]})]}),(0,z.jsxs)(h.Z,{sx:{mb:2},component:"h2",children:["Your ",x?"settlement":"campsite"," is at"," ",(0,z.jsxs)("b",{children:[e.home.location.x,", ",e.home.location.y]}),". You must be at your ",x?"settlement":"campsite"," to interract with it."]}),(0,z.jsxs)(Fe.Z,{loading:d,color:"error",onClick:()=>s(!0),sx:{p:2},startIcon:(0,z.jsx)(Ee.Z,{}),children:["Rebuild Camp HERE for ",1e5.toLocaleString()," Gold"]})]});const u=x?"Manage Settlement":"Manage Campsite";return(0,z.jsxs)(r.Z,{children:[(0,z.jsxs)(J.Z,{open:l,onClose:()=>o(!1),"aria-labelledby":"manage-camp-title","aria-describedby":"manage-camp-description",children:[(0,z.jsx)(Y.Z,{id:"manage-camp-title",children:u}),(0,z.jsxs)(O.Z,{children:[(0,z.jsx)(De,{camp:e.home}),(0,z.jsxs)(Le.Z,{id:"manage-camp-description",children:["The fire crackles and pops as you work.",!x&&" Your tools and supplies lie staggered across the campsite.",x&&" Your tools sit organized in the shed, spare the ones in use"]}),(0,z.jsx)(Be,{hero:e,camp:e.home}),m&&(0,z.jsx)(Ne,{hero:e,camp:e.home}),(0,z.jsx)(ze,{hero:e,camp:e.home})]}),(0,z.jsx)(K.Z,{children:(0,z.jsx)(Fe.Z,{color:"success",loading:d,onClick:()=>o(!1),children:"Done"})})]}),(0,z.jsxs)(h.Z,{variant:"h5",component:"h2",sx:{mb:2},children:["Your ",x?"Settlement":"Campsite"]}),(0,z.jsx)(h.Z,{sx:{mb:2},children:"The fire crackles and pops as it burns through the night."}),(0,z.jsxs)(Fe.Z,{color:"warning",variant:"contained",loading:d,onClick:()=>x&&n?n():o(!0),startIcon:(0,z.jsx)(Ie.Z,{}),children:["Open ",x?"Settlement":"Camps"," Management"]})]})}function De({camp:e}){const{upkeep:t}=e;return(0,z.jsx)(m.ZP,{container:!0,columns:8,children:e.resources.map((({name:e,value:n,maximum:i})=>{let a=!1;return e in t&&(a=t[e]??!1),(0,z.jsxs)(m.ZP,{item:!0,xs:8,sm:4,md:2,children:[(0,z.jsx)("b",{children:(0,we.words)(e)}),":"," ",0===n?(0,z.jsx)(h.Z,{sx:{display:"inline-block"},color:"error",children:n.toLocaleString()}):n.toLocaleString()," ","/ ",i&&i.toLocaleString(),a&&(0,z.jsxs)(h.Z,{color:24*a>n?"error":"",component:"span","aria-label":`Upkeep: ${a}`,children:[" ","-",a.toLocaleString()]})]},e)}))})}function ze({hero:e,camp:t}){const[n,{loading:i}]=(0,q.Th)(),{data:a,refetch:s}=(0,q.Hk)(),l=a?.availableUpgrades??[],[o]=(0,te.gZ)(),c=o>0;if(!l.length)return null;const d=!!t.upgrades.find((e=>e===q.gT.Settlement));return(0,z.jsxs)(r.Z,{children:[(0,z.jsxs)(h.Z,{variant:"h6",children:[d?"Settlement":"Camp"," Upgrades"]}),(0,z.jsx)(m.ZP,{container:!0,columns:6,spacing:2,children:l.map((t=>{return(0,z.jsx)(m.ZP,{item:!0,xs:3,children:(0,z.jsxs)(Ce.Z,{variant:"outlined",children:[(0,z.jsx)(Ae.Z,{title:t.name}),(0,z.jsx)($e.Z,{children:(0,z.jsxs)(h.Z,{variant:"body2",color:"text.secondary",children:["Cost:"," ",t.cost.map((e=>`${e.value.toLocaleString()} ${(0,we.words)(e.name)}`)).join(", ")]})}),(0,z.jsx)(Pe.Z,{children:(0,z.jsx)(Fe.Z,{disabled:c,loading:i,sx:{m:1},variant:"outlined",color:(a=t.cost,(a.find((e=>"gold"===e.name))?.value??0)>e.gold?"error":"success"),onClick:()=>async function(e){try{await n({variables:{upgrade:e}}),await s()}catch(t){}}(t.type),children:"Purchase"})})]})},t.type);var a}))})]})}function Ne({hero:e,camp:t}){return null}var Re=n(1730),He=n(2613),Qe=n(3054),Je=n(7563),Ye=n(6398),Oe=n(6667),Ke=n(3898),Ue=n(1733),Ve=n(1671),_e=n(1749),Xe=n(4231);var et=n(7234);function tt({location:e,icon:t,cellSize:n,boundingBox:i,tooltip:a,hover:s=!1,onClick:l,color:r="white",bgcolor:o}){e.x,i.min.x,e.y,i.min.y;return(0,z.jsx)(L.Z,{describeChild:!0,title:`${e.x}, ${e.y}: ${a}`,children:(0,z.jsx)(C.Z,{onClick:l,sx:{display:"flex",justifyContent:"center",alignItems:"center",width:`${n}px`,height:`${n}px`,color:r,backgroundColor:o,border:`1px solid ${r}`,"&:hover":{backgroundColor:(0,et.Z)(o||r).setAlpha(o?s?.2:.8:s?.7:.1).toRgbString()}},children:t})})}function nt({cellSize:e,x:t,y:n,capital:a,type:s,range:l,boundingBox:r}){const[o]=(0,q.iA)(),c=a.connections.map((e=>e.location)).concat(a.location),d=(0,i.useMemo)((()=>{if(Math.abs(t-a.location.x)+Math.abs(n-a.location.y)>=l)return null;if(c.find((e=>e.x===t&&e.y===n)))return null;return c.find((e=>e.x===t+1&&e.y===n||e.x===t-1&&e.y===n||e.x===t&&e.y===n+1||e.x===t&&e.y===n-1))?{x:t,y:n,map:a.location.map}:null}),[c.length,t,n,l]);return d?(0,z.jsx)(i.Fragment,{children:(0,z.jsx)(tt,{onClick:()=>async function(e){try{await o({variables:{location:e,type:s}})}catch(t){}}(d),hover:!0,color:"rgb(10, 120, 10)",cellSize:e,boundingBox:r,location:d,tooltip:"Build here",icon:(0,z.jsx)(Qe.Z,{})},`${d.x}-${d.y}`)}):null}function it({location:e,hero:t,onDestroy:n}){const[a,{loading:s}]=(0,q.Up)(),[l,{loading:r}]=(0,q.bv)(),[o,{loading:c}]=(0,q.xs)(),[d,{loading:m}]=(0,q.ny)(),[x,{loading:u}]=(0,q.SD)(),g=(0,te.mu)();return e.owner!==t.id?(0,z.jsx)(z.Fragment,{children:"Select a building that belongs to you."}):e.resources?(0,z.jsxs)(i.Fragment,{children:[(0,z.jsxs)("ul",{children:[(0,z.jsx)("li",{children:(0,z.jsx)(at,{name:"Building type",value:e.type})}),e.resources.map((e=>e.value>0?(0,z.jsx)("li",{children:(0,z.jsx)(at,{name:(0,we.words)(e.name),"aria-label":`${e.value.toLocaleString()} out of ${(e.maximum??0).toLocaleString()}`,value:`${e.value.toLocaleString()} / ${(e.maximum??0).toLocaleString()}`})},e.name):null))]}),e.id===t.home?.id&&(0,z.jsx)(ze,{camp:e,hero:t}),e.type===q.oS.Settlement&&e.id!==t.home?.id&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{children:"This settlement is a former capital that has fallen. You can destroy this location and reclaim most of the resources."}),(0,z.jsx)(k.Z,{onClick:()=>n(e),variant:"contained",color:"error",children:"Destroy former settlement"})]}),e.type===q.oS.Barracks&&(0,z.jsx)(st,{location:e,action:"Recruit",unit:"troops",cost:1e6,loading:s,onPurchase:e=>{a({variables:e})}}),e.type===q.oS.Treasury&&(0,z.jsx)(st,{location:e,action:"Purchase",unit:"bonds",cost:1e6,loading:r,onPurchase:e=>{l({variables:e})}}),e.type===q.oS.Treasury&&(0,z.jsx)(st,{location:e,action:"Sell",unit:"bonds",cost:1e6,loading:r,onPurchase:e=>{l({variables:{...e,amount:0-e.amount}})}}),e.type===q.oS.Treasury&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Fe.Z,{sx:{m:1},loading:u,variant:"contained",disabled:g,onClick:()=>{x({variables:{location:{x:e.location.x,y:e.location.y,map:e.location.map},greater:!1}})},children:"Craft Element of Gold (1,000,000 bonds)"}),(0,z.jsx)(Fe.Z,{sx:{m:1},loading:u,variant:"contained",disabled:g,onClick:()=>{x({variables:{location:{x:e.location.x,y:e.location.y,map:e.location.map},greater:!0}})},children:"Craft Greater Element of Gold (250,000,000 bonds)"})]}),e.type===q.oS.Garrison&&(0,z.jsx)(st,{location:e,action:"Build",unit:"fortifications",cost:1e6,loading:m,onPurchase:e=>{d({variables:e})}})]}):null}function at({name:e,value:t,"aria-label":n}){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("label",{style:{fontWeight:"bold"},htmlFor:`building-details-value-${e}`,children:[e,":"]})," ",(0,z.jsx)("span",{"aria-label":n,children:t})]})}function st({location:e,action:t,unit:n,cost:a,loading:s=!1,onPurchase:l}){const[r,o]=(0,i.useState)(0),[c]=(0,q.Up)(),d=(0,te.mu)(),h=Number.isFinite(r)&&!isNaN(r)&&r>0;return(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(D.Z,{onChange:e=>o(parseInt(e.target.value)),id:`${t}-input`,label:`Amount of ${n} to ${t.toLowerCase()}`}),(0,z.jsxs)(Fe.Z,{loading:s,variant:"contained",disabled:!h||d,onClick:()=>{Number.isFinite(r)&&!isNaN(r)&&l({location:{x:e.location.x,y:e.location.y,map:e.location.map},amount:r})},children:[!h&&`${t} ${n}`,h&&`${t} ${r.toLocaleString()} ${n} for ${(r*a).toLocaleString()} gold`]})]})}var lt=n(89),rt=n(6656),ot=n(8456);function ct({open:e,onClose:t,loading:n,attackResults:i,hero:a}){return(0,z.jsx)(F.Z,{open:e,onClose:t,children:(0,z.jsxs)(r.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",padding:[2,4],minWidth:"320px",maxWidth:"580px",width:"80%",textAlign:"center"},"aria-labelledby":"attack-results-modal-title","aria-describedby":"modal-modal-description",children:[n&&(0,z.jsx)(ot.Z,{}),i&&(0,z.jsxs)(z.Fragment,{children:[i.target.owner===a.id&&(0,z.jsx)(h.Z,{id:"attack-results-modal-title",variant:"h5",component:"h2",children:"Your troops have claimed this location in your name, it now belongs to your settlement."}),i.target.owner!==a.id&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(h.Z,{id:"attack-results-modal-title",variant:"h5",component:"h2",children:["Attack results for ",i.target.location.x,","," ",i.target.location.y]}),(0,z.jsxs)(h.Z,{variant:"subtitle1",children:["Owner:"," ",(0,z.jsx)("strong",{children:i?.target?.publicOwner?.name??"Unknown"})]})]}),(0,z.jsx)("br",{}),(0,z.jsxs)(h.Z,{children:["You lost ",dt(i.attackerCasualties)]}),(0,z.jsxs)(h.Z,{children:["Your opponent lost"," ",dt(i.targetCasualties)]}),i.totalDamage>0&&(0,z.jsxs)(h.Z,{children:["Your troops dealt ",i.totalDamage.toLocaleString()," ","damage"]}),i.damage>0&&(0,z.jsxs)(h.Z,{children:["The target location received"," ",i.damage.toLocaleString()," damage",i.totalDamage>i.damage&&", the rest was absorbed by garrisons."]}),0===i.damage&&(0,z.jsx)(h.Z,{children:"All damage was absorbed by garrisons."})]})]})})}function dt(e){const t=Object.keys(e).map((t=>{const n=e[t];return!!(n&&n>0)&&`${n.toLocaleString()} ${t}`})).filter((e=>!!e));return t.length?t.join(", "):"nothing"}function ht({location:e,capital:t,hero:n,resources:a,refetch:s}){const[l,r]=(0,i.useState)(0),[o,c]=(0,i.useState)(0),[d,x]=(0,i.useState)(0),[u,g]=(0,i.useState)(0),[j,p]=(0,i.useState)(!1),[b]=(0,q.cK)(),[f,{data:Z,loading:v}]=(0,q.ty)(),y=e?.owner!==n.id,S=e?.resources?.find((e=>"enlisted"===e.name)),w=e?.resources?.find((e=>"soldier"===e.name)),C=e?.resources?.find((e=>"veteran"===e.name)),P=e?.resources?.find((e=>"ghost"===e.name)),A={};return a.forEach((e=>{A[e.name]=e})),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ct,{open:j,onClose:()=>p(!1),attackResults:Z?.attackLocation,loading:v,hero:n}),(0,z.jsx)(h.Z,{variant:"h4",children:"Military actions"}),(0,z.jsx)(h.Z,{variant:"body1",children:"Use this UI to move your tropps or attack adjacent empires. You can only attack buildings owned by other players which are adjacent to your own. If you deal enough damage then the building will be converted over to your control."}),(0,z.jsx)("br",{}),(0,z.jsxs)(h.Z,{variant:"h6",component:"h4",children:["Remaining attacks: ",t.remainingAttacks]}),(0,z.jsx)("br",{}),(0,z.jsx)(h.Z,{variant:"h5",children:"Current target"}),!e&&(0,z.jsx)(h.Z,{variant:"body1",children:"Select a target using the map."}),e&&(0,z.jsxs)("ul",{children:[(0,z.jsxs)("li",{children:[(0,z.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-target-location",children:"Location:"})," ",(0,z.jsxs)("span",{id:"military-target-location",children:[e.location.x,", ",e.location.y]})]}),(0,z.jsxs)("li",{children:[(0,z.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-target-type",children:"Type:"})," ",(0,z.jsx)("span",{id:"military-target-type",children:e.type})]}),(0,z.jsxs)("li",{children:[(0,z.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-target-owner",children:"Owner:"})," ",(0,z.jsx)("span",{id:"military-target-owner",children:e.publicOwner?.name})]})]}),!e&&(0,z.jsxs)("ul",{children:[(0,z.jsxs)("li",{children:[(0,z.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-enlisted",children:"Enlisted:"})," ",(0,z.jsx)("span",{id:"military-target-enlisted",children:(A.enlisted?.value??0).toLocaleString()})]}),(0,z.jsxs)("li",{children:[(0,z.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-soldier",children:"Soldier:"})," ",(0,z.jsx)("span",{id:"military-target-soldier",children:(A.soldier?.value??0).toLocaleString()})]}),(0,z.jsxs)("li",{children:[(0,z.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-veteran",children:"Veteran:"})," ",(0,z.jsx)("span",{id:"military-target-veteran",children:(A.veteran?.value??0).toLocaleString()})]}),(A.ghost?.value??0)>0&&(0,z.jsxs)("li",{children:[(0,z.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-ghost",children:"Ghost:"})," ",(0,z.jsx)("span",{id:"military-target-ghost",children:(A.ghost?.value??0).toLocaleString()})]})]}),e&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{variant:"h5",children:"Troups in this location"}),(0,z.jsxs)("ul",{children:[(S?.value??0)>0&&(0,z.jsxs)("li",{children:[(0,z.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-enlisted",children:"Enlisted:"})," ",(0,z.jsx)("span",{id:"military-target-enlisted",children:(S?.value??0).toLocaleString()})]}),(w?.value??0)>0&&(0,z.jsxs)("li",{children:[(0,z.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-soldier",children:"Soldier:"})," ",(0,z.jsx)("span",{id:"military-target-soldier",children:(w?.value??0).toLocaleString()})]}),(C?.value??0)>0&&(0,z.jsxs)("li",{children:[(0,z.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-veteran",children:"Veteran:"})," ",(0,z.jsx)("span",{id:"military-target-veteran",children:(C?.value??0).toLocaleString()})]}),(P?.value??0)>0&&(0,z.jsxs)("li",{children:[(0,z.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-ghost",children:"Ghost:"})," ",(0,z.jsx)("span",{id:"military-target-ghost",children:(P?.value??0).toLocaleString()})]})]}),(0,z.jsx)(h.Z,{mb:2,component:"h6",variant:"h5",children:"Troops to send"}),(0,z.jsxs)(m.ZP,{container:!0,columns:6,spacing:2,children:[(0,z.jsx)(mt,{name:"enlisted",value:l,onChange:r,max:y?A.enlisted?.value??0:Math.min(A.enlisted?.value??0,(S?.maximum??0)-(S?.value??0))}),(0,z.jsx)(mt,{name:"soldier",value:o,onChange:c,max:y?A.soldier?.value??0:Math.min(A.soldier?.value??0,(w?.maximum??0)-(w?.value??0))}),(0,z.jsx)(mt,{name:"veteran",value:d,onChange:x,max:y?A.veteran?.value??0:Math.min(A.veteran?.value??0,(C?.maximum??0)-(C?.value??0))}),(0,z.jsx)(mt,{name:"ghost",value:u,onChange:g,max:y?A.ghost?.value??0:Math.min(A.ghost?.value??0,(P?.maximum??0)-(P?.value??0))})]}),y&&(0,z.jsx)(k.Z,{onClick:async function(){if(!e)return;const{data:t}=await f({variables:{target:{x:e.location.x,y:e.location.y,map:e.location.map},units:{enlisted:l,soldier:o,veteran:d,ghost:u}}});t?.attackLocation&&(p(!0),t.attackLocation.target.owner===n.id&&s())},children:"Attack target"}),!y&&(0,z.jsx)(k.Z,{onClick:function(){e&&b({variables:{target:{x:e.location.x,y:e.location.y,map:e.location.map},units:{enlisted:l,soldier:o,veteran:d,ghost:u}}})},children:"Move troops"})]})]})}function mt({name:e,onChange:t,value:n,max:i}){return 0===i?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(m.ZP,{item:!0,xs:1,children:(0,z.jsxs)("label",{id:`military-slider-${e}-label`,children:[(0,we.words)(e),":"]})}),(0,z.jsx)(m.ZP,{item:!0,xs:3,children:(0,z.jsx)(P.Z,{fullWidth:!0,children:(0,z.jsx)(rt.ZP,{value:n,onChange:(e,n)=>t(n),min:0,max:i,valueLabelDisplay:"auto",getAriaValueText:e=>e.toLocaleString(),"aria-labelledby":`military-slider-${e}-label`})})}),(0,z.jsx)(m.ZP,{item:!0,xs:2,children:(0,z.jsx)(P.Z,{fullWidth:!0,children:(0,z.jsx)(lt.Z,{value:n,size:"small",onChange:e=>t(""===e.target.value?0:Number(e.target.value)),onBlur:()=>{n<0?t(0):n>i&&t(i)},inputProps:{step:1,min:0,max:i,type:"number","aria-labelledby":"input-slider"}})})})]})}var xt=n(947);function ut({cellSize:e,x:t,y:n,boundingBox:i,onClick:a,adjacentTiles:s}){const l=s.find((e=>e.location.x===t&&e.location.y===n));return l?(0,z.jsx)(tt,{onClick:()=>a(l),hover:!0,cellSize:e,boundingBox:i,location:{x:t,y:n},tooltip:"Attack here",color:"rgb(140, 0, 0)",icon:(0,z.jsx)(xt.Z,{})},`${t}-${n}`):null}const gt={[q.oS.Farm]:(0,z.jsx)(Ye.Z,{}),[q.oS.Shrine]:(0,z.jsx)(He.Z,{}),[q.oS.Apiary]:(0,z.jsx)(Ke.Z,{}),[q.oS.Garrison]:(0,z.jsx)(se.Z,{}),[q.oS.Barracks]:(0,z.jsx)(Xe.Z,{})};function jt({hero:e,onClose:t}){const[n,{loading:a}]=(0,q.j9)(),[s,l]=(0,i.useState)(null),[o,c]=(0,i.useState)(null),[x,u]=(0,i.useState)(null),{data:f,loading:Z,refetch:v}=(0,q.Dp)({pollInterval:6e4}),y=(0,ae.Z)(),S=(0,Re.Z)(y.breakpoints.up("sm")),w=(0,Re.Z)(y.breakpoints.up("md")),C=(0,Re.Z)(y.breakpoints.up("lg")),P=!S&&!w&&!C,A=S&&!w&&!C,$=S&&w&&!C,L=S&&w&&C,[F,I]=(0,i.useState)("info");if((0,i.useEffect)((()=>{!e.home&&t&&t()}),[e.home,t]),!e.home)return null;if(Z)return null;if(!f)return null;const{settlementManager:E}=f,{capital:W,availableBuildings:B,availableUpgrades:G,range:M,adjacentTiles:T}=E,D=W,N=D.connections.find((e=>e.id===o))??T.find((e=>e.id===o))??null,R=function(...e){return e.reduce(((e,t)=>(t.forEach((t=>{let n=e.find((e=>e.name===t.name));n?(n.value=n.value+t.value,(n.maximum||t.maximum)&&(n.maximum=(n.maximum??0)+(t.maximum??0))):e.push({...t})})),e)),[])}(D.resources,...D.connections.map((e=>e.resources))),H=R.find((e=>"population"===e.name))?.value??0,Q=(R.find((e=>"food"===e.name))?.value,(U=[...D.connections,D].map((e=>e.location))).reduce(((e,t)=>(e.min.x=Math.min(e.min.x,t.x),e.min.y=Math.min(e.min.y,t.y),e.max.x=Math.max(e.max.x,t.x),e.max.y=Math.max(e.max.y,t.y),e)),{min:{map:U[0].map,x:127,y:96},max:{map:U[0].map,x:0,y:0}}));var U;const V=Q.max.x-Q.min.x+5,_=Q.max.y-Q.min.y+5;let X=290;P||(A?X=y.breakpoints.values.sm-60:$?X=y.breakpoints.values.md/2-40:L&&(X=y.breakpoints.values.lg/2-80));const ee=8*Math.round(Math.min(X/V,X/_)/8);function te(){l(null)}function ne(e){"destroy"===F?l(e):"info"!==F&&"military"!==F||function(e){c(e?.id??null)}(e)}const ie={};return D.connections.forEach((e=>{e.location.x in ie||(ie[e.location.x]={}),ie[e.location.x][e.location.y]=e})),(0,z.jsxs)(r.Z,{children:[(0,z.jsxs)(J.Z,{open:!!s,onClose:te,"aria-labelledby":"destroy-building-title","aria-describedby":"destroy-building-description",children:[(0,z.jsx)(Y.Z,{id:"destroy-building-title",children:"Destroy Building?"}),(0,z.jsx)(O.Z,{children:s&&(0,z.jsxs)(Le.Z,{id:"destroy-building-description",children:["Are you sure you want to destroy the ",s.type," at"," ",s.location.x,", ",s.location.y,"?"]})}),(0,z.jsxs)(K.Z,{children:[(0,z.jsx)(k.Z,{onClick:te,color:"info",children:"Cancel"}),(0,z.jsx)(Fe.Z,{loading:a,onClick:async function(){if(s)try{await n({variables:{location:{x:s.location.x,y:s.location.y,map:s.location.map}}})}catch(e){}finally{l(null)}},color:"error",children:"Destroy"})]})]}),(0,z.jsx)(g.ZP,{value:F,children:(0,z.jsxs)(m.ZP,{container:!0,columns:6,spacing:1,children:[(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsx)(h.Z,{variant:"h4",children:"Settlement Manager"})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,z.jsxs)(h.Z,{children:[(0,z.jsx)("b",{children:"Capital"}),": ",D.location.x,", ",D.location.y]})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,z.jsxs)(h.Z,{children:[(0,z.jsx)("b",{children:"Map tiles"}),":"," ",(D.connections.length+1).toLocaleString()]})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,z.jsxs)(h.Z,{children:[(0,z.jsx)("b",{children:"Range"}),": ",M.toLocaleString()]})}),[...R].sort(((e,t)=>t.value-e.value)).map((e=>"stone"===e.name||"wood"===e.name||"food"===e.name||"water"===e.name?e.value<2*H?(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,z.jsxs)(h.Z,{color:"error",children:[(0,z.jsx)("b",{children:(0,we.words)(e.name)}),":"," ",e.value.toLocaleString(),e.maximum&&` / ${e.maximum.toLocaleString()}`,D.upkeep[e.name]>0&&`(-${D.upkeep[e.name].toLocaleString()})`]})},e.name):(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:[(0,z.jsx)("b",{children:(0,we.words)(e.name)}),":"," ",e.value.toLocaleString(),e.maximum&&` / ${e.maximum.toLocaleString()}`," ",D.upkeep[e.name]>0&&`(-${D.upkeep[e.name].toLocaleString()})`]},e.name):(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:[(0,z.jsx)("b",{children:(0,we.words)(e.name)}),":"," ",e.value.toLocaleString(),e.maximum&&` / ${e.maximum.toLocaleString()}`]},e.name))),(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsxs)(j.Z,{"aria-label":"navigation tabs",variant:"scrollable",textColor:"secondary",indicatorColor:"secondary",onChange:(e,t)=>{x&&u(null),I(t)},sx:{flexShrink:0,flexGrow:1},children:[(0,z.jsx)(d.Z,{icon:(0,z.jsx)(Ve.Z,{}),label:"Building Details",value:"info",wrapped:!0}),(0,z.jsx)(d.Z,{icon:(0,z.jsx)(Qe.Z,{}),label:"Build Buildings",value:"build",wrapped:!0}),(0,z.jsx)(d.Z,{icon:(0,z.jsx)(Ue.Z,{}),label:"Destroy Buildings",value:"destroy",wrapped:!0}),(0,z.jsx)(d.Z,{icon:(0,z.jsx)(Je.Z,{}),label:"Resource Market",value:"market",wrapped:!0}),(0,z.jsx)(d.Z,{icon:(0,z.jsx)(_e.Z,{}),label:"Military",value:"military",wrapped:!0})]})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,md:3,lg:3,children:(0,z.jsxs)(r.Z,{sx:{position:"relative"},children:[(0,z.jsx)(h.Z,{variant:"h6",style:b.Z,children:"Buildings"}),(0,z.jsx)(be,{location:D.location,minimapSize:[V,_],cellSize:ee,renderCell:({x:e,y:t})=>{let n,i=!1,a=!1;if(ie[e]?.[t]?.type!==q.oS.Garrison&&ie[e-1]?.[t+1]?.type!==q.oS.Garrison&&ie[e+1]?.[t+1]?.type!==q.oS.Garrison&&ie[e-1]?.[t]?.type!==q.oS.Garrison&&ie[e+1]?.[t]?.type!==q.oS.Garrison&&ie[e-1]?.[t-1]?.type!==q.oS.Garrison&&ie[e+1]?.[t-1]?.type!==q.oS.Garrison&&ie[e]?.[t+1]?.type!==q.oS.Garrison&&ie[e]?.[t-1]?.type!==q.oS.Garrison&&ie[e]?.[t+2]?.type!==q.oS.Garrison&&ie[e]?.[t-2]?.type!==q.oS.Garrison&&ie[e+2]?.[t]?.type!==q.oS.Garrison&&ie[e-2]?.[t]?.type!==q.oS.Garrison||(i=!0),ie[e]?.[t]?.type!==q.oS.Barracks&&ie[e-1]?.[t+1]?.type!==q.oS.Barracks&&ie[e+1]?.[t+1]?.type!==q.oS.Barracks&&ie[e-1]?.[t]?.type!==q.oS.Barracks&&ie[e+1]?.[t]?.type!==q.oS.Barracks&&ie[e-1]?.[t-1]?.type!==q.oS.Barracks&&ie[e+1]?.[t-1]?.type!==q.oS.Barracks&&ie[e]?.[t+1]?.type!==q.oS.Barracks&&ie[e]?.[t-1]?.type!==q.oS.Barracks&&ie[e]?.[t+2]?.type!==q.oS.Barracks&&ie[e]?.[t-2]?.type!==q.oS.Barracks&&ie[e+2]?.[t]?.type!==q.oS.Barracks&&ie[e-2]?.[t]?.type!==q.oS.Barracks||(a=!0),i?(n="blue",a&&(n="green")):a&&(n="rgb(180, 200, 0)"),e===D.location.x&&t===D.location.y)return(0,z.jsx)(tt,{onClick:()=>ne({...D,connections:[]}),cellSize:ee,boundingBox:Q,location:D.location,tooltip:"Capital",bgcolor:n,icon:(0,z.jsx)(Oe.Z,{})});if(ie[e]&&ie[e][t]){const i=ie[e][t];return(0,z.jsx)(tt,{hover:"destroy"===F,onClick:()=>ne(i),cellSize:ee,boundingBox:Q,location:i.location,tooltip:i.type,bgcolor:n,icon:gt[i.type]??(0,z.jsx)(He.Z,{})},i.id)}return x?(0,z.jsx)(nt,{x:e,y:t,type:x,cellSize:ee,boundingBox:Q,capital:D,range:M}):"military"===F?(0,z.jsx)(ut,{x:e,y:t,onClick:e=>ne(e),cellSize:ee,boundingBox:Q,adjacentTiles:T}):null}})]})}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,md:3,lg:3,children:[(0,z.jsxs)(p.Z,{value:"build",children:[(0,z.jsx)(h.Z,{variant:"h6",children:"Construct new buildings"}),(0,z.jsx)(h.Z,{variant:"subtitle2",sx:{mb:1},children:"Each building uses a map tile."}),(0,z.jsx)(qe.Z,{alignItems:"start",children:B.map((e=>(0,z.jsxs)(Ce.Z,{sx:{mb:3},children:[(0,z.jsx)(Ae.Z,{title:e.name}),(0,z.jsxs)($e.Z,{children:[(0,z.jsx)(h.Z,{sx:{mb:1},children:e.description}),(0,z.jsx)(h.Z,{variant:"h6",children:"Cost to build"}),(0,z.jsx)("ul",{style:{margin:2},children:e.cost.map((e=>(0,z.jsx)(i.Fragment,{children:(0,z.jsxs)("li",{children:[(0,z.jsxs)("label",{style:{fontWeight:"bold"},htmlFor:`cost-value-${e.name}`,children:[(0,we.words)(e.name),":"]})," ",(0,z.jsx)("span",{id:`cost-value-${e.name}`,children:e.value.toLocaleString()})]})},e.name)))})]}),(0,z.jsx)(Pe.Z,{children:(0,z.jsx)(k.Z,{onClick:()=>u(e.type),variant:"contained",color:"success",children:"Build Building"},e.type)})]},e.name)))})]}),(0,z.jsx)(p.Z,{value:"destroy",children:"Click on a location to demolish the building there. You will get nothing back, and this cannot be undone."}),(0,z.jsx)(p.Z,{value:"market",children:(0,z.jsx)(Be,{hero:e,camp:D,onBuyResource:function(){v()}})}),(0,z.jsxs)(p.Z,{value:"info",children:[(0,z.jsx)(h.Z,{variant:"h5",children:"Building Details"}),!N&&(0,z.jsx)(h.Z,{variant:"body1",children:"Select a building from the map on the left to see details about it here."}),N&&(0,z.jsx)(it,{location:N,hero:e,onDestroy:l}),!N&&(0,z.jsx)(it,{location:D,hero:e,onDestroy:l})]}),(0,z.jsx)(p.Z,{value:"military",children:(0,z.jsx)(ht,{location:N,capital:D,resources:R,hero:e,refetch:v})})]})]})})]})}const pt={"random-aberration-unholy-paladin":"The darkness here isn't natural","random-aberration-thornbrute":"The overgrowth here is hostile and deadly","domari-aberration-1":"The ash in the air is so thick you can barely breathe","random-aberration-moving-mountain":"The ground itself threatens you","random-aberration-artificer":"Ancient machinery whirs and clicks around you, filling the air with an otherworldly hum"};function bt(){const e=B(),[t,n]=(0,i.useState)(!1),[a,s]=(0,i.useState)(-1),[l,r]=(0,i.useState)(-1),[c,d]=(0,te.gZ)(),[x,{loading:u}]=(0,q.gK)(),[g,{loading:j}]=(0,q.Q8)(),{data:p,refetch:b}=(0,q.Of)(),f=p?.monsters?.map?.((e=>pt[e.monster.id]??""))??[],Z=ne(),v=ie(),y=function(){const e=ne()?.playerLocations||[];return e.length?e[0]:null}(),S=Z?.neighborTerrain.north?Z.neighborTerrain.north.terrain:"blocked",w=Z?.neighborTerrain.south?Z.neighborTerrain.south.terrain:"blocked",C=Z?.neighborTerrain.east?Z.neighborTerrain.east.terrain:"blocked",P=Z?.neighborTerrain.west?Z.neighborTerrain.west.terrain:"blocked";if((0,i.useEffect)((()=>{e&&(s(e.location.x),r(e.location.y))}),[e]),!e)return null;if(t)return(0,z.jsx)(jt,{hero:e});const A=u||0===e.combat.health||c>0||j;async function $(e){try{await x({variables:{direction:e}}),b()}catch(t){t.graphQLErrors&&t.graphQLErrors[0]?.extensions?.delay&&d(t.graphQLErrors[0].extensions.remaining)}}function L(e,t){let n=Number(e),i=Number(t);!isNaN(n)&&!isNaN(i)&&Number.isFinite(n)&&Number.isFinite(i)&&(i=Math.min(95,Math.max(0,Math.round(i))),n=Math.min(127,Math.max(0,Math.round(n))),n!==a&&s(n),i!==l&&r(i))}const F=Math.round(Math.pow(5*(0,G.LW)(e.location,{x:a,y:l}),1.3));return(0,z.jsx)(i.Fragment,{children:(0,z.jsxs)(m.ZP,{container:!0,columns:2,spacing:3,children:[(0,z.jsx)(m.ZP,{item:!0,xs:2,sm:1,children:(0,z.jsxs)(m.ZP,{container:!0,columns:6,spacing:3,children:[(0,z.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:(0,z.jsx)(Ge,{hero:e,onShowSettlement:function(){n(!0)}})}),(0,z.jsxs)(m.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:[(0,z.jsx)(h.Z,{variant:"h3",children:"Travel"}),e.combat.health>0&&(0,z.jsx)(h.Z,{children:"Use buttons to move around the map."}),0===e.combat.health&&(0,z.jsx)(h.Z,{component:"p",variant:"h6",children:"You cannot move while dead. Heal yourself in the Combat tab."})]}),(0,z.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,z.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,z.jsx)(k.Z,{"aria-label":`North terrain: ${S}`,disabled:A,variant:"contained",onClick:()=>$(q.p$.North),children:"North"})}),(0,z.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,z.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,z.jsx)(k.Z,{"aria-label":`West terrain: ${P}`,disabled:A,variant:"contained",onClick:()=>$(q.p$.West),children:"West"})}),(0,z.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,z.jsxs)(h.Z,{children:[e.location.x,", ",e.location.y]})}),(0,z.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,z.jsx)(k.Z,{"aria-label":`East terrain: ${C}`,disabled:A,variant:"contained",onClick:()=>$(q.p$.East),children:"East"})}),(0,z.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,z.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,z.jsx)(k.Z,{"aria-label":`South terrain: ${w}`,disabled:A,variant:"contained",onClick:()=>$(q.p$.South),children:"South"})}),(0,z.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2}),e.stats.intelligence>100&&(0,z.jsxs)(m.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:[(0,z.jsx)(o.Z,{}),(0,z.jsx)(h.Z,{variant:"h5",component:"h3",color:"secondary",sx:{margin:1},children:"Teleport"}),(0,z.jsx)(D.Z,{label:"X coordinate",value:a,onChange:e=>L(e.target.value,l),sx:{width:"100px",margin:1}}),(0,z.jsx)(D.Z,{label:"Y coordinate",value:l,onChange:e=>L(a,e.target.value),sx:{width:"100px",margin:1}}),(0,z.jsx)("br",{}),(0,z.jsxs)(k.Z,{color:"secondary",variant:"outlined",onClick:async function(){try{await g({variables:{x:a,y:l}}),b()}catch(e){e.graphQLErrors&&e.graphQLErrors[0]?.extensions?.delay&&d(e.graphQLErrors[0].extensions.remaining)}},disabled:0===F||F>e.stats.intelligence||A,children:["Teleport",(0,z.jsx)("br",{}),F>0&&`${F.toLocaleString()} minimum intelligence`]})]})]})}),(0,z.jsxs)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,sm:1,children:[v&&(0,z.jsx)(h.Z,{variant:"h6",component:"h4",children:v.name}),v&&(0,z.jsx)(h.Z,{variant:"subtitle2",component:"p",children:v.type}),y&&(0,z.jsxs)(i.Fragment,{children:[(0,z.jsxs)(h.Z,{variant:"h6",component:"h4",children:[y.publicOwner?.name??"???","'s Settlement"]}),(0,z.jsx)(h.Z,{variant:"subtitle2",component:"p",children:y.type})]}),!v&&!y&&Z&&(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(h.Z,{variant:"h6",component:"h4",children:"Wilderness"}),(0,z.jsx)(h.Z,{variant:"subtitle2",component:"p",children:Z.terrain.terrain})]}),!v&&!y&&!Z&&(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(h.Z,{variant:"h6",component:"h4",children:"\xa0"}),(0,z.jsx)(h.Z,{variant:"subtitle2",component:"p",children:"loading..."})]}),(0,z.jsx)(be,{location:e.location,renderCell:({x:t,y:n})=>e.location.x===t&&e.location.y===n?(0,z.jsx)("div",{style:{borderRadius:"4px",backgroundColor:"red",border:"2px solid rgba(255,255,255,0.3)",width:"8px",height:"8px",margin:"auto"}}):null}),v?.description&&v.description.map(((e,t)=>(0,z.jsx)(h.Z,{component:"h4",variant:"body1",children:e},`loc-desc-${t}`))),f.filter((e=>!!e)).map((e=>(0,z.jsx)(h.Z,{component:"h4",variant:"body1",children:e},e)))]}),"dock"===v?.type&&(0,z.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,z.jsx)(fe,{location:v})}),Z?.shop&&(0,z.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,z.jsx)(ve,{shop:Z?.shop})})]})})}var ft=n(5582);function Zt(){const[e,t]=(0,te.gZ)();let[n,a]=(0,i.useState)(1);const[s,{loading:l}]=(0,q.Y4)(),c=B();c?.attributePoints&&(n=Math.min(n,c.attributePoints));const d=`Spending ${n.toLocaleString()} attribute points`;async function x(e){console.log("Leveling up...",e);try{await s({variables:{attribute:q.GC[e],amount:n}})}catch(i){i.graphQLErrors&&i.graphQLErrors[0]?.extensions?.delay&&t(i.graphQLErrors[0].extensions.remaining)}}return(0,z.jsxs)(i.Fragment,{children:[(0,z.jsxs)(r.Z,{sx:{backgroundColor:"secondary.light"},children:[(0,z.jsx)("br",{}),(0,z.jsx)(h.Z,{variant:"h5",align:"center",children:"You have leveled up!"}),(0,z.jsxs)(ft.Z,{children:[(0,z.jsx)(h.Z,{align:"center",children:"Each of your attributes increases by 1 when you level up. You may also choose an attribute to further increase."}),(0,z.jsx)(r.Z,{sx:{textAlign:"center",align:"center",ml:1,mr:1},children:c&&c.attributePoints>2&&(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(h.Z,{id:"level-up-stat-slider-label",children:d}),(0,z.jsx)(rt.ZP,{min:1,max:c.attributePoints,value:n,onChange:(e,t)=>!Array.isArray(t)&&a(t),id:"level-up-stat-slider","aria-labelledby":"level-up-stat-slider-label",valueLabelDisplay:"auto"})]})})]}),(0,z.jsx)("br",{}),(0,z.jsxs)(m.ZP,{container:!0,columns:14,spacing:2,children:[(0,z.jsx)(L.Z,{title:"Strength determines your damage when attacking with melee weapons",children:(0,z.jsx)(m.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,z.jsx)(h.Z,{align:"center",children:(0,z.jsx)(k.Z,{id:"level-up-strength",disabled:l||e>0,onClick:()=>x("Strength"),variant:"contained",children:"Strength"})})})}),(0,z.jsx)(L.Z,{title:"Dexterity determines the accuracy and dodge rate for melee and ranged weapons, it also determines ranged weapons damage",children:(0,z.jsx)(m.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,z.jsx)(h.Z,{align:"center",children:(0,z.jsx)(k.Z,{id:"level-up-dexterity",disabled:l||e>0,onClick:()=>x("Dexterity"),variant:"contained",children:"Dexterity"})})})}),(0,z.jsx)(L.Z,{title:"Constitution determines your max health, and is used in both attacking and defending blood magic",children:(0,z.jsx)(m.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,z.jsx)(h.Z,{align:"center",children:(0,z.jsx)(k.Z,{id:"level-up-constitution",disabled:l||e>0,onClick:()=>x("Constitution"),variant:"contained",children:"Constitution"})})})}),(0,z.jsx)(L.Z,{title:"Intelligence determines your spellcasting damage",children:(0,z.jsx)(m.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,z.jsx)(h.Z,{align:"center",children:(0,z.jsx)(k.Z,{id:"level-up-intelligence",disabled:l||e>0,onClick:()=>x("Intelligence"),variant:"contained",children:"Intelligence"})})})}),(0,z.jsx)(L.Z,{title:"Wisdom is your accuracy and dodge stat for spellcasting and smiting",children:(0,z.jsx)(m.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,z.jsx)(h.Z,{align:"center",children:(0,z.jsx)(k.Z,{id:"level-up-wisdom",disabled:l||e>0,onClick:()=>x("Wisdom"),variant:"contained",children:"Wisdom"})})})}),(0,z.jsx)(L.Z,{title:"Willpower helps you survive attacks by reducing damage, it also helps smiters deal deal more damage.",children:(0,z.jsx)(m.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,z.jsx)(h.Z,{align:"center",children:(0,z.jsx)(k.Z,{id:"level-up-willpower",disabled:l||e>0,onClick:()=>x("Willpower"),variant:"contained",children:"Willpower"})})})}),(0,z.jsx)(L.Z,{title:"Luck helps you critically strike foes and also affects item drop rates",children:(0,z.jsx)(m.ZP,{item:!0,xs:14,md:12,lg:2,children:(0,z.jsx)(h.Z,{align:"center",children:(0,z.jsx)(k.Z,{id:"level-up-luck",disabled:l||e>0,onClick:()=>x("Luck"),variant:"contained",children:"Luck"})})})}),(0,z.jsx)(L.Z,{title:"Places 1 in every stat for a more well rounded character",children:(0,z.jsx)(m.ZP,{item:!0,xs:14,md:12,lg:2,children:(0,z.jsx)(h.Z,{align:"center",children:(0,z.jsx)(k.Z,{id:"level-up-all",disabled:l||e>0,onClick:()=>x("All"),variant:"contained",children:"All"})})})})]}),(0,z.jsx)("br",{}),(0,z.jsx)("br",{}),(0,z.jsx)("br",{})]}),(0,z.jsx)(o.Z,{})]})}const vt={[q.$7.MeleeWeapon]:"Melee Weapon",[q.$7.RangedWeapon]:"Ranged Weapon",[q.$7.SpellFocus]:"Spell Focus",[q.$7.Shield]:"Shield",[q.$7.BodyArmor]:"Body Armor",[q.$7.HandArmor]:"Gauntlets",[q.$7.LegArmor]:"Leggings",[q.$7.HeadArmor]:"Helmet",[q.$7.FootArmor]:"Greaves"};function yt(e){return vt[e]??(0,G.qh)(e)}function St({value:e,onChange:t,sellables:n}){const a=B();if(!a)return null;function s(e){const t="string"===typeof e?e:e.baseItem,i=n.find((e=>e.id===t));return i&&i.cost?{...i,cost:Math.round(i.cost/3)}:null}const l=a.inventory.filter((e=>!e.enchantment)).filter((e=>e.type!==q.$7.Quest)).sort(((e,t)=>e.level-t.level)),r="Sell non-enchanted gear";return(0,z.jsx)(i.Fragment,{children:(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(A.Z,{id:"sell-shop-select-label",children:r}),(0,z.jsx)(M.Z,{id:"sell-shop-select",labelId:"sell-shop-select-label",value:e||"",label:r,onChange:e=>{const n=e.target.value,i=a.inventory.find((e=>e.id===n));if(!i)return;const l=s(i);l&&l.cost&&t&&t({id:n,name:(0,G.GJ)(i),cost:l.cost})},children:l.map((e=>{const t=s(e);return(0,z.jsxs)(T.Z,{value:e.id,disabled:!t||!!e.enchantment||(0,G.mQ)(a,e),children:[t?.cost&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{display:"inline-block",children:(0,G.GJ)(e)}),"\xa0",(0,z.jsxs)(h.Z,{variant:"caption",display:"inline-block",children:["Lvl. ",e.level]}),"\xa0",(0,z.jsxs)(h.Z,{variant:"subtitle2",display:"inline-block",sx:{color:"info.main"},children:[t.cost.toLocaleString()," Gold"]})]}),!t?.cost&&e.name," ",(0,G.mQ)(a,e)&&"*EQUIPPED*"]},e.id)}))})]})})}function kt({type:e,items:t,value:n,onChange:i}){const a=B(),s=`${yt(e)} Shop`;return a?(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(A.Z,{id:`${e}-shop-select-label`,children:s}),(0,z.jsx)(M.Z,{id:`${e}-shop-select`,labelId:`${e}-shop-select-label`,value:n||"",label:s,onChange:e=>{const n=e.target.value,a=t.find((e=>e.id===n));i&&a&&a.cost&&i({id:n,name:a.name,cost:a.cost})},children:t.map((e=>e.id!==e.alias?null:(0,z.jsxs)(T.Z,{value:e.id,disabled:!e.cost||e.cost>a.gold,children:[e.cost&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{display:"inline-block",children:e.name}),"\xa0",(0,z.jsxs)(h.Z,{variant:"caption",display:"inline-block",children:["Lvl. ",e.level]}),"\xa0",(0,z.jsxs)(h.Z,{variant:"subtitle2",display:"inline-block",sx:{color:"info.main"},children:[e.cost.toLocaleString()," Gold"]})]}),!e.cost&&e.name]},e.id)))})]}):null}function wt(){const[e]=(0,te.gZ)(),[t,n]=(0,i.useState)(null),[a,s]=(0,i.useState)(""),{data:l,loading:r,error:c}=(0,q.Cb)(),[d,{loading:x}]=(0,q.Nn)(),[u,{loading:g}]=(0,q.o_)(),j=g||x||e>0;const p="Choose which shop to visit";return(0,z.jsxs)(i.Fragment,{children:[(0,z.jsxs)(h.Z,{align:"center",children:["Welcome to the shop! You can buy and sell any non-enchanted items here.",(0,z.jsx)("br",{}),"The items purchasable here have a level from 1 to 32 but no enchantments or direct attribute increases."]}),(0,z.jsx)("br",{}),(0,z.jsx)(o.Z,{}),(0,z.jsx)("br",{}),(0,z.jsxs)(m.ZP,{container:!0,columns:6,spacing:2,children:[(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(A.Z,{id:"shop-type-select-label",children:p}),(0,z.jsxs)(M.Z,{id:"shop-type-select",labelId:"shop-type-select-label",label:p,onChange:e=>{s(e.target.value),n(null)},children:[(0,z.jsx)(T.Z,{value:"sell",children:"Sell Items"}),(0,z.jsx)(o.Z,{}),(0,z.jsxs)(T.Z,{value:q.$7.MeleeWeapon,children:[yt(q.$7.MeleeWeapon)," Shop"]}),(0,z.jsxs)(T.Z,{value:q.$7.RangedWeapon,children:[yt(q.$7.RangedWeapon)," Shop"]}),(0,z.jsxs)(T.Z,{value:q.$7.SpellFocus,children:[yt(q.$7.SpellFocus)," Shop"]}),(0,z.jsxs)(T.Z,{value:q.$7.Shield,children:[yt(q.$7.Shield)," Shop"]}),(0,z.jsxs)(T.Z,{value:q.$7.BodyArmor,children:[yt(q.$7.BodyArmor)," Shop"]}),(0,z.jsxs)(T.Z,{value:q.$7.HandArmor,children:[yt(q.$7.HandArmor)," Shop"]}),(0,z.jsxs)(T.Z,{value:q.$7.LegArmor,children:[yt(q.$7.LegArmor)," Shop"]}),(0,z.jsxs)(T.Z,{value:q.$7.HeadArmor,children:[yt(q.$7.HeadArmor)," Shop"]}),(0,z.jsxs)(T.Z,{value:q.$7.FootArmor,children:[yt(q.$7.FootArmor)," Shop"]})]})]})}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,children:[""!==a&&"sell"!==a&&(0,z.jsx)(kt,{value:t?t.id:"",type:a,items:(b=a,l?.shopItems?.length?l.shopItems.filter((e=>e.type===b)):[]),onChange:e=>n(e)},a),"sell"===a&&(0,z.jsx)(St,{value:t?t.id:"",sellables:l?.shopItems??[],onChange:e=>n(e)})]}),(0,z.jsx)(m.ZP,{item:!0,xs:6,children:t&&(0,z.jsxs)(k.Z,{variant:"contained",color:"sell"===a?"error":"success",fullWidth:!0,disabled:j,onClick:"sell"===a?async function(){if(t)try{n(null),await u({variables:{item:t.id}})}catch(e){}}:async function(){if(t)try{n(null),await d({variables:{baseItem:t.id}})}catch(e){}},children:["sell"===a?"Sell":"Buy"," ",t.name," for"," ",t.cost.toLocaleString()," gold"]})})]}),(0,z.jsx)("br",{})]});var b}function Ct(){B();const e=ne();ie();return(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(h.Z,{variant:"h3",sx:{textAlign:"center"},children:"Item Shop"}),(0,z.jsx)(wt,{}),e?.shop&&(0,z.jsx)(ve,{shop:e?.shop})]})}function Pt({hero:e,disabled:t}){const[n,{loading:a}]=(0,q.Nw)(),s=e.level>=e.levelCap;return(0,z.jsxs)(r.Z,{sx:{padding:1,margin:1},children:[(0,z.jsx)(h.Z,{color:"secondary",variant:"h2",children:"Rebirth"}),!s&&(0,z.jsx)(h.Z,{children:"You may only be reborn when you are at level cap. Keep leveling up your character in order to be reborn!"}),s&&(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(h.Z,{children:"This will reset your character's level and attributes, however you will keep all gold and items and will receive special bonuses depending on your current level cap."}),(0,z.jsx)("br",{}),(0,z.jsx)(k.Z,{size:"large",variant:"outlined",color:"secondary",onClick:async function(){try{await n()}catch(e){console.log(e)}},"data-testid":"rebirth-button",children:"Reset Character to Level 1"})]})]})}var At=n(5988),$t=n(9629);function Lt({hero:e,disabled:t}){let[n,a]=(0,i.useState)(""),[s,l]=(0,i.useState)("");const r=!!e.inventory.find((e=>(0,G.kJ)(e.baseItem))),[o,{loading:c}]=(0,q.Pw)(),d=e.inventory.filter((t=>t.type!==q.$7.Quest&&(!(0,G.mQ)(e,t)&&!!t.enchantment))),m=d.filter((e=>""===s||e.enchantment===s)).sort(G.v4),x=d.filter((t=>!(0,G.mQ)(e,t))).map((e=>e.enchantment)).reduce(((e,t)=>t?(e.indexOf(t)<0&&e.push(t),e):e),[]),u="Select item to destroy";let g=m.find((e=>e.id===n));return!g&&n.length&&(m.length?(g=m[0],n=g.id):n=""),(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(h.Z,{variant:"body1",children:"Select an enchanted item you would like to destroy, smashing it with the crafting hammer into fine Enchanting Dust."}),(0,z.jsx)("br",{}),(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(A.Z,{id:"destroy-select-label",children:u}),(0,z.jsx)(M.Z,{id:"destroy-select",labelId:"destroy-select-label",value:n||"",label:u,onChange:t=>{const n=t.target.value;e.inventory.find((e=>e.id===n))&&a(n)},children:m.map((t=>(0,z.jsxs)(T.Z,{value:t.id,disabled:(0,G.mQ)(e,t),children:[(0,G.GJ)(t)," ",(0,G.mQ)(e,t)&&"*EQUIPPED*",t.enchantment&&(0,z.jsxs)(h.Z,{variant:"subtitle2",sx:{color:"info.main"},children:["\xa0",(0,G.Lt)(t.enchantment)]})]},t.id)))}),(0,z.jsxs)(k.Z,{variant:"contained",disabled:!g||t||c,color:"error",onClick:async function(){try{await o({variables:{item:n}})}catch(e){}},children:[g&&(0,z.jsxs)(i.Fragment,{children:["Destroy ",(0,G.GJ)(g)]}),!g&&"Select Item"]})]}),(0,z.jsx)("br",{}),(0,z.jsx)("br",{}),r&&(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(A.Z,{id:"filter-select-label",children:"Filter by enchantment"}),(0,z.jsx)(M.Z,{id:"filter-select",labelId:"filter-select-label",value:s||"",label:"Filter by enchantment",onChange:t=>{const n=t.target.value;e.inventory.find((e=>e.enchantment===n))&&l(n)},children:x.map((e=>(0,z.jsxs)(T.Z,{value:e,children:[(0,G.uD)(e),"???"!==(0,G.Lt)(e)&&(0,z.jsxs)(h.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:["\xa0",(0,G.Lt)(e)]})]},e)))})]})]})}function Ft({hero:e,disabled:t}){let[n,a]=(0,i.useState)(""),[s,l]=(0,i.useState)("");const[o,{loading:c}]=(0,q.mE)(),d=e.inventory.filter((e=>e.type!==q.$7.Quest&&!e.enchantment)).sort(G.v4),m={},x=[...e.enchantments].sort().filter((e=>m[e]?(m[e]=(m[e]??0)+1,!1):(m[e]=1,!0)));let u=d.find((e=>e.id===n));!u&&n.length&&(d.length?(u=d[0],n=u.id):n="");let g=x.find((e=>e===s));!g&&s.length&&(x.length?(g=x[0],s=g):s="");const j=u?u.level:0,p="Select base item",b="Select an enchantment";return(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(h.Z,{variant:"body1",children:"Enchanting allows you to combine a pure item and pure enchantment into a new enchanted item! You can acquire pure enchantments through disenchanting items."}),(0,z.jsx)("br",{}),(0,z.jsxs)(P.Z,{fullWidth:!0,sx:{margin:1},children:[(0,z.jsx)(A.Z,{id:"enchant-baseItem-select-label",children:p}),(0,z.jsx)(M.Z,{id:"enchant-baseItem-select",labelId:"enchant-baseItem-select-label",value:n||"",label:p,onChange:t=>{const n=t.target.value;e.inventory.find((e=>e.id===n))&&a(n)},children:d.map((t=>(0,z.jsxs)(T.Z,{value:t.id,children:[(0,G.GJ)(t),(0,G.mQ)(e,t)&&"*EQUIPPED*"]},t.id)))})]}),(0,z.jsxs)(P.Z,{fullWidth:!0,sx:{margin:1},children:[(0,z.jsx)(A.Z,{id:"enchant-enchantment-select-label",children:b}),(0,z.jsx)(M.Z,{id:"enchant-enchantment-select",labelId:"enchant-enchantment-select-label",value:s||"",label:b,onChange:e=>{const t=e.target.value,n=x.find((e=>t===e));n&&l(n)},children:x.map((e=>(0,z.jsxs)(T.Z,{value:e,children:[(0,G.uD)(e)," ",m[e]&&m[e]>1&&`(${m[e]})`,"???"!==(0,G.Lt)(e)&&(0,z.jsxs)(h.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:["\xa0",(0,G.Lt)(e)]})]},e)))})]}),(0,z.jsxs)(k.Z,{fullWidth:!0,variant:"contained",disabled:!u||t||c||j>e.enchantingDust,color:"success",onClick:async function(){if(""!==s)try{await o({variables:{item:n,enchantment:s}})}catch(e){}},children:[u&&""!==s&&(0,z.jsxs)(r.Z,{children:[(0,z.jsxs)(h.Z,{children:["Create ",(0,z.jsx)("b",{children:(0,G.GJ)(u,s)})]}),(0,z.jsxs)(h.Z,{variant:"subtitle2",children:["Costs ",j.toLocaleString()," Enchantment Dust"]})]}),!u&&"Select Item"]})]})}function It({hero:e,disabled:t}){let[n,a]=(0,i.useState)(""),[s,l]=(0,i.useState)("");const o=!!e.inventory.find((e=>(0,G.kJ)(e.baseItem))),[c,{loading:d}]=(0,q.dg)(),m=e.inventory.filter((t=>t.type!==q.$7.Quest&&(!(0,G.mQ)(e,t)&&!!t.enchantment))),x=m.filter((e=>""===n||e.enchantment===n)).sort(G.v4),u=m.filter((t=>!(0,G.mQ)(e,t))).map((e=>e.enchantment)).reduce(((e,t)=>t?(e.indexOf(t)<0&&e.push(t),e):e),[]);let g=x.find((e=>e.id===s));!g&&s.length&&(x.length?(g=x[0],s=g.id):s="");const j="Select item to disenchant",p=g?g.level:0;return(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(h.Z,{variant:"body1",children:"Select an item to split from its enchantment. You will keep both the base item and the enchantment itself for use in further crafting."}),(0,z.jsx)("br",{}),(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(A.Z,{id:"disenchant-select-label",children:j}),(0,z.jsx)(M.Z,{id:"disenchant-select",labelId:"disenchant-select-label",value:s||"",label:j,onChange:t=>{const n=t.target.value;e.inventory.find((e=>e.id===n))&&l(n)},children:x.map((t=>(0,z.jsxs)(T.Z,{value:t.id,disabled:(0,G.mQ)(e,t),children:[(0,G.GJ)(t)," ",(0,G.mQ)(e,t)&&"*EQUIPPED*",t.enchantment&&(0,z.jsxs)(h.Z,{variant:"subtitle2",sx:{color:"info.main"},children:["\xa0",(0,G.Lt)(t.enchantment)]})]},t.id)))}),(0,z.jsxs)(k.Z,{variant:"contained",disabled:!g||t||d||p>e.enchantingDust,color:"error",onClick:async function(){try{await c({variables:{item:s}})}catch(e){}},children:[g&&(0,z.jsxs)(r.Z,{children:[(0,z.jsxs)(h.Z,{children:["Disenchant ",(0,z.jsx)("b",{children:(0,G.GJ)(g)})]}),(0,z.jsxs)(h.Z,{variant:"subtitle2",children:["Costs ",p.toLocaleString()," Enchantment Dust"]})]}),!g&&"Select Item"]})]}),(0,z.jsx)("br",{}),(0,z.jsx)("br",{}),o&&(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(A.Z,{id:"filter-select-label",children:"Filter by enchantment"}),(0,z.jsx)(M.Z,{id:"filter-select",labelId:"filter-select-label",value:n||"",label:"Filter by enchantment",onChange:t=>{const n=t.target.value;e.inventory.find((e=>e.enchantment===n))&&a(n)},children:u.map((e=>(0,z.jsxs)(T.Z,{value:e,children:[(0,G.uD)(e),"???"!==(0,G.Lt)(e)&&(0,z.jsxs)(h.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:["\xa0",(0,G.Lt)(e)]})]},e)))})]})]})}var Et=n(3457),Wt=n(480),qt=n(9368);function Bt({hero:e,disabled:t}){let[n,a]=(0,i.useState)("");const[s,l]=(0,i.useState)([]),[r,{loading:o}]=(0,q.Xe)(),c=e.inventory.filter((e=>e.type!==q.$7.Quest&&(!e.enchantment&&e.level>31))).sort(G.v4);let d=c.find((e=>e.id===n));!d&&n.length&&(c.length?(d=c[0],n=d.id):n="");const m="Select base item",x=e.equipment.artifact;if(!x)return(0,z.jsx)(z.Fragment,{children:(0,z.jsx)(h.Z,{children:"You must have an artifact to imbue items with."})});const u=(0,G.Vy)(x);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{children:"Imbueing an item adds parts of an artifact onto a base item. Items can only be imbued once, and there is no way to remove the imbue. You may enchant an imbued item, however only unenchanted items can receive an imbue."}),(0,z.jsx)("br",{}),(0,z.jsxs)(P.Z,{fullWidth:!0,sx:{margin:1},children:[(0,z.jsx)(A.Z,{id:"enchant-baseItem-select-label",children:m}),(0,z.jsx)(M.Z,{id:"enchant-baseItem-select",labelId:"enchant-baseItem-select-label",value:n||"",label:m,onChange:t=>{const n=t.target.value;e.inventory.find((e=>e.id===n))&&a(n)},children:c.map((t=>(0,z.jsxs)(T.Z,{value:t.id,children:[(0,G.GJ)(t),(0,G.mQ)(e,t)&&"*EQUIPPED*"]},t.id)))})]}),d&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(h.Z,{variant:"h5",children:[d.name," to be imbued with"," ",(0,z.jsx)("strong",{children:x.name})]}),(0,z.jsx)(h.Z,{variant:"subtitle1",children:"Select up to three affixes to activate on the item, each affix increases dust cost dramatically. The remaining affixes will be selected randomly from the remaining affixes."}),(0,z.jsx)(Et.Z,{children:u.map((e=>(0,z.jsx)(Wt.Z,{control:(0,z.jsx)(qt.Z,{disabled:s.length>=3&&!s.includes(e.type),onChange:t=>{const n=s.filter((t=>t!==e.type));t.target.checked&&n.push(e.type),l(n)}}),label:(0,G.xq)(e)},e.type)))})]}),(0,z.jsx)(Fe.Z,{variant:"contained",disabled:t||!d||0===s.length,loading:t,onClick:async()=>{!t&&d&&0!==s.length&&await r({variables:{item:d.id,artifact:x.id,affixes:s}})},children:"Imbue item"})]})}function Gt({hero:e,disabled:t}){const[n,a]=(0,i.useState)("1"),s=e.inventory.some((e=>"pure-essence"===e.baseItem)),l=e.inventory.some((e=>"essence-of-void"===e.baseItem)),c=s&&l&&null!==e.equipment.artifact;return(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(o.Z,{sx:{margin:2}}),(0,z.jsx)(h.Z,{variant:"h2",component:"h4",color:"secondary",children:"Crafting"}),(0,z.jsxs)(h.Z,{variant:"subtitle1",color:"secondary",children:["Enchanting Dust:"," ",(0,z.jsx)("span",{id:"hero-stats-enchanting-dust",children:e.enchantingDust.toLocaleString()})]}),(0,z.jsxs)(h.Z,{variant:"subtitle1",color:"secondary",children:["Enchantments:"," ",(0,z.jsx)("span",{id:"hero-stats-enchantments",children:e.enchantments.length.toLocaleString()})]}),(0,z.jsx)("br",{}),(0,z.jsx)(g.ZP,{value:n,children:(0,z.jsxs)(r.Z,{sx:{flexGrow:1,borderBottom:1,borderColor:"divider",display:"flex"},children:[(0,z.jsxs)(j.Z,{orientation:"vertical",onChange:(e,t)=>a(t),"aria-label":"navigation tabs",variant:"scrollable",textColor:"secondary",indicatorColor:"secondary",sx:{flexShrink:0,flexGrow:0,width:"100px"},children:[(0,z.jsx)(d.Z,{icon:(0,z.jsx)(Ue.Z,{}),label:"Destroy",value:"1"}),(0,z.jsx)(d.Z,{icon:(0,z.jsx)($t.Z,{}),label:"Disenchant",value:"2"}),(0,z.jsx)(d.Z,{icon:(0,z.jsx)(At.Z,{}),label:"Enchant",value:"3"}),c&&(0,z.jsx)(d.Z,{icon:(0,z.jsx)(At.Z,{}),label:"Imbue",value:"4"})]}),(0,z.jsxs)(p.Z,{value:"1",children:[(0,z.jsx)(h.Z,{variant:"h5",sx:b.Z,children:"Destroy Items"}),(0,z.jsx)(Lt,{hero:e,disabled:t})]}),(0,z.jsxs)(p.Z,{value:"2",children:[(0,z.jsx)(h.Z,{variant:"h5",sx:b.Z,children:"Disenchant Items"}),(0,z.jsx)(It,{hero:e,disabled:t})]}),(0,z.jsxs)(p.Z,{value:"3",children:[(0,z.jsx)(h.Z,{variant:"h5",sx:b.Z,children:"Enchant Items"}),(0,z.jsx)(Ft,{hero:e,disabled:t})]}),c&&(0,z.jsxs)(p.Z,{value:"4",children:[(0,z.jsx)(h.Z,{variant:"h5",sx:b.Z,children:"Imbue Items"}),(0,z.jsx)(Bt,{hero:e,disabled:t})]})]})})]})}function Mt({hero:e,disabled:t}){const n=ne()?.voidTravel??!1,[i]=(0,q.Rz)();return(0,z.jsxs)(r.Z,{sx:{padding:1,margin:1},children:[(0,z.jsx)(h.Z,{color:"secondary",variant:"h2",children:"Void Travel"}),(0,z.jsx)(h.Z,{sx:{mb:2},children:"Void dimensions have different rules than the overworld. While each void world which you visit may varry in mechanics, there is one common rule: Death in a void world results in immediate overworld rebirth."}),!n&&(0,z.jsx)(k.Z,{disabled:!0,size:"large",variant:"outlined",color:"error",children:"You must be near a void conduit"}),n&&(0,z.jsx)(k.Z,{size:"large",variant:"outlined",color:"secondary",onClick:()=>i(),children:"Travel to the void"})]})}function Tt({hero:e,slot:t,label:n,onEquip:a,disabled:s}){const l=e.equipment[t]?.id,r=["leftHand","rightHand","bodyArmor","handArmor","legArmor","headArmor","footArmor"].filter((n=>e.equipment[n]&&n!==t)).map((t=>e.equipment[t]?.id)),[o,c]=(0,i.useState)(l||""),d=e.inventory.filter((e=>function(e,t){switch(e){case"rightHand":case"leftHand":return t.type===q.$7.MeleeWeapon||t.type===q.$7.RangedWeapon||t.type===q.$7.Shield||t.type===q.$7.SpellFocus;case"bodyArmor":return t.type===q.$7.BodyArmor;case"handArmor":return t.type===q.$7.HandArmor;case"legArmor":return t.type===q.$7.LegArmor;case"headArmor":return t.type===q.$7.HeadArmor;case"footArmor":return t.type===q.$7.FootArmor;default:return!1}}(t,e))).sort(G.v4),m={};d.forEach((e=>{const t=(0,G.GJ)(e);m[t]?m[t]+=1:m[t]=1}));const x=Object.keys(m).map((e=>d.find((t=>(0,G.GJ)(t)===e)))),u=d.find((e=>e.id===l));return u&&!x.find((e=>e.id===l))&&(x.push(u),m[(0,G.GJ)(u)]-=1),r.forEach((e=>{const t=x.find((t=>t.id===e));if(t){const n=(0,G.GJ)(t);if(m[n]>1){const t=d.find((t=>(0,G.GJ)(t)===n&&t.id!==e));t&&(x.push(t),m[n]-=1)}}})),x.sort(G.v4),(0,z.jsx)(i.Fragment,{children:(0,z.jsx)("div",{children:(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(A.Z,{id:`${t}-equip-select-label`,children:n}),(0,z.jsx)(M.Z,{id:`${t}-equip-select`,labelId:`${t}-equip-select-label`,value:l||"",label:n,disabled:s,onChange:e=>{c(e.target.value),a(t,e.target.value)},children:x.map((e=>(0,z.jsxs)(T.Z,{value:e.id,disabled:r.indexOf(e.id)>=0,children:[e.id===l?(0,z.jsx)("b",{children:(0,G.GJ)(e)}):(0,z.jsxs)(z.Fragment,{children:[(0,G.GJ)(e),m[(0,G.GJ)(e)]>1&&-1===r.indexOf(e.id)?` x${m[(0,G.GJ)(e)]}`:""]}),(0,z.jsxs)(h.Z,{variant:"caption",sx:{color:"info.secondary"},children:["\xa0Lvl. ",e.level]}),e.enchantment&&(0,z.jsxs)(h.Z,{variant:"subtitle2",sx:{color:"info.main"},children:["\xa0",(0,G.Lt)(e.enchantment)]})]},e.id)))})]})})})}function Dt({hero:e,disabled:t,onChange:n}){const[a,s]=(0,i.useState)(""),l=e.inventory.filter((e=>e.type===q.$7.Quest)).sort(((e,t)=>t.level-e.level)),r="Quest items (passive, always active)",o=e.inventory.find((e=>e.id===a));(0,i.useEffect)((()=>{a.length&&!o&&s("")}),[o,a]);const c={};l.forEach((e=>{const t=(0,G.GJ)(e);c[t]?c[t]+=1:c[t]=1}));const d=Object.keys(c).map((e=>l.find((t=>(0,G.GJ)(t)===e))));return(0,z.jsx)(i.Fragment,{children:(0,z.jsx)("div",{children:(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(A.Z,{id:"quest-item-label",children:r}),(0,z.jsx)(M.Z,{id:"quest-item",labelId:"quest-item-label",value:a,label:r,disabled:t,onChange:e=>{if(s(e.target.value),n){const t=l.find((t=>t.id===e.target.value));t&&n(t.baseItem)}},children:d.map((e=>(0,z.jsxs)(T.Z,{value:e.id,"data-testid":e.baseItem,children:[(0,z.jsxs)(z.Fragment,{children:[(0,G.GJ)(e),c[(0,G.GJ)(e)]>1?` x${c[(0,G.GJ)(e)]}`:""]}),"???"!==(0,G.Lt)(e.baseItem)&&(0,z.jsxs)(h.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:["\xa0",(0,G.Lt)(e.baseItem)]})]},e.id)))})]})})})}function zt(){const[e]=(0,te.gZ)(),[t,{loading:n}]=(0,q.aP)(),[a,s]=(0,i.useState)(""),l=B(),r=n||e>0;if(!l)return null;async function o(e,n){try{await t({variables:{item:n,slot:e}})}catch(i){}}return(0,z.jsx)(i.Fragment,{children:(0,z.jsxs)(m.ZP,{container:!0,columns:6,spacing:1,children:[(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsx)(h.Z,{variant:"h3",sx:{fontSize:"1.2rem"},children:"Equipped items"})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(Tt,{hero:l,slot:"leftHand",label:"Left Hand",onEquip:o,disabled:r})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(Tt,{hero:l,slot:"rightHand",label:"Right Hand",onEquip:o,disabled:r})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(Tt,{hero:l,slot:"bodyArmor",label:"Body Armor",onEquip:o,disabled:r})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(Tt,{hero:l,slot:"handArmor",label:"Gauntlets",onEquip:o,disabled:r})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(Tt,{hero:l,slot:"legArmor",label:"Leggings",onEquip:o,disabled:r})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(Tt,{hero:l,slot:"headArmor",label:"Helmets",onEquip:o,disabled:r})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(Tt,{hero:l,slot:"footArmor",label:"Greaves",onEquip:o,disabled:r})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(Dt,{hero:l,disabled:r,onChange:s})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsxs)(m.ZP,{container:!0,columns:6,spacing:1,children:[(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:!!l.buffs.blessing&&(0,z.jsxs)(i.Fragment,{children:[(0,z.jsx)(h.Z,{children:(0,G.uD)(l.buffs.blessing)}),(0,z.jsx)(h.Z,{variant:"body1",children:(0,z.jsx)("b",{children:(0,G.Lt)(l.buffs.blessing)})})]})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,md:3,children:(0,z.jsx)(H,{title:l.equipment.artifact?.name,artifact:l.equipment.artifact})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(H,{title:l.equipment.leftHand?(0,G.GJ)(l.equipment.leftHand,null):null,artifact:l.equipment.leftHand?.imbue?.artifact,affixes:l.equipment.leftHand?.imbue?.affixes})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(H,{title:l.equipment.rightHand?(0,G.GJ)(l.equipment.rightHand,null):null,artifact:l.equipment.rightHand?.imbue?.artifact,affixes:l.equipment.rightHand?.imbue?.affixes})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(H,{title:l.equipment.bodyArmor?(0,G.GJ)(l.equipment.bodyArmor,null):null,artifact:l.equipment.bodyArmor?.imbue?.artifact,affixes:l.equipment.bodyArmor?.imbue?.affixes})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(H,{title:l.equipment.handArmor?(0,G.GJ)(l.equipment.handArmor,null):null,artifact:l.equipment.handArmor?.imbue?.artifact,affixes:l.equipment.handArmor?.imbue?.affixes})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(H,{title:l.equipment.legArmor?(0,G.GJ)(l.equipment.legArmor,null):null,artifact:l.equipment.legArmor?.imbue?.artifact,affixes:l.equipment.legArmor?.imbue?.affixes})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(H,{title:l.equipment.headArmor?(0,G.GJ)(l.equipment.headArmor,null):null,artifact:l.equipment.headArmor?.imbue?.artifact,affixes:l.equipment.headArmor?.imbue?.affixes})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,z.jsx)(H,{title:l.equipment.footArmor?(0,G.GJ)(l.equipment.footArmor,null):null,artifact:l.equipment.footArmor?.imbue?.artifact,affixes:l.equipment.footArmor?.imbue?.affixes})})]})}),l.level===l.levelCap&&(0,G.jr)(a)&&(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsx)(Pt,{hero:l,disabled:r})}),(0,G.OB)(a)&&(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsx)(Gt,{hero:l,disabled:r})}),(0,G.jj)(a)&&(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsx)(Mt,{hero:l,disabled:r})})]})})}function Nt({event:e}){const{message:t}=e,[n,{loading:i}]=(0,q.PF)();function a(){n()}return(0,z.jsx)(x.Z,{children:(0,z.jsxs)(J.Z,{open:!0,onClose:a,"aria-labelledby":"quest-event-title","aria-describedby":"quest-event-description",role:"dialog",children:[(0,z.jsx)(Y.Z,{id:"quest-event-title",tabIndex:0,children:"Quest Event"}),(0,z.jsx)(O.Z,{children:(0,z.jsx)(r.Z,{id:"quest-event-description",tabIndex:0,children:t&&t.map(((e,t)=>(0,z.jsx)(Le.Z,{children:e},`${t}`)))})}),(0,z.jsx)(K.Z,{children:(0,z.jsx)(k.Z,{variant:"contained",color:"error",onClick:a,disabled:i,"data-testid":"quest-continue-button","aria-label":"Continue and dismiss quest dialog",children:"Continue"})})]})})}var Rt=n(461),Ht=n(8895),Qt=n(2797),Jt=n(3508),Yt=n(888),Ot=n(8304);function Kt({quest:e}){const[t,n]=(0,i.useState)(!1),{data:a,loading:s}=(0,q.QT)({variables:e?.lastEvent?.quest?{quest:e?.lastEvent?.quest}:void 0,skip:!e?.lastEvent?.quest});if(!e?.lastEvent?.quest||s||!a)return(0,z.jsx)("div",{});const l=a.quest;let o=e.progress||1;return o=Math.log2(o),(0,z.jsxs)(Rt.Z,{children:[(0,z.jsx)(Ht.Z,{expandIcon:(0,z.jsx)(Jt.Z,{}),children:(0,z.jsxs)(qe.Z,{direction:"row",sx:{width:"100%"},spacing:1,children:[e.finished&&(0,z.jsx)(Yt.Z,{}),!e.finished&&(0,z.jsx)(Ot.Z,{}),(0,z.jsxs)(qe.Z,{sx:{width:"100%"},children:[(0,z.jsx)(h.Z,{sx:{lineHeight:3},children:(0,G.qh)(l.id)}),(0,z.jsx)(c.Z,{variant:"determinate",color:e.finished?"success":"secondary",value:e.finished?100:100*o/(o+1)})]})]})}),(0,z.jsxs)(Qt.Z,{children:[(0,z.jsx)(h.Z,{children:l.description}),e.lastEvent?.message&&(0,z.jsxs)(r.Z,{sx:{bgcolor:"warning.light",color:"warning.contrast",margin:2,padding:2},children:[(0,z.jsx)(h.Z,{variant:"h6",children:"Last event:"}),e.lastEvent.message.map(((e,t)=>(0,z.jsx)(h.Z,{sx:{fontStyle:"italic"},children:e},`${t}`)))]})]})]})}function Ut(){const e=B();if(!e)return null;const{questLog:t,currentQuest:n}=e;return 2===Object.values(t).filter((e=>!!e)).length?(0,z.jsx)(r.Z,{children:"You have not yet started any quests. Explore the world and grow stronger."}):(0,z.jsxs)(r.Z,{children:[(0,z.jsx)(h.Z,{variant:"h4",children:"Quest Log"}),(0,z.jsx)("br",{}),Object.values(t).filter((e=>!!e&&"string"!==typeof e)).sort(((e,t)=>e.finished?t.finished?t.progress-e.progress:1:t.finished?-1:t.progress-e.progress)).map((e=>e&&"string"!==typeof e?(0,z.jsx)(Kt,{quest:e},e.id):null))]})}function Vt(e,t){return`${(Math.round(e/t*1e3)/10).toLocaleString()}%`}function _t({stats:e,skills:t}){return(0,z.jsx)(r.Z,{children:(0,z.jsxs)(m.ZP,{container:!0,columns:6,spacing:2,children:[(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Strength"}),": ",e.stats.strength.toLocaleString()]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Dexterity"}),": ",e.stats.dexterity.toLocaleString()]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Constitution"}),": ",e.stats.constitution.toLocaleString()]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Intelligence"}),": ",e.stats.intelligence.toLocaleString()]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Wisdom"}),": ",e.stats.wisdom.toLocaleString()]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Willpower"}),": ",e.stats.willpower.toLocaleString()]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Luck"}),": ",e.stats.luck.toLocaleString()]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Bonus Armor"}),": ",Vt(e.damageReduction-1,1)]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Bonus Damage"}),":"," ",Vt(e.damageAmplification-1,1)]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,children:[(0,z.jsx)(m.ZP,{}),(0,z.jsx)(h.Z,{variant:"h6",children:"Skills"})]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Attacking Accuracy"}),": ",t.attackingAccuracy.toLocaleString()]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Attacking Damage"}),": ",t.attackingDamage.toLocaleString()]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Casting Accuracy"}),": ",t.castingAccuracy.toLocaleString()]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Casting Damage"}),": ",t.castingDamage.toLocaleString()]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Vitality"}),": ",t.vitality.toLocaleString()]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Resilience"}),": ",t.resilience.toLocaleString()]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Regeneration"}),": ",t.regeneration.toLocaleString()]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,children:[(0,z.jsx)(m.ZP,{}),(0,z.jsx)(h.Z,{variant:"h6",children:"Resistances"})]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Physical"}),": ",Vt(e.physicalResistance,1)]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Magical"}),": ",Vt(e.magicalResistance,1)]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Fire"}),": ",Vt(e.fireResistance,1)]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Ice"}),": ",Vt(e.iceResistance,1)]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Lightning"}),": ",Vt(e.lightningResistance,1)]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Holy"}),": ",Vt(e.holyResistance,1)]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Blight"}),": ",Vt(e.blightResistance,1)]}),(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsx)(m.ZP,{})}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Enemy Strength"}),":"," ",Vt(e.enemyStats.strength-1e6,1e6)]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Enemy Dexterity"}),":"," ",Vt(e.enemyStats.dexterity-1e6,1e6)]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Enemy Constitution"}),":"," ",Vt(e.enemyStats.constitution-1e6,1e6)]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Enemy Intelligence"}),":"," ",Vt(e.enemyStats.intelligence-1e6,1e6)]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Enemy Wisdom"}),":"," ",Vt(e.enemyStats.wisdom-1e6,1e6)]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Enemy Willpower"}),":"," ",Vt(e.enemyStats.willpower-1e6,1e6)]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Enemy Luck"}),":"," ",Vt(e.enemyStats.luck-1e6,1e6)]}),(0,z.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,z.jsx)("b",{children:"Armor Reduction"}),":"," ",Vt(e.armorReduction-1,1)]})]})})}function Xt({hero:e}){const[t]=(0,q.w3)(),[n,a]=(0,i.useState)(e.settings.autoDust);return(0,z.jsx)(i.Fragment,{children:(0,z.jsxs)(m.ZP,{container:!0,columns:6,children:[(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsx)(h.Z,{variant:"h5",children:"Autodust"})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsx)(h.Z,{variant:"subtitle2",children:"Automatically destroy enchanted items as they drop off monsters if they are at or below the following level."})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsx)(D.Z,{label:"Gear Level",value:n,onChange:e=>function(e){const t=Math.round(Number(e));!isNaN(t)&&Number.isFinite(t)&&a(t)}(e.target.value)})}),(0,z.jsx)(m.ZP,{item:!0,xs:6,children:(0,z.jsx)(k.Z,{onClick:async function(){await t({variables:{value:n}})},children:"Save"})})]})})}const en={attackingAccuracy:"Attacking Accuracy",attackingDamage:"Attacking Damage",castingAccuracy:"Casting Accuracy",castingDamage:"Casting Damage",vitality:"Vitality",resilience:"Resilience",regeneration:"Regeneration"};function tn({hero:e}){const[t,n]=(0,i.useState)(e.skillPercent),[a,{loading:s}]=(0,q.Xx)(),[l,{loading:r}]=(0,q.hv)();return(0,z.jsxs)("div",{children:[(0,z.jsx)(h.Z,{variant:"h4",children:"Skills"}),(0,z.jsx)(h.Z,{sx:{mb:1},children:"Select which skill you would like to improve, as well as percentage of how devoted your character is to leveling it up as opposed to receiving experience. This means that incoming experience is reduced by the percentage, however the amount of experience you gain doesn't affect the chances of gaining a skill level."}),(0,z.jsxs)(P.Z,{sx:{mb:5},children:[(0,z.jsx)(A.Z,{id:"active-skill-select-label",children:"Active Skill"}),(0,z.jsx)(M.Z,{labelId:"active-skill-select-label",id:"active-skill-select",value:e.activeSkill,label:"Active Skill",disabled:s,onChange:e=>a({variables:{skill:e.target.value}}),children:Object.values(q.lq).map((e=>(0,z.jsx)(T.Z,{value:e,children:en[e]},e)))})]}),(0,z.jsxs)(P.Z,{fullWidth:!0,children:[(0,z.jsx)(rt.ZP,{value:t,step:1,getAriaValueText:e=>`${e}%`,onChange:(e,t)=>!Array.isArray(t)&&n(t),"aria-label":"Percent experience towards skills",valueLabelDisplay:"on",disabled:r}),(0,z.jsx)(k.Z,{disabled:r,onClick:()=>l({variables:{percent:t}}),children:"Save Percent"})]})]})}function nn({hero:e,stat:t}){const[n,a]=(0,i.useState)(e.settings.minimumStats[t]??10),[s]=(0,q.Rw)();return(0,z.jsxs)(i.Fragment,{children:[(0,z.jsxs)(m.ZP,{item:!0,md:1,xs:2,children:[`${t.substr(0,1).toUpperCase()}${t.substr(1)}`,":"]}),(0,z.jsx)(m.ZP,{item:!0,xs:1,sm:2,children:(0,z.jsx)(D.Z,{fullWidth:!0,label:`Minimum ${t}`,value:n,onChange:e=>async function(e){let t=Number(e);!isNaN(t)&&Number.isFinite(t)&&(t=Math.max(1,Math.min(2e9,t)),a(t))}(e.target.value)})}),(0,z.jsx)(m.ZP,{item:!0,md:3,sm:2,xs:3,children:(0,z.jsxs)(k.Z,{onClick:async function(){await s({variables:{name:t,value:n}})},children:["Set minimum ",t]})})]})}function an(){const e=B();return e?(0,z.jsxs)(r.Z,{children:[(0,z.jsx)(h.Z,{variant:"h2",children:"Settings"}),(0,z.jsx)(h.Z,{variant:"subtitle2",sx:{mb:1},children:"Configure your mysterious automation"}),(0,z.jsx)(tn,{hero:e}),(0,z.jsx)(h.Z,{variant:"h5",children:"Minimum Stats"}),(0,z.jsx)(h.Z,{variant:"subtitle2",children:"Prevents transfering from lowering your stats below these values..."}),(0,z.jsxs)(m.ZP,{container:!0,columns:6,spacing:2,children:[(0,z.jsx)(nn,{hero:e,stat:"strength"}),(0,z.jsx)(nn,{hero:e,stat:"dexterity"}),(0,z.jsx)(nn,{hero:e,stat:"constitution"}),(0,z.jsx)(nn,{hero:e,stat:"intelligence"}),(0,z.jsx)(nn,{hero:e,stat:"wisdom"}),(0,z.jsx)(nn,{hero:e,stat:"willpower"}),(0,z.jsx)(nn,{hero:e,stat:"luck"})]}),(0,z.jsx)(Xt,{hero:e})]}):(0,z.jsx)("div",{})}const sn=l()((()=>n.e(770).then(n.bind(n,8770))));function ln(){const e=(0,a.useRouter)(),t=e.route.split("/").pop(),[n,s]=(0,je.d)(),{data:l,loading:Z,error:v}=(0,q.UE)({fetchPolicy:"cache-only"}),[y,S]=(0,i.useState)(t??"play"),{data:k}=(0,q.Wg)({pollInterval:3e4}),w=l?.me?.account?.hero??null,C=l?.me?.account?.access??null;if((0,i.useEffect)((()=>{!v&&n||e.push(`/?auth=${e.asPath}`)}),[v,n]),v||!n)return(0,z.jsx)(f.A,{children:(0,z.jsxs)(x.Z,{children:[(0,z.jsx)("br",{}),"Redirecting..."]})});if(Z)return(0,z.jsx)(f.A,{children:(0,z.jsx)(x.Z,{children:Z&&(0,z.jsx)(c.Z,{})})});const P=!!w?.inventory.find((e=>(0,G.r_)(e.baseItem)));return(0,z.jsx)(f.A,{showHero:!0,children:(0,z.jsxs)(x.Z,{children:[(0,z.jsxs)(i.Fragment,{children:[w&&w.attributePoints>0&&(0,z.jsx)(Zt,{}),w&&w.currentQuest&&(0,z.jsx)(Nt,{event:w.currentQuest})]}),(0,z.jsxs)(r.Z,{sx:{width:"100%",typography:"body1"},children:[(0,z.jsxs)(g.ZP,{value:y,children:[(0,z.jsxs)(r.Z,{sx:{borderBottom:1,borderColor:"divider"},children:[(0,z.jsx)(h.Z,{variant:"h1",sx:b.Z,children:"Navigation"}),(0,z.jsxs)(j.Z,{onChange:(t,n)=>{"play"===n?e.push("/play","/play",{scroll:!1}):e.push(`/play/${n}`,`/play/${n}`,{scroll:!1}),S(n)},"aria-label":"navigation tabs",variant:"scrollable",children:[(0,z.jsx)(d.Z,{label:"Welcome",value:"play"}),(0,z.jsx)(d.Z,{label:"Combat",value:"combat","data-testid":"combat-nav"}),!(!w?.inventory.length&&!w?.gold)&&(0,z.jsx)(d.Z,{label:"Shop",value:"shop"}),!!w?.inventory.length&&(0,z.jsx)(d.Z,{label:"Inventory",value:"inventory","data-testid":"inventory-nav"}),(0,z.jsx)(d.Z,{label:"Map",value:"map"}),w&&Object.values(w.questLog).filter((e=>!!e)).length>2&&(0,z.jsx)(d.Z,{label:"Quests",value:"quests"}),P&&(0,z.jsx)(d.Z,{label:"Settings",value:"settings"}),C===q.Ks.Admin&&(0,z.jsx)(d.Z,{label:"Admin",value:"admin"})]})]}),(0,z.jsx)(p.Z,{value:"play",children:(0,z.jsxs)(m.ZP,{container:!0,columns:12,spacing:4,children:[(0,z.jsxs)(m.ZP,{item:!0,xs:12,sm:7,md:8,children:[(0,z.jsxs)(h.Z,{variant:"h2",sx:{mb:2,fontSize:"1.8rem"},children:["Welcome to ",(0,z.jsx)("b",{children:"Proof of Combat"}),"!"]}),(0,z.jsxs)(h.Z,{variant:"subtitle1",sx:b.Z,children:["This text is only available to screen readers. Thank you for trying out my game! If you find any parts of the user interface that are difficult to navigate please let me know and I would love to improve them.",(0,z.jsx)("br",{}),(0,z.jsx)(u.Z,{href:"https://github.com/chrisinajar/proofofcombat/wiki/Screen-Readers-and-Accessibility",target:"_blank",rel:"noreferrer",children:"Check this wiki page for more details on accessibility"})]}),(0,z.jsx)(h.Z,{sx:{mb:2},children:"This is a text-based RPG where you can fight monsters, level up, and explore the world. The game is my passion project and is actively being developed at almost all times. Sometimes."}),(0,z.jsx)(h.Z,{variant:"h4",sx:b.Z,children:"Discord Server"}),(0,z.jsxs)(h.Z,{sx:{mb:2},children:["If you'd like to talk more with other players, report bugs, or discuss upcoming features,"," ",(0,z.jsx)(u.Z,{underline:"hover",href:"https://discord.gg/t7AZSxvfJG",target:"_blank",rel:"noreferrer",children:"join the discord!"})]}),(0,z.jsx)(h.Z,{variant:"h4",sx:b.Z,children:"Game Wiki"}),(0,z.jsxs)(h.Z,{sx:{mb:2},children:["A great deal of the game is undocumented, but the parts which are documented can be found"," ",(0,z.jsx)(u.Z,{underline:"hover",href:"https://github.com/chrisinajar/proofofcombat/wiki/",target:"_blank",rel:"noreferrer",children:"in the wiki"}),". The game is nearly impossible to 100% without consulting the wiki."]}),(0,z.jsx)(h.Z,{variant:"h5",sx:{mb:2},children:"Combat Stats"}),w?.combatStats&&(0,z.jsx)(_t,{skills:w.skills,stats:w.combatStats})]}),k?.leaderboard&&(0,z.jsxs)(m.ZP,{item:!0,xs:12,sm:5,md:4,children:[(0,z.jsx)(h.Z,{variant:"h6",children:"Leaderboard"}),(0,z.jsx)("ul",{id:"leaderboard-list",children:k.leaderboard.slice(0,20).map(((e,t)=>(0,z.jsxs)("li",{id:`leaderboard-list-${t}`,children:[(0,z.jsx)("b",{id:`leaderboard-list-${t}-name`,children:e.name})," ","(",(0,G.qh)(e.class),")"]},e.id)))})]})]})}),(0,z.jsxs)(p.Z,{value:"combat",children:[(0,z.jsx)(h.Z,{variant:"h3",sx:{textAlign:"center"},children:"Combat"}),(0,z.jsx)(h.Z,{children:"Challenge a monster from the list, then fight it to the death. Note that other players in the same location see the same monster lists, so they may get to it first!"}),(0,z.jsx)("br",{}),(0,z.jsx)(ge,{})]}),(0,z.jsx)(p.Z,{value:"shop",children:(0,z.jsx)(Ct,{})}),(0,z.jsx)(p.Z,{value:"inventory",children:(0,z.jsx)(zt,{})}),(0,z.jsx)(p.Z,{value:"map",children:(0,z.jsx)(bt,{})}),(0,z.jsx)(p.Z,{value:"quests",children:(0,z.jsx)(Ut,{})}),(0,z.jsx)(p.Z,{value:"settings",children:(0,z.jsx)(an,{})}),(0,z.jsx)(p.Z,{value:"admin",children:(0,z.jsx)(sn,{})})]}),(0,z.jsx)("br",{}),(0,z.jsx)(o.Z,{}),(0,z.jsx)("br",{}),(0,z.jsx)(X,{})]})]})})}}}]);