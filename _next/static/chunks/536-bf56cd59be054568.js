"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{7536:function(e,n,t){t.d(n,{Z:function(){return fi}});var r=t(5893),i=t(7294),o=t(1163),a=t(5152),l=t.n(a),s=t(5616),c=t(7720),u=t(1458),d=t(44),h=t(5861),m=t(6886),f=t(9104),v=t(4373),x=t(5670),p=t(409),y=t(5050),g=t(2950),b=t(7998),j=t(4051),Z=t.n(j),S=t(3920),w=t(8445),k=t(5739),A=t(9496),P=t(5662),C=t(7109),I=t(3946),L=t(4054),E=t(3841),O=t(7058),F=t(4156),T=t(8629),M=t(6824),W=t(622),G=t(4510),q=t(7952);function D(){var e,n,t,r=(0,q.UE)({fetchPolicy:"cache-only"}).data;return null!==(t=null===r||void 0===r||null===(e=r.me)||void 0===e||null===(n=e.account)||void 0===n?void 0:n.hero)&&void 0!==t?t:void 0}var B=t(9238),$=t(5018),z=t(3599),N=t(1903);function H(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Q(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function R(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){Q(o,r,i,a,l,"next",e)}function l(e){Q(o,r,i,a,l,"throw",e)}a(void 0)}))}}function U(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return H(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return H(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e){var n,t,o=e.hero,a=e.to,l=U((0,q.Se)(),2),u=l[0],d=l[1].loading,f=U((0,q.AF)(),2),v=f[0],x=(f[1].loading,(0,q._v)({pollInterval:5e3})),p=x.data,y=x.refetch,g=(0,i.useState)(0),b=g[0],j=g[1],S=(0,i.useState)(""),w=S[0],k=S[1],A=U((0,q.Fw)(),2),C=A[0],I=A[1].loading||d;if(!(null===p||void 0===p||null===(n=p.me)||void 0===n||null===(t=n.account)||void 0===t?void 0:t.hero))return null;var O=p.me.account.hero,F=O.incomingTrades,T=O.outgoingTrades,M="Select an item to offer",W=o.inventory.filter((function(e){return e.type!==q.$7.Quest})).sort(B.v4);function G(){return(G=R(Z().mark((function e(){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=w,e.next=4,C({variables:{offer:{to:a,item:n,gold:b}}});case 4:e.sent,y(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function D(e){return H.apply(this,arguments)}function H(){return(H=R(Z().mark((function e(n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u({variables:{offer:n}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function Q(){return(Q=R(Z().mark((function e(n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v({variables:{offer:n}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var J=W.find((function(e){return e.id===w}));return(0,r.jsxs)(s.Z,{sx:{p:2,m:1,bgcolor:"background.paper"},children:[(0,r.jsx)(h.Z,{color:"error",variant:"h4",children:"Offer trade"}),(0,r.jsx)(h.Z,{children:"You can offer one of your items for gold, and then the other player must accept."}),(0,r.jsxs)(m.ZP,{sx:{mt:1},container:!0,columns:6,spacing:3,children:[(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"trade-item-select-label",children:M}),(0,r.jsx)($.Z,{id:"trade-item-select",labelId:"trade-item-select-label",label:M,value:w,onChange:function(e){return k(e.target.value)},children:W.map((function(e){return(0,r.jsx)(z.Z,{value:e.id,disabled:(0,B.mQ)(o,e),children:(0,B.GJ)(e)},e.id)}))})]})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(N.Z,{label:"Gold value",value:0===b?"":b,onChange:function(e){var n=Number(e.target.value);!isNaN(n)&&Number.isFinite(n)&&(n=Math.round(Math.max(0,Math.min(2e9,n))),console.log(n),j(n))}})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsxs)(P.Z,{variant:"contained",fullWidth:!0,disabled:b<=0||!w.length||I,onClick:function(){return G.apply(this,arguments)},children:[J&&"Offer ".concat((0,B.GJ)(J)," for ").concat(b.toLocaleString()," gold"),!J&&"Select an item to offer"]})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsx)(c.Z,{})}),F.length>0&&(0,r.jsxs)(m.ZP,{item:!0,xs:6,children:["Received offers:",(0,r.jsx)(s.Z,{children:F.map((function(e){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(s.Z,{sx:{mt:1,bgcolor:"info.main",p:2},children:["From: ",(0,r.jsx)("b",{children:e.fromName}),(0,r.jsx)("br",{}),"Item: ",(0,r.jsx)("b",{children:(0,B.GJ)(e.item)}),(0,r.jsx)("br",{}),"Gold: ",(0,r.jsx)("b",{children:e.gold.toLocaleString()}),(0,r.jsx)("br",{}),(0,r.jsx)(P.Z,{sx:{m:1},variant:"contained",color:"success",disabled:I||e.gold>o.gold,onClick:function(){return function(e){return Q.apply(this,arguments)}(e.id)},children:"Accept Trade"}),(0,r.jsx)(P.Z,{sx:{m:1},variant:"contained",color:"error",disabled:I,onClick:function(){return D(e.id)},children:"Reject Trade"})]})},e.id)}))})]}),T.length>0&&(0,r.jsxs)(m.ZP,{item:!0,xs:6,children:["Sent offers:",(0,r.jsx)(s.Z,{children:T.map((function(e){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(s.Z,{sx:{mt:1,bgcolor:"info.main",p:2},children:["To: ",(0,r.jsx)("b",{children:e.toName}),(0,r.jsx)("br",{}),"Item: ",(0,r.jsx)("b",{children:(0,B.GJ)(e.item)}),(0,r.jsx)("br",{}),"Gold: ",(0,r.jsx)("b",{children:e.gold.toLocaleString()}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(P.Z,{variant:"contained",color:"error",disabled:I,onClick:function(){return D(e.id)},children:"Cancel Trade"})]})},e.id)}))})]})]})]})}function Y(e){var n=e.artifact,t=e.title,o=e.affixes,a=e.sx,l=e.children;if(!n||!t)return null;var s=(0,B.Vy)(n),c=function(e,n){return(0,r.jsx)(h.Z,{variant:"body1",sx:a,children:(0,r.jsx)("b",{children:e})},n)};return"function"===typeof l&&(c=l),(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.Z,{children:t}),s.map((function(e){return o&&!o.includes(e.type)?null:c((0,B.xq)(e),e.type)}))]})}function K(e){var n=e.artifact;return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.Z,{variant:"h4",children:n.name}),"A mysterious magical item with the following properties:",(0,r.jsx)(Y,{artifact:n})]})}function V(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function _(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function X(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){_(o,r,i,a,l,"next",e)}function l(e){_(o,r,i,a,l,"throw",e)}a(void 0)}))}}function ee(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ne(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return V(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return V(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var te="https://chrisinajar.com:2096/";function re(){var e,n,t,o,a=function(e){return e.trim()},l=function(e,n){n!==(null===u||void 0===u?void 0:u.id)&&(console.log("Trying to whisper",e,n.substr(0,4)),oe((function(t){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ee(e,n,t[n])}))}return e}({},t,ee({},e,{type:"private",heroId:n}))})),_(e))},c=(0,A.Ds)().enqueueSnackbar,u=D(),m=(0,q.TX)().data,f=(0,i.useState)(!1),v=f[0],y=f[1],b=(0,i.useState)([]),j=b[0],$=b[1],z=(0,i.useState)(!1),N=z[0],H=z[1],Q=(0,i.useState)(""),R=Q[0],U=Q[1],Y=(0,i.useState)("all"),V=Y[0],_=Y[1],re=(0,i.useState)({all:{type:"built-in"},chat:{type:"built-in"},notifications:{type:"built-in"}}),ie=re[0],oe=re[1],ae=(0,i.useState)(!1),le=ae[0],se=ae[1],ce=(0,i.useRef)();(0,i.useEffect)((function(){j.length>200&&$(j.slice(0,200))}),[j.length]),(0,i.useEffect)((function(){var e;if(!ce.current&&(null===m||void 0===m||null===(e=m.chat)||void 0===e?void 0:e.token)){var n={drop:"error",artifact:"warning",quest:"success",settlement:"info"};return ce.current=(0,S.io)(te,{withCredentials:!0,auth:{token:m.chat.token}}),ce.current.on("hello",(function(e){$(e.chat)})),ce.current.on("chat",(function(e){console.log("Got chat event!",e),$((function(n){return[e].concat(ne(n))}))})),ce.current.on("notification",(function(e){var t,r;e.item&&(e.message=e.message.replace("{{item}}",(0,B.GJ)(e.item))),"drop"===e.type||"artifact"===e.type?e.item?c("You found ".concat((0,B.GJ)(e.item)),{variant:"success"}):e.artifactItem?(c("You found ".concat(e.artifactItem.name),{variant:"success"}),se(e.artifactItem)):c(e.message,{variant:"success"}):"settlement"!==e.type&&c(e.message,{variant:"info"}),$((function(i){return[{type:null!==(t=e.type)&&void 0!==t?t:"notification",id:Math.random(),time:Date.now()/1e3,message:"",from:e.message,color:null!==(r=n[e.type])&&void 0!==r?r:"secondary",variant:"body1"}].concat(ne(i))}))})),ce.current.on("system-message",(function(e){c(e.message,{variant:"warning"}),$((function(n){return[{type:"system",id:Math.random(),time:Date.now()/1e3,message:e.message,from:"",color:e.color,variant:"h6"}].concat(ne(n))}))})),function(){ce.current&&(ce.current.disconnect(),ce.current=void 0)}}}),[null===m||void 0===m||null===(e=m.chat)||void 0===e?void 0:e.token]);var ue=a(R);function de(){return he.apply(this,arguments)}function he(){return(he=X(Z().mark((function e(){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ce.current){e.next=2;break}return e.abrupt("return");case 2:if("private"!==(n=ie[V]).type){e.next=7;break}return ce.current.emit("private-chat",{to:n.heroId,message:R},(function(e){console.log("Got a confirmation!",e),$((function(n){return[e].concat(ne(n))}))})),U(""),e.abrupt("return");case 7:ce.current.emit("chat",{message:R},(function(e){console.log("Got a reply!",e),$((function(n){return[e].concat(ne(n))}))})),U("");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var me,fe=j.filter((function(e){if("all"===V)return!0;if("chat"===V)return"chat"===e.type||"private"===e.type||"system"===e.type;if("notifications"===V)return"notification"===e.type||"drop"===e.type||"quest"===e.type||"system"===e.type;var n=ie[V];return!n||"private"===n.type&&("private"===e.type&&(e.heroId===n.heroId||e.to===n.heroId))})),ve=N?"Max message: ".concat(140-ue.length,"/").concat(140):"Type here...";return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(T.Z,{open:!(null===u||void 0===u?void 0:u.currentQuest)&&!!le,onClose:function(){return se(!1)},children:(0,r.jsx)(s.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",padding:[2,4],minWidth:"320px",maxWidth:"580px",width:"80%",textAlign:"center"},children:le&&(0,r.jsx)(K,{artifact:le})})}),(0,r.jsx)(x.ZP,{value:V,children:(0,r.jsx)(p.Z,{onChange:function(e,n){v&&y(!1),_(n)},"aria-label":"navigation tabs",variant:"scrollable",children:Object.keys(ie).map((function(e){return(0,r.jsx)(d.Z,{label:e,value:e},e)}))})}),"notifications"!==V&&(0,r.jsxs)(L.Z,{sx:{marginTop:1},fullWidth:!0,variant:"outlined",children:[(0,r.jsx)(E.Z,{htmlFor:"chat-input",children:ve}),(0,r.jsx)(O.Z,{disabled:!(null===(n=ce.current)||void 0===n?void 0:n.connected),value:R,id:"chat-input",name:"Chat input",label:ve,placeholder:"Type here...",onChange:function(e){var n=e.target.value;a(n).length<=140&&U(n)},onFocus:function(){return H(!0)},onBlur:function(){return H(!1)},autoComplete:"off",onKeyPress:function(e){"Enter"!==e.key||de()},endAdornment:(0,r.jsxs)(C.Z,{position:"end",children:[(0,r.jsx)(F.Z,{title:"Send message",children:(0,r.jsx)(I.Z,{"aria-label":"send chat",onClick:de,children:(0,r.jsx)(M.Z,{})})}),"private"===(null===(t=ie[V])||void 0===t?void 0:t.type)&&(0,r.jsx)(F.Z,{title:v?"Cancel trade":"Trade with player",children:(0,r.jsxs)(I.Z,{onClick:function(){return y(!v)},children:[v&&(0,r.jsx)(G.Z,{}),!v&&(0,r.jsx)(W.Z,{})]})})]})})]}),v&&u&&(null===(o=ie[V])||void 0===o?void 0:o.heroId)&&(0,r.jsx)(J,{hero:u,to:null!==(me=ie[V].heroId)&&void 0!==me?me:""}),(0,r.jsx)(s.Z,{sx:{padding:1,minHeight:"600px",bgcolor:"background.paper"},children:fe.map((function(e){return(0,r.jsxs)(h.Z,{variant:e.variant||"body1",sx:{color:"".concat("private"===e.type?"secondary":e.color||"text",".main")},children:[e.time&&(0,r.jsxs)(h.Z,{variant:"caption","aria-hidden":"true",children:["(",(0,k.S)(new Date(1e3*e.time)),")\xa0"]}),e.heroId&&(0,r.jsx)(P.Z,{onClick:function(){e.heroId&&l(e.from,e.heroId)},sx:{color:"inherit",textTransform:"none",paddingTop:0,paddingBottom:0,paddingLeft:1,paddingRight:.5,margin:0},children:(0,r.jsxs)("b",{children:[e.from,":"]})}),!e.heroId&&(0,r.jsx)("b",{children:e.from})," ",(0,w.emojify)(e.message)," ",e.time&&(0,r.jsxs)(h.Z,{variant:"caption",sx:g.Z,children:["(",(0,k.S)(new Date(1e3*e.time)),")\xa0"]})]},e.id)}))}),(0,r.jsx)("br",{})]})}var ie=t(1409),oe=t(737);function ae(){var e,n=D(),t=(0,q.W1)({variables:(null===n||void 0===n?void 0:n.location)?{location:{x:n.location.x,y:n.location.y,map:n.location.map}}:void 0,skip:!(null===n||void 0===n?void 0:n.location)}).data;return null!==(e=null===t||void 0===t?void 0:t.locationDetails)&&void 0!==e?e:null}function le(){var e=ae(),n=(null===e||void 0===e?void 0:e.specialLocations)||[];return n.length?n[0]:null}var se,ce=t(2734),ue=t(1292),de=t(5499),he=t(8698),me=t(7600),fe=t(5826);function ve(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var xe=(ve(se={},q.zP.Normal,"Normal stance with no pros or cons."),ve(se,q.zP.Combat,"???"),ve(se,q.zP.Reckless,"Double accuracy but makes you twice as easy to hit."),ve(se,q.zP.Aggressive,"???"),ve(se,q.zP.Defensive,"???"),ve(se,q.zP.NecroticBeam,"???"),ve(se,q.zP.CloudofKnives,"???"),ve(se,q.zP.FrozenOrb,"???"),ve(se,q.zP.MageArmor,"???"),ve(se,q.zP.NormalArrow,"???"),ve(se,q.zP.BarbedArrow,"???"),ve(se,q.zP.BloodHunter,"???"),ve(se,q.zP.DarkPresence,"???"),ve(se,q.zP.AuraoftheLifeless,"???"),ve(se,q.zP.ShieldSmash,"???"),ve(se,q.zP.ShieldSlash,"???"),ve(se,q.zP.HolySmite,"???"),ve(se,q.zP.VengefulSmite,"???"),ve(se,q.zP.WarriorsStance,"???"),ve(se,q.zP.Hexblade,"???"),ve(se,q.zP.Focus,"???"),se);function pe(e){var n=D(),t=(0,i.useState)((null===n||void 0===n?void 0:n.activeStance)||q.zP.Normal),o=t[0],a=t[1];if(!n)return null;var l=n.availableStances.map((function(e){return{name:e,tooltip:xe[e]}}));return l.length<2?null:(0,r.jsx)(m.ZP,{item:!0,xs:12,children:(0,r.jsxs)(m.ZP,{container:!0,sx:{textAlign:"center"},columns:6,spacing:2,children:[(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsx)(c.Z,{})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsx)(h.Z,{variant:"h5",children:"Select Combat Style"})}),l.map((function(n){return(0,r.jsx)(m.ZP,{item:!0,lg:1,md:2,sm:3,xs:6,children:(0,r.jsx)(F.Z,{title:n.tooltip,children:(0,r.jsx)(P.Z,{variant:o===n.name?"outlined":"text",sx:{fontSize:"1rem",padding:2},size:"large",id:"set-stance-".concat(n.name.toLowerCase()),onClick:function(){return function(n){a(n),e.onChange&&e.onChange(n)}(n.name)},"aria-label":"set stance ".concat(n.name),children:n.name})})},n.name)}))]})})}function ye(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ge(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function be(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){ge(o,r,i,a,l,"next",e)}function l(e){ge(o,r,i,a,l,"throw",e)}a(void 0)}))}}function je(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ze(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return ye(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ye(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e){var n,t,o,a,l=e.autoBattle,s=e.canAutoBattle,c=e.fight,d=c.id,f=c.monster,v=e.onVictory,x=e.onError,p=e.onAutoBattle,y=e.fightMutationRef,g=e.duel,b=e.hero,j=(0,i.useState)(!1),S=j[0],w=j[1],k=Ze((0,q.zC)(),2),A=k[0],C=k[1],I=C.data,L=C.loading,E=Ze((0,q.E0)(),2),O=E[0],T=E[1],M=T.data,W=T.loading,G=(0,i.useState)(100),D=G[0],$=G[1],z=(0,i.useState)(q.hK.Melee),N=z[0],H=z[1],Q=(null===I||void 0===I?void 0:I.fight)||(null===M||void 0===M?void 0:M.attackHero)||null,R=(null===I||void 0===I||null===(n=I.fight)||void 0===n||null===(t=n.monster)||void 0===t?void 0:t.monster)||(null===M||void 0===M||null===(o=M.attackHero)||void 0===o?void 0:o.otherHero)||null,U=(0,ce.Z)(),J=(0,i.useState)(b.activeStance||q.zP.Normal),Y=J[0],K=J[1],V=!l&&s;function _(e){return X.apply(this,arguments)}function X(){return(X=be(Z().mark((function e(n){var t,r,i,o,a,l,s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H(n),e.prev=1,!g){e.next=10;break}return e.next=6,O({variables:{id:d,attackType:n,stance:Y}});case 6:r=e.sent,(null===(t=r.data)||void 0===t?void 0:t.attackHero.victory)&&v&&v(),e.next=15;break;case 10:return e.next=13,A({variables:{monster:d,attackType:n,stance:Y}});case 13:o=e.sent,(null===(i=o.data)||void 0===i?void 0:i.fight.victory)&&v&&v();case 15:e.next=29;break;case 17:if(e.prev=17,e.t0=e.catch(1),!e.t0.graphQLErrors||!e.t0.graphQLErrors[0]){e.next=28;break}if(l=Ze(e.t0.graphQLErrors,1),s=l[0],!(null===(a=s.extensions)||void 0===a?void 0:a.delay)){e.next=24;break}return e.abrupt("return");case 24:if(!s.message.startsWith("Key not found in database")){e.next=28;break}return w(!0),$(0),e.abrupt("return");case 28:x&&x(e.t0);case 29:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}return(0,i.useEffect)((function(){S&&w(!1),L||W||$(100*(R?R.combat.health:f.combat.health)/f.combat.maxHealth)}),[null===R||void 0===R?void 0:R.combat.health,null===R||void 0===R?void 0:R.combat.maxHealth,f.combat.maxHealth]),y&&(y.current=_),(0,i.useEffect)((function(){return function(){y&&(y.current=function(){})}}),[]),(0,r.jsxs)(i.Fragment,{children:[!l&&(0,r.jsx)(pe,{onChange:K}),(0,r.jsxs)(m.ZP,{id:"combat-display",sx:(a={position:"relative",minHeight:"320px"},je(a,U.breakpoints.down("md"),{minHeight:"450px"}),je(a,U.breakpoints.down("sm"),{minHeight:"580px"}),je(a,U.breakpoints.down("xs"),{minHeight:"660px"}),a),item:!0,xs:6,children:[(0,r.jsxs)(m.ZP,{container:!0,sx:{textAlign:"center"},columns:6,children:[(0,r.jsxs)(m.ZP,{item:!0,xs:6,children:[(0,r.jsxs)(h.Z,{variant:"h4",children:[D>0&&(l?"Auto-Battling":"Battling"),D<=0&&"Dead"," ",f.name]}),(0,r.jsx)(u.Z,{variant:"determinate",value:D,color:"error"})]}),D>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:2,xl:2,children:(0,r.jsx)(F.Z,{title:"Attack using your melee weapons, uses strength and dexterity",describeChild:!0,children:(0,r.jsx)(P.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-melee",onClick:function(){return _(q.hK.Melee)},"aria-label":"melee attack",startIcon:(0,r.jsx)(ue.Z,{}),children:"Melee attack"})})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:2,xl:2,children:(0,r.jsx)(F.Z,{title:"Attack using your ranged weapons, uses dexterity",describeChild:!0,children:(0,r.jsx)(P.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-ranged",onClick:function(){return _(q.hK.Ranged)},"aria-label":"ranged attack",startIcon:(0,r.jsx)(de.Z,{}),children:"Ranged attack"})})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:2,xl:2,children:(0,r.jsx)(F.Z,{title:"Cast spells using your wisdom and intelligence",describeChild:!0,children:(0,r.jsx)(P.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-cast",onClick:function(){return _(q.hK.Cast)},"aria-label":"cast spell",startIcon:(0,r.jsx)(he.Z,{}),children:"Cast Spell"})})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:3,xl:3,children:(0,r.jsx)(F.Z,{title:"Smite your foe using wisdom and willpower",describeChild:!0,children:(0,r.jsx)(P.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-holy",onClick:function(){return _(q.hK.Smite)},"aria-label":"holy attack",startIcon:(0,r.jsx)(me.Z,{}),children:"Smite"})})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:6,md:3,xl:3,children:(0,r.jsx)(F.Z,{title:"Damage yourself to damage the enemy, uses constitution",describeChild:!0,children:(0,r.jsx)(P.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-blood",onClick:function(){return _(q.hK.Blood)},"aria-label":"blood magic",startIcon:(0,r.jsx)(fe.Z,{}),children:"Blood magic"})})})]})]}),S&&"This enemy was killed by another player",Q&&Q.log.map((function(e,n){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(h.Z,{children:[e.isEnchantment&&(0,r.jsxs)(i.Fragment,{children:[e.damage<0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("b",{children:e.from})," heals"," ",(0,r.jsx)("span",{id:"fight-".concat(e.from,"-enchantment-heal"),children:(0-e.damage).toLocaleString()})," ","health from their enchantments"]}),e.damage>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("b",{children:e.from})," dealt"," ",(0,r.jsx)("span",{id:"fight-".concat(e.from,"-enchantment-damage"),children:e.damage.toLocaleString()})," ","enchantment damage to ",(0,r.jsx)("b",{children:e.to})]})]}),!e.isEnchantment&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("b",{children:e.from})," ".concat(we(e.attackType,e.success,e.critical)," "),(0,r.jsx)("b",{children:e.to}),e.success?" for ".concat(e.damage.toLocaleString()," ").concat(e.damageType?e.damageType.toLowerCase():""," damage!"):"."]})]})},"".concat(e.from,"-").concat(n))})),Q&&Q.victory&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(h.Z,{id:"fight-did-win",children:[f.name," has been killed!",(Q.experience||Q.gold)&&" You gain ",Q.gold&&(0,r.jsxs)(i.Fragment,{children:[" ",(0,r.jsx)("span",{id:"fight-recap-gold",children:Q.gold.toLocaleString()})," ","gold"]}),Q.gold&&Q.experience&&" and",Q.experience&&(0,r.jsxs)(i.Fragment,{children:[" ",(0,r.jsx)("span",{id:"fight-recap-experience",children:Q.experience.toLocaleString()})," ","experience"]}),(Q.experience||Q.gold)&&"!! ",Q.didLevel&&(0,r.jsx)("b",{id:"fight-level-up",children:"You leveled up!!"})]}),Q.drop&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsxs)(h.Z,{id:"fight-got-drop",variant:"h5",children:["You find an enchanted item on the monster's corpse!",(0,r.jsx)("br",{}),(0,B.GJ)(Q.drop)]})]}),(0,r.jsx)("br",{}),V&&(0,r.jsx)(P.Z,{fullWidth:!0,color:"secondary",variant:"contained",onClick:function(){p&&p(f.id,N)},children:"Auto-Battle this enemy"})]})]})]})}function we(e,n,t){switch(e){case q.hK.Blood:return n?t?"surges with blood magic against":"lets blood and casts forth towards":"attempts to cast a spell against";case q.hK.Smite:return n?t?"summons powers beyond this world against":"smites":"attempts to smite";case q.hK.Cast:return n?t?"carefully casts a spell at":"blasts a beam of necrotic energy into":"attempts to cast a spell against";case q.hK.Ranged:return n?t?"lands a sneak attack from the shadows, critically damaging":"fires an arrow at":"shoots an arrow but it misses";case q.hK.Melee:default:return n?t?"lands a crippling blow against":"struck":"missed"}}function ke(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ae(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Pe(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){Ae(o,r,i,a,l,"next",e)}function l(e){Ae(o,r,i,a,l,"throw",e)}a(void 0)}))}}function Ce(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||Le(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,n){if(e){if("string"===typeof e)return ke(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ke(e,n):void 0}}function Ee(){var e,n,t,o,a=(0,i.useState)(q.hK.Melee),l=a[0],s=a[1],c=(0,i.useState)(0),d=c[0],f=c[1],v=(0,i.useState)(0),x=v[0],p=v[1],y=(0,i.useState)([0,50,100]),g=y[0],b=y[1],j=(0,i.useRef)((function(){})),S=(0,i.useState)(!1),w=S[0],k=S[1],A=(0,i.useState)(""),C=A[0],I=A[1],O=(0,i.useState)(0),F=O[0],T=O[1],M=(0,i.useState)(null),W=M[0],G=M[1],N=Ce((0,oe.gZ)(),2),H=N[0],Q=N[1],R=(0,i.useState)(""),U=R[0],J=R[1],Y=(0,i.useState)(""),K=Y[0],V=Y[1],_=(0,i.useState)(""),X=_[0],ee=_[1],ne=(0,i.useState)(""),te=ne[0],re=ne[1],le=(0,q.Of)(),se=le.data,ce=le.loading,ue=(le.error,le.refetch),de=Ce((0,q.Ht)(),1)[0],he=Ce((0,q.hL)(),2),me=he[0],fe=he[1].loading,ve=(0,q.pL)(),xe=ve.data,pe=ve.refetch,ye=(null===xe||void 0===xe?void 0:xe.challenges)||[],ge=D(),be=Ce((0,q.zC)(),2),je=(be[0],be[1]),Ze=(je.data,je.loading),we=(0,i.useRef)((function(e){})),ke=ae(),Ae=null!==(o=null===ke||void 0===ke?void 0:ke.players)&&void 0!==o?o:[],Le=null===se||void 0===se||null===(e=se.monsters)||void 0===e?void 0:e.find((function(e){return e.id===W})),Ee=!1,Oe=0;ge&&(Ee=!!ge.inventory.find((function(e){return(0,B.h8)(e.baseItem)})),Oe=ge.inventory.filter((function(e){return(0,B.Ke)(e.baseItem)})).length);var Fe=fe||ce||Ze;function Te(){return Me.apply(this,arguments)}function Me(){return(Me=Pe(Z().mark((function e(){var n,t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(n=e.t0.graphQLErrors[0])||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.delay)&&Q(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function We(){return(We=Pe(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===se||void 0===se?void 0:se.monsters.find((function(e){return e.id===K})),G(K),re("");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(){return(Ge=Pe(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qe(U));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e){return De.apply(this,arguments)}function De(){return(De=Pe(Z().mark((function e(n){var t,r,i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,de({variables:{monster:n}});case 4:return r=e.sent.data,e.next=7,ue();case 7:(null===r||void 0===r?void 0:r.challenge)&&G(r.challenge.id),(null===r||void 0===r||null===(t=r.challenge)||void 0===t?void 0:t.id)&&V(null===r||void 0===r||null===(i=r.challenge)||void 0===i?void 0:i.id),T(F+1),re(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),ue();case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function Be(){return(Be=Pe(Z().mark((function e(n,t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Enabling auto battler! weee!"),k(!0),s(t),f(0),I(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){return($e=Pe(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re(X),G("");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,i.useEffect)((function(){return window.setChallengeMonster=J,function(){delete window.setChallengeMonster}}),[J]),(0,i.useEffect)((function(){pe(),ue()}),[null===ge||void 0===ge?void 0:ge.location.x,null===ge||void 0===ge?void 0:ge.location.y,null===ge||void 0===ge?void 0:ge.location.map]),j.current=Pe(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p((x+1)%(4/Math.pow(2,Oe))),b([Math.random()>.5?100*Math.random():g[0],Math.random()>.5?100*Math.random():g[1],Math.random()>.5?100*Math.random():g[2]]),0===x){e.next=4;break}return e.abrupt("return");case 4:if(!(Fe||H>0)){e.next=6;break}return e.abrupt("return");case 6:if(0!==(null===ge||void 0===ge?void 0:ge.combat.health)){e.next=9;break}return console.log("[AutoBattler] Healing!"),e.abrupt("return",Te());case 9:if(Le&&0!==Le.monster.combat.health&&Le.monster.id===C){e.next=13;break}return console.log("[AutoBattler] Challenging new mob!"),qe(C),e.abrupt("return");case 13:if(!Le||!we.current){e.next=17;break}return console.log("[AutoBattler] Fighting ".concat(l,"!")),we.current(l),e.abrupt("return");case 17:console.log("[AutoBattler] Doing nothing...");case 18:case"end":return e.stop()}}),e)}))),(0,i.useEffect)((function(){if(w&&C.length){var e=(0,ie.Zi)((function(){j.current()}),500);return function(){(0,ie.cv)(e)}}}),[w,Oe]),(0,i.useEffect)((function(){var e;if(null===se||void 0===se||null===(e=se.monsters)||void 0===e?void 0:e.length){var n=se.monsters.concat().sort((function(e,n){return e.monster.level-n.monster.level}));if(""===K)V(n[0].id);else se.monsters.find((function(e){return e.id===K}))||V(n[0].id)}}),[K,null===se||void 0===se||null===(n=se.monsters)||void 0===n?void 0:n.length]);var ze=null===se||void 0===se||null===(t=se.monsters)||void 0===t?void 0:t.find((function(e){return e.id===K}));ze||(K="");var Ne=Ae.find((function(e){return e.id===te}));if(Ae.find((function(e){return e.id===X}))||(X=""),!ge)return null;ge.levelCap>100||(ye=ye.slice(0,ge.level)),Ae=Ae.filter((function(e){return e.combat.health>0}));var He="Select a new monster to challenge",Qe="Fight an existing monster!",Re="Duel with a nearby player!";return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(m.ZP,{container:!0,columns:6,spacing:4,children:[!w&&ge&&ge.combat.health>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(m.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"challenge-monster-select-label",children:He}),(0,r.jsx)($.Z,{id:"challenge-select",labelId:"challenge-monster-select-label",value:U,label:He,disabled:w,onChange:function(e){return J(e.target.value)},children:ye.map((function(e){return(0,r.jsxs)(z.Z,{value:e.id,children:[e.name,"\xa0",(0,r.jsxs)(h.Z,{variant:"caption",display:"inline-block",children:["Tier ",e.level]})]},e.id)}))}),(0,r.jsx)(P.Z,{id:"challenge-button",disabled:!U||H>0||fe||w,onClick:function(){return Ge.apply(this,arguments)},variant:"contained",children:"Challenge!"})]})}),(0,r.jsx)(m.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"fight-monster-select-label",children:Qe}),(0,r.jsx)($.Z,{id:"fight-select",labelId:"fight-monster-select-label",value:K,label:Qe,disabled:w,onChange:function(e){return V(e.target.value)},children:(null===se||void 0===se?void 0:se.monsters)&&Ie(null===se||void 0===se?void 0:se.monsters).sort((function(e,n){return e.monster.level-n.monster.level})).map((function(e){return(0,r.jsxs)(z.Z,{value:e.id,disabled:0===e.monster.combat.health,children:[0===e.monster.combat.health&&"Dead ",e.monster.name]},e.id)}))}),(0,r.jsx)(P.Z,{id:"fight-button",disabled:!K||H>0||fe||ze&&0===ze.monster.combat.health||w,onClick:function(){return We.apply(this,arguments)},variant:"contained",children:"Fight!"})]})}),Ae.length>1&&(0,r.jsx)(m.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"duel-select-label",children:Re}),(0,r.jsx)($.Z,{id:"duel-select",labelId:"duel-select-label",value:X,label:Re,disabled:w,onChange:function(e){return ee(e.target.value)},children:Ae.filter((function(e){return e.id!==ge.id})).sort((function(e,n){return e.level-n.level})).map((function(e){return(0,r.jsx)(z.Z,{value:e.id,children:e.name},e.id)}))}),(0,r.jsx)(P.Z,{id:"duel-button",disabled:!X.length||H>0||fe||w,onClick:function(){return $e.apply(this,arguments)},variant:"contained",children:"Duel Player!"})]})})]}),w&&(0,r.jsxs)(m.ZP,{item:!0,xs:6,children:[(0,r.jsx)(u.Z,{sx:{margin:1,color:"#f00"},variant:"determinate",value:g[0],color:"inherit"}),(0,r.jsx)(u.Z,{color:"inherit",sx:{margin:1,color:"#0f0"},variant:"determinate",value:g[1]}),(0,r.jsx)(u.Z,{color:"inherit",sx:{margin:1,color:"#00f"},variant:"determinate",value:g[2]}),(0,r.jsx)(P.Z,{fullWidth:!0,variant:"contained",color:"error",size:"large",onClick:function(){return k(!1)},children:"Disable Auto-Battle"})]}),ge&&ge.combat.health<=0&&(0,r.jsx)(m.ZP,{item:!0,lg:3,xs:6,children:(0,r.jsx)(h.Z,{id:"you-are-dead",children:"You are dead."})}),Le&&(0,r.jsx)(i.Fragment,{children:(0,r.jsx)(Se,{hero:ge,fight:Le,onError:function(){ue(),G(null)},autoBattle:w,canAutoBattle:Ee,onAutoBattle:function(e,n){return Be.apply(this,arguments)},fightMutationRef:we,onVictory:function(){return f(d+1)}},"".concat(Le.id,"-").concat(F))}),Ne&&(0,r.jsx)(i.Fragment,{children:(0,r.jsx)(Se,{hero:ge,fight:{id:Ne.id,monster:Ne},onError:function(){ue(),G(null)},duel:!0,autoBattle:!1,canAutoBattle:!1},"".concat(Ne.id,"-").concat(F))}),(0,r.jsx)(m.ZP,{item:!0,lg:3,xs:6,children:(0,r.jsx)(P.Z,{id:"heal-button",fullWidth:!0,onClick:Te,variant:"contained",disabled:H>0||fe||ge&&ge.combat.health===ge.combat.maxHealth,children:"Heal"})})]})})}var Oe=t(1514);function Fe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Te(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return Fe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Fe(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(){var e,n,t=(e=["\n  border-collapse: collapse;\n\n  tr {\n    margin: 0px;\n    padding: 0px;\n    td {\n      position: relative;\n      width: ","px;\n      height: ","px;\n      overflow: visible;\n      margin: 0px;\n      padding: 0px;\n    }\n  }\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return Me=function(){return t},t}var We=t(6829).Z.table(Me(),(function(e){return e.cellSize}),(function(e){return e.cellSize}));function Ge(e){var n=e.location,t=e.minimapSize,i=void 0===t?[24,24]:t,o=e.gridSize,a=void 0===o?[128,96]:o,l=e.cellSize,s=void 0===l?16:l,c=e.renderCell,u=void 0===c?function(){return null}:c,d=[Math.round(Math.min(a[0]-i[0],Math.max(0,n.x-i[0]/2))),Math.round(Math.min(a[1]-i[1],Math.max(0,n.y-i[1]/2)))];return(0,r.jsx)("div",{style:{position:"relative",display:"inline-block",backgroundImage:"url(/maps/".concat(n.map,".jpg)"),backgroundPosition:"-".concat(d[0]*s,"px -").concat(d[1]*s,"px"),backgroundSize:"".concat(128*s,"px ").concat(96*s,"px "),width:"".concat(i[0]*s,"px"),height:"".concat(i[1]*s,"px")},children:(0,r.jsx)(We,{cellSize:s,children:(0,r.jsx)("tbody",{children:Te(Array(i[1])).map((function(e,n){return(0,r.jsx)("tr",{children:Te(Array(i[0])).map((function(e,t){return(0,r.jsx)("td",{children:u({x:d[0]+t,y:d[1]+n})},"cell-".concat(d[0]+t,"-").concat(d[1]+n))}))},"row-".concat(d[1]+n))}))})})})}function qe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function De(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||$e(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e){return function(e){if(Array.isArray(e))return qe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$e(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,n){if(e){if("string"===typeof e)return qe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?qe(e,n):void 0}}function ze(e){var n=e.location,t=function(e){return(0,B.LW)(e.location,n.location)},o=De((0,q.L7)(),2),a=o[0],l=o[1].loading,c=(0,q.dE)().data,u=(0,i.useState)(""),d=u[0],m=u[1],f="Choose a port to sail to";return(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(h.Z,{variant:"h5",children:n.name}),(0,r.jsx)(h.Z,{children:"The wooden docks creak and sway with the water below."}),(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"sail-dock-select-label",children:f}),(0,r.jsx)($.Z,{id:"sail-select",labelId:"sail-dock-select-label",value:d,label:f,onChange:function(e){return m(e.target.value)},children:(null===c||void 0===c?void 0:c.docks)&&Be(null===c||void 0===c?void 0:c.docks).sort((function(e,n){return t(e)-t(n)})).map((function(e){return(0,r.jsxs)(z.Z,{value:e.name,disabled:e.name===n.name,children:[e.name,":"," ",e.name!==n.name&&(0,r.jsxs)(i.Fragment,{children:[(t=e,Math.round(12*(0,B.LW)(t.location,n.location))).toLocaleString()," Gold"]}),e.name===n.name&&"Current location"]},e.name);var t}))}),(0,r.jsx)(P.Z,{onClick:function(){if(c){var e=c.docks.find((function(e){return e.name===d}));e&&a({variables:{x:e.location.x,y:e.location.y}})}},variant:"outlined",color:"success",disabled:!d.length||l,children:"Sail!"})]})]})}function Ne(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function He(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Qe(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){He(o,r,i,a,l,"next",e)}function l(e){He(o,r,i,a,l,"throw",e)}a(void 0)}))}}function Re(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Ne(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ne(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e){var n=e.shop,t=(0,i.useState)(!1),o=t[0],a=t[1],l=(0,i.useState)(""),s=l[0],u=l[1],d=Re((0,q.NA)(),2),m=d[0],f=d[1].loading;function v(){return(v=Qe(Z().mark((function e(n){var t,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("attemptiong trade",n),u(""),e.prev=2,e.next=6,m({variables:{trade:n}});case 6:(null===(r=e.sent)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.npcTrade)&&(u(r.data.npcTrade.message),a(r.data.npcTrade.success)),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(c.Z,{sx:{mt:1,mb:1}}),(0,r.jsx)(h.Z,{variant:"h4",component:"h5",color:"info.main",children:n.name}),(0,r.jsx)(h.Z,{sx:{mb:2},variant:"subtitle2",color:"info.main",children:"Hermit shop"}),s.length>0&&(0,r.jsx)(h.Z,{sx:{mb:2},variant:"body1",color:o?"success.main":"error.main",children:s}),n.trades.map((function(e,n){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(Je,{trade:e}),(0,r.jsx)(P.Z,{disabled:f,onClick:function(){return function(e){return v.apply(this,arguments)}(e.id)},sx:{ml:1},children:"Trade"})]})},"npc shop items ".concat(n))}))]})}function Je(e){var n=e.trade;return(0,r.jsxs)(i.Fragment,{children:["For the price of ",(0,r.jsx)(Ye,{price:n.price}),", I'll give you"," ",(0,r.jsx)(Ye,{price:n.offer})]})}function Ye(e){var n=e.price;return(0,r.jsx)(F.Z,{title:Ke(n),describeChild:!0,children:(0,r.jsx)("b",{"aria-label":Ke(n),children:n.description})})}function Ke(e){var n,t,r,i=[];return e.gold&&i.push("".concat(e.gold.toLocaleString()," gold")),e.dust&&i.push("".concat(e.dust.toLocaleString()," dust")),(null===(n=e.baseItems)||void 0===n?void 0:n.length)&&e.baseItems.forEach((function(e){i.push("".concat(e))})),(null===(t=e.enchantments)||void 0===t?void 0:t.length)&&e.enchantments.forEach((function(e){i.push("".concat((0,B.uD)(e)))})),(null===(r=e.questItems)||void 0===r?void 0:r.length)&&e.questItems.forEach((function(e){i.push("".concat(e))})),i.length?i.join(", "):"???"}var Ve=t(3020),_e=t(6242),Xe=t(2023),en=t(9748),nn=t(4267),tn=t(657),rn=t(1425),on=t(6580),an=t(8951),ln=t(3090),sn=t(1812),cn=t(7855),un=t(3707),dn=t(5843),hn=t(1233);function mn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function fn(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function vn(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){fn(o,r,i,a,l,"next",e)}function l(e){fn(o,r,i,a,l,"throw",e)}a(void 0)}))}}function xn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return mn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return mn(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pn(e){e.hero;var n=e.camp,t=e.onBuyResource,o=(0,i.useState)(!1),a=o[0],l=o[1],c=xn((0,q.G_)(),2),u=c[0],d=c[1].loading,f=xn((0,q.jE)(),2),v=f[0],x=f[1].loading;q.G_;var p=(0,i.useState)(""),y=p[0],g=p[1],b=(0,i.useState)(""),j=b[0],S=b[1],w=x||d;function k(){return(k=vn(Z().mark((function e(){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a?u:v,e.next=4,n({variables:{amount:Number(j),resource:y}});case 4:S(""),g(""),t&&t(),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var A=!!n.upgrades.find((function(e){return e===q.gT.TradingPost})),P=!y.length||!j.length||Number(j)<1||isNaN(Number(j))||!Number.isFinite(Number(j));return(0,r.jsx)(s.Z,{children:(0,r.jsxs)(m.ZP,{container:!0,columns:6,spacing:1,children:[A&&(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsxs)(hn.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,r.jsx)(h.Z,{children:"Buy"}),(0,r.jsx)(dn.Z,{color:"success",checked:a,onChange:function(e){return l(e.target.checked)}}),(0,r.jsx)(h.Z,{children:"Sell"})]})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsxs)(L.Z,{fullWidth:!0,sx:{mt:1,minWidth:200},children:[(0,r.jsxs)(E.Z,{children:["Select resource to ",a?"sell":"buy"]}),(0,r.jsxs)($.Z,{label:"Select resource to ".concat(a?"sell":"buy"),value:y,onChange:function(e){return g(e.target.value)},children:[(0,r.jsx)(z.Z,{value:"wood",children:"Wood"}),(0,r.jsx)(z.Z,{value:"food",children:"Food"}),(0,r.jsx)(z.Z,{value:"water",children:"Water"}),(0,r.jsx)(z.Z,{value:"stone",children:"Stone"})]})]})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(L.Z,{fullWidth:!0,sx:{mt:1,minWidth:200},children:(0,r.jsx)(N.Z,{label:"Amount to ".concat(a?"sell":"buy"),value:j,onChange:function(e){return S(e.target.value)}})})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsx)(L.Z,{fullWidth:!0,children:(0,r.jsxs)(sn.Z,{color:a?"success":"error",loading:w,variant:"contained",disabled:P,onClick:function(){return k.apply(this,arguments)},children:[a&&"Sell ",!a&&"Buy ",P&&"Resources",!P&&"".concat(y," for ").concat((1e4*Number(j)).toLocaleString()," Gold")]})})})]})})}function yn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function gn(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function bn(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){gn(o,r,i,a,l,"next",e)}function l(e){gn(o,r,i,a,l,"throw",e)}a(void 0)}))}}function jn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return yn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return yn(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zn(e){var n=e.hero,t=e.onShowSettlement,i=le(),o=!1;return n.home&&n.home.location.x===n.location.x&&n.home.location.y===n.location.y&&n.home.location.map===n.location.map&&(o=!0),i&&"altar"!==i.type||!n.home&&n.gold<1e5?null:(0,r.jsxs)(s.Z,{children:[!n.home&&(0,r.jsx)(Sn,{hero:n}),n.home&&(0,r.jsx)(wn,{isLocal:o,hero:n,onShowSettlement:t}),(0,r.jsx)(c.Z,{sx:{mt:2,mb:2}})]})}function Sn(e){e.hero;var n=jn((0,q.kO)(),2),t=n[0],i=n[1].loading;function o(){return(o=bn(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(h.Z,{component:"h2",variant:"h5",sx:{mb:2},children:"Settle Camp"}),(0,r.jsx)(h.Z,{sx:{mb:2},children:"Settling a camp site allows you to heal faster while standing on that square. Additionally, you'll be able to upgrade the camp site to gain additional features and upgrades."}),(0,r.jsxs)(sn.Z,{loading:i,color:"success",onClick:function(){return o.apply(this,arguments)},sx:{p:2},startIcon:(0,r.jsx)(cn.Z,{}),children:["Settle Camp for ",1e5.toLocaleString()," Gold"]})]})}function wn(e){var n=e.hero,t=e.isLocal,o=e.onShowSettlement,a=(0,i.useState)(!1),l=a[0],c=a[1],u=(0,i.useState)(!1),d=u[0],m=u[1],f=jn((0,q.kO)(),2),v=f[0],x=f[1].loading;function p(){return(p=bn(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!1),e.prev=1,e.next=4,v();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}if(!n.home)return null;var y=!!n.home.upgrades.find((function(e){return e===q.gT.TradingPost})),g=!!n.home.upgrades.find((function(e){return e===q.gT.Settlement}));if(!t)return(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)(tn.Z,{open:l,onClose:function(){return c(!1)},"aria-labelledby":"confirmation-title","aria-describedby":"confirmation-description",children:[(0,r.jsxs)(ln.Z,{id:"confirmation-title",children:[!g&&"Destroy existing campsite?",g&&"Destroy settlement capital?"]}),(0,r.jsx)(on.Z,{children:(0,r.jsxs)(an.Z,{id:"confirmation-description",children:["Settling a new camp here will leave your old"," ",g?"settlement":"campsite"," abandoned. You will lose any upgrades or anything stored there."]})}),(0,r.jsxs)(rn.Z,{children:[(0,r.jsx)(sn.Z,{color:"error",loading:x,onClick:function(){return c(!1)},children:"Nevermind"}),(0,r.jsx)(sn.Z,{color:"success",loading:x,onClick:function(){return p.apply(this,arguments)},autoFocus:!0,children:"Re-Settle Camp"})]})]}),(0,r.jsxs)(h.Z,{sx:{mb:2},component:"h2",children:["Your ",g?"settlement":"campsite"," is at"," ",(0,r.jsxs)("b",{children:[n.home.location.x,", ",n.home.location.y]}),". You must be at your ",g?"settlement":"campsite"," to interract with it."]}),(0,r.jsxs)(sn.Z,{loading:x,color:"error",onClick:function(){return c(!0)},sx:{p:2},startIcon:(0,r.jsx)(un.Z,{}),children:["Rebuild Camp HERE for ",1e5.toLocaleString()," Gold"]})]});var b=g?"Manage Settlement":"Manage Campsite";return(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)(tn.Z,{open:d,onClose:function(){return m(!1)},"aria-labelledby":"manage-camp-title","aria-describedby":"manage-camp-description",children:[(0,r.jsx)(ln.Z,{id:"manage-camp-title",children:b}),(0,r.jsxs)(on.Z,{children:[(0,r.jsx)(kn,{camp:n.home}),(0,r.jsxs)(an.Z,{id:"manage-camp-description",children:["The fire crackles and pops as you work.",!g&&" Your tools and supplies lie staggered across the campsite.",g&&" Your tools sit organized in the shed, spare the ones in use"]}),(0,r.jsx)(pn,{hero:n,camp:n.home}),y&&(0,r.jsx)(Pn,{hero:n,camp:n.home}),(0,r.jsx)(An,{hero:n,camp:n.home})]}),(0,r.jsx)(rn.Z,{children:(0,r.jsx)(sn.Z,{color:"success",loading:x,onClick:function(){return m(!1)},children:"Done"})})]}),(0,r.jsxs)(h.Z,{variant:"h5",component:"h2",sx:{mb:2},children:["Your ",g?"Settlement":"Campsite"]}),(0,r.jsx)(h.Z,{sx:{mb:2},children:"The fire crackles and pops as it burns through the night."}),(0,r.jsxs)(sn.Z,{color:"warning",variant:"contained",loading:x,onClick:function(){return g&&o?o():m(!0)},startIcon:(0,r.jsx)(cn.Z,{}),children:["Open ",g?"Settlement":"Camps"," Management"]})]})}function kn(e){var n=e.camp,t=n.upkeep;return(0,r.jsx)(m.ZP,{container:!0,columns:8,children:n.resources.map((function(e){var n,i=e.name,o=e.value,a=e.maximum,l=!1;i in t&&(l=null!==(n=t[i])&&void 0!==n&&n);return(0,r.jsxs)(m.ZP,{item:!0,xs:8,sm:4,md:2,children:[(0,r.jsx)("b",{children:(0,Ve.words)(i)}),":"," ",0===o?(0,r.jsx)(h.Z,{sx:{display:"inline-block"},color:"error",children:o.toLocaleString()}):o.toLocaleString()," ","/ ",a&&a.toLocaleString(),l&&(0,r.jsxs)(h.Z,{color:24*l>o?"error":"",component:"span","aria-label":"Upkeep: ".concat(l),children:[" ","-",l.toLocaleString()]})]},i)}))})}function An(e){var n,t=e.hero,i=e.camp,o=function(e){var n,t;return null!==(t=null===(n=e.find((function(e){return"gold"===e.name})))||void 0===n?void 0:n.value)&&void 0!==t?t:0},a=jn((0,q.Th)(),2),l=a[0],c=a[1].loading,u=(0,q.Hk)(),d=u.data,f=u.refetch,v=null!==(n=null===d||void 0===d?void 0:d.availableUpgrades)&&void 0!==n?n:[],x=jn((0,oe.gZ)(),1)[0]>0;if(!v.length)return null;function p(){return(p=bn(Z().mark((function e(n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({variables:{upgrade:n}});case 3:return e.next=5,f();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var y=!!i.upgrades.find((function(e){return e===q.gT.Settlement}));return(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)(h.Z,{variant:"h6",children:[y?"Settlement":"Camp"," Upgrades"]}),(0,r.jsx)(m.ZP,{container:!0,columns:6,spacing:2,children:v.map((function(e){return(0,r.jsx)(m.ZP,{item:!0,xs:3,children:(0,r.jsxs)(_e.Z,{variant:"outlined",children:[(0,r.jsx)(en.Z,{title:e.name}),(0,r.jsx)(nn.Z,{children:(0,r.jsxs)(h.Z,{variant:"body2",color:"text.secondary",children:["Cost:"," ",e.cost.map((function(e){return"".concat(e.value.toLocaleString()," ").concat((0,Ve.words)(e.name))})).join(", ")]})}),(0,r.jsx)(Xe.Z,{children:(0,r.jsx)(sn.Z,{disabled:x,loading:c,sx:{m:1},variant:"outlined",color:o(e.cost)>t.gold?"error":"success",onClick:function(){return function(e){return p.apply(this,arguments)}(e.type)},children:"Purchase"})})]})},e.type)}))})]})}function Pn(e){e.hero,e.camp;return null}var Cn=t(1730),In=t(2613),Ln=t(3054),En=t(7563),On=t(6398),Fn=t(6667),Tn=t(3898),Mn=t(1733),Wn=t(1671),Gn=t(1749),qn=t(4231);function Dn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Bn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Dn(e,n,t[n])}))}return e}function $n(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.reduce((function(e,n){return n.forEach((function(n){var t,r,i=e.find((function(e){return e.name===n.name}));i?(i.value=i.value+n.value,(i.maximum||n.maximum)&&(i.maximum=(null!==(t=i.maximum)&&void 0!==t?t:0)+(null!==(r=n.maximum)&&void 0!==r?r:0))):e.push(Bn({},n))})),e}),[])}var zn=t(7234);function Nn(e){var n=e.location,t=e.icon,i=e.cellSize,o=e.boundingBox,a=e.tooltip,l=e.hover,s=void 0!==l&&l,c=e.onClick,u=e.color,d=void 0===u?"white":u,h=e.bgcolor;n.x,o.min.x,n.y,o.min.y;return(0,r.jsx)(F.Z,{describeChild:!0,title:"".concat(n.x,", ").concat(n.y,": ").concat(a),children:(0,r.jsx)(I.Z,{onClick:c,sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"".concat(i,"px"),height:"".concat(i,"px"),color:d,backgroundColor:h,border:"1px solid ".concat(d),"&:hover":{backgroundColor:(0,zn.Z)(h||d).setAlpha(h?s?.2:.8:s?.7:.1).toRgbString()}},children:t})})}function Hn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Qn(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Rn(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){Qn(o,r,i,a,l,"next",e)}function l(e){Qn(o,r,i,a,l,"throw",e)}a(void 0)}))}}function Un(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Hn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Hn(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jn(e){var n=e.cellSize,t=e.x,o=e.y,a=e.capital,l=e.type,s=e.range,c=e.boundingBox,u=Un((0,q.iA)(),1)[0],d=a.connections.map((function(e){return e.location})).concat(a.location),h=(0,i.useMemo)((function(){return Math.abs(t-a.location.x)+Math.abs(o-a.location.y)>=s||d.find((function(e){return e.x===t&&e.y===o}))?null:d.find((function(e){return e.x===t+1&&e.y===o||e.x===t-1&&e.y===o||e.x===t&&e.y===o+1||e.x===t&&e.y===o-1}))?{x:t,y:o,map:a.location.map}:null}),[d.length,t,o,s]);function m(){return(m=Rn(Z().mark((function e(n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u({variables:{location:n,type:l}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return h?(0,r.jsx)(i.Fragment,{children:(0,r.jsx)(Nn,{onClick:function(){return function(e){return m.apply(this,arguments)}(h)},hover:!0,color:"rgb(10, 120, 10)",cellSize:n,boundingBox:c,location:h,tooltip:"Build here",icon:(0,r.jsx)(Ln.Z,{})},"".concat(h.x,"-").concat(h.y))}):null}function Yn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Kn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Vn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Kn(e,n,t[n])}))}return e}function _n(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Yn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Yn(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xn(e){var n,t,o,a,l=e.location,s=e.hero,c=e.onDestroy,u=_n((0,q.Up)(),2),d=u[0],m=u[1].loading,f=_n((0,q.bv)(),2),v=f[0],x=f[1].loading,p=_n((0,q.xs)(),2),y=(p[0],p[1].loading,_n((0,q.ny)(),2)),g=y[0],b=y[1].loading,j=_n((0,q.SD)(),2),Z=j[0],S=j[1].loading,w=(0,oe.mu)();return l.owner!==s.id?(0,r.jsx)(r.Fragment,{children:"Select a building that belongs to you."}):l.resources?(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,r.jsx)(et,{name:"Building type",value:l.type})}),l.resources.map((function(e){return e.value>0?(0,r.jsx)("li",{children:(0,r.jsx)(et,{name:(0,Ve.words)(e.name),"aria-label":"".concat(e.value.toLocaleString()," out of ").concat((null!==(o=e.maximum)&&void 0!==o?o:0).toLocaleString()),value:"".concat(e.value.toLocaleString()," / ").concat((null!==(a=e.maximum)&&void 0!==a?a:0).toLocaleString())})},e.name):null}))]}),l.id===(null===(n=s.home)||void 0===n?void 0:n.id)&&(0,r.jsx)(An,{camp:l,hero:s}),l.type===q.oS.Settlement&&l.id!==(null===(t=s.home)||void 0===t?void 0:t.id)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{children:"This settlement is a former capital that has fallen. You can destroy this location and reclaim most of the resources."}),(0,r.jsx)(P.Z,{onClick:function(){return c(l)},variant:"contained",color:"error",children:"Destroy former settlement"})]}),l.type===q.oS.Barracks&&(0,r.jsx)(nt,{location:l,action:"Recruit",unit:"troops",cost:1e6,loading:m,onPurchase:function(e){d({variables:e})}}),l.type===q.oS.Treasury&&(0,r.jsx)(nt,{location:l,action:"Purchase",unit:"bonds",cost:1e6,loading:x,onPurchase:function(e){v({variables:e})}}),l.type===q.oS.Treasury&&(0,r.jsx)(nt,{location:l,action:"Sell",unit:"bonds",cost:1e6,loading:x,onPurchase:function(e){v({variables:Vn({},e,{amount:0-e.amount})})}}),l.type===q.oS.Treasury&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(sn.Z,{sx:{m:1},loading:S,variant:"contained",disabled:w,onClick:function(){Z({variables:{location:{x:l.location.x,y:l.location.y,map:l.location.map},greater:!1}})},children:"Craft Element of Gold (1,000,000 bonds)"}),(0,r.jsx)(sn.Z,{sx:{m:1},loading:S,variant:"contained",disabled:w,onClick:function(){Z({variables:{location:{x:l.location.x,y:l.location.y,map:l.location.map},greater:!0}})},children:"Craft Greater Element of Gold (250,000,000 bonds)"})]}),l.type===q.oS.Garrison&&(0,r.jsx)(nt,{location:l,action:"Build",unit:"fortifications",cost:1e6,loading:b,onPurchase:function(e){g({variables:e})}})]}):null}function et(e){var n=e.name,t=e.value,i=e["aria-label"];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("label",{style:{fontWeight:"bold"},htmlFor:"building-details-value-".concat(n),children:[n,":"]})," ",(0,r.jsx)("span",{"aria-label":i,children:t})]})}function nt(e){var n=e.location,t=e.action,o=e.unit,a=e.cost,l=e.loading,s=void 0!==l&&l,c=e.onPurchase,u=(0,i.useState)(0),d=u[0],h=u[1],m=(_n((0,q.Up)(),1)[0],(0,oe.mu)()),f=Number.isFinite(d)&&!isNaN(d)&&d>0;return(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(N.Z,{onChange:function(e){return h(parseInt(e.target.value))},id:"".concat(t,"-input"),label:"Amount of ".concat(o," to ").concat(t.toLowerCase())}),(0,r.jsxs)(sn.Z,{loading:s,variant:"contained",disabled:!f||m,onClick:function(){Number.isFinite(d)&&!isNaN(d)&&c({location:{x:n.location.x,y:n.location.y,map:n.location.map},amount:d})},children:[!f&&"".concat(t," ").concat(o),f&&"".concat(t," ").concat(d.toLocaleString()," ").concat(o," for ").concat((d*a).toLocaleString()," gold")]})]})}var tt=t(89),rt=t(3800),it=t(8456);function ot(e){var n,t,i,o=e.open,a=e.onClose,l=e.loading,c=e.attackResults,u=e.hero;return(0,r.jsx)(T.Z,{open:o,onClose:a,children:(0,r.jsxs)(s.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",padding:[2,4],minWidth:"320px",maxWidth:"580px",width:"80%",textAlign:"center"},"aria-labelledby":"attack-results-modal-title","aria-describedby":"modal-modal-description",children:[l&&(0,r.jsx)(it.Z,{}),c&&(0,r.jsxs)(r.Fragment,{children:[c.target.owner===u.id&&(0,r.jsx)(h.Z,{id:"attack-results-modal-title",variant:"h5",component:"h2",children:"Your troops have claimed this location in your name, it now belongs to your settlement."}),c.target.owner!==u.id&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.Z,{id:"attack-results-modal-title",variant:"h5",component:"h2",children:["Attack results for ",c.target.location.x,","," ",c.target.location.y]}),(0,r.jsxs)(h.Z,{variant:"subtitle1",children:["Owner:"," ",(0,r.jsx)("strong",{children:null!==(i=null===c||void 0===c||null===(n=c.target)||void 0===n||null===(t=n.publicOwner)||void 0===t?void 0:t.name)&&void 0!==i?i:"Unknown"})]})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(h.Z,{children:["You lost ",at(c.attackerCasualties)]}),(0,r.jsxs)(h.Z,{children:["Your opponent lost"," ",at(c.targetCasualties)]}),c.totalDamage>0&&(0,r.jsxs)(h.Z,{children:["Your troops dealt ",c.totalDamage.toLocaleString()," ","damage"]}),c.damage>0&&(0,r.jsxs)(h.Z,{children:["The target location received"," ",c.damage.toLocaleString()," damage",c.totalDamage>c.damage&&", the rest was absorbed by garrisons."]}),0===c.damage&&(0,r.jsx)(h.Z,{children:"All damage was absorbed by garrisons."})]})]})})}function at(e){var n=Object.keys(e).map((function(n){var t=e[n];return!!(t&&t>0)&&"".concat(t.toLocaleString()," ").concat(n)})).filter((function(e){return!!e}));return n.length?n.join(", "):"nothing"}function lt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function st(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function ct(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){st(o,r,i,a,l,"next",e)}function l(e){st(o,r,i,a,l,"throw",e)}a(void 0)}))}}function ut(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return lt(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lt(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e){var n,t,o,a,l,s,c,u,d,f,v,x,p,y,g,b,j,S,w,k,A,C,I,L,E,O,F,T,M,W,G,D,B,$,z,N,H,Q,R,U,J,Y,K,V,_,X,ee,ne=e.location,te=e.capital,re=e.hero,ie=e.resources,oe=e.refetch,ae=(0,i.useState)(0),le=ae[0],se=ae[1],ce=(0,i.useState)(0),ue=ce[0],de=ce[1],he=(0,i.useState)(0),me=he[0],fe=he[1],ve=(0,i.useState)(0),xe=ve[0],pe=ve[1],ye=(0,i.useState)(!1),ge=ye[0],be=ye[1],je=ut((0,q.cK)(),1)[0],Ze=ut((0,q.ty)(),2),Se=Ze[0],we=Ze[1],ke=we.data,Ae=we.loading,Pe=(null===ne||void 0===ne?void 0:ne.owner)!==re.id,Ce=null===ne||void 0===ne||null===(n=ne.resources)||void 0===n?void 0:n.find((function(e){return"enlisted"===e.name})),Ie=null===ne||void 0===ne||null===(t=ne.resources)||void 0===t?void 0:t.find((function(e){return"soldier"===e.name})),Le=null===ne||void 0===ne||null===(o=ne.resources)||void 0===o?void 0:o.find((function(e){return"veteran"===e.name})),Ee=null===ne||void 0===ne||null===(a=ne.resources)||void 0===a?void 0:a.find((function(e){return"ghost"===e.name})),Oe={};function Fe(){return(Fe=ct(Z().mark((function e(){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Se({variables:{target:{x:ne.location.x,y:ne.location.y,map:ne.location.map},units:{enlisted:le,soldier:ue,veteran:me,ghost:xe}}});case 4:(null===(n=e.sent.data)||void 0===n?void 0:n.attackLocation)&&(be(!0),n.attackLocation.target.owner===re.id&&oe());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return ie.forEach((function(e){Oe[e.name]=e})),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ot,{open:ge,onClose:function(){return be(!1)},attackResults:null===ke||void 0===ke?void 0:ke.attackLocation,loading:Ae,hero:re}),(0,r.jsx)(h.Z,{variant:"h4",children:"Military actions"}),(0,r.jsx)(h.Z,{variant:"body1",children:"Use this UI to move your tropps or attack adjacent empires. You can only attack buildings owned by other players which are adjacent to your own. If you deal enough damage then the building will be converted over to your control."}),(0,r.jsx)("br",{}),(0,r.jsxs)(h.Z,{variant:"h6",component:"h4",children:["Remaining attacks: ",te.remainingAttacks]}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{variant:"h5",children:"Current target"}),!ne&&(0,r.jsx)(h.Z,{variant:"body1",children:"Select a target using the map."}),ne&&(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-target-location",children:"Location:"})," ",(0,r.jsxs)("span",{id:"military-target-location",children:[ne.location.x,", ",ne.location.y]})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-target-type",children:"Type:"})," ",(0,r.jsx)("span",{id:"military-target-type",children:ne.type})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-target-owner",children:"Owner:"})," ",(0,r.jsx)("span",{id:"military-target-owner",children:null===(l=ne.publicOwner)||void 0===l?void 0:l.name})]})]}),!ne&&(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-enlisted",children:"Enlisted:"})," ",(0,r.jsx)("span",{id:"military-target-enlisted",children:(null!==(w=null===(s=Oe.enlisted)||void 0===s?void 0:s.value)&&void 0!==w?w:0).toLocaleString()})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-soldier",children:"Soldier:"})," ",(0,r.jsx)("span",{id:"military-target-soldier",children:(null!==(k=null===(c=Oe.soldier)||void 0===c?void 0:c.value)&&void 0!==k?k:0).toLocaleString()})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-veteran",children:"Veteran:"})," ",(0,r.jsx)("span",{id:"military-target-veteran",children:(null!==(A=null===(u=Oe.veteran)||void 0===u?void 0:u.value)&&void 0!==A?A:0).toLocaleString()})]}),(null!==(C=null===(d=Oe.ghost)||void 0===d?void 0:d.value)&&void 0!==C?C:0)>0&&(0,r.jsxs)("li",{children:[(0,r.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-ghost",children:"Ghost:"})," ",(0,r.jsx)("span",{id:"military-target-ghost",children:(null!==(I=null===(f=Oe.ghost)||void 0===f?void 0:f.value)&&void 0!==I?I:0).toLocaleString()})]})]}),ne&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{variant:"h5",children:"Troups in this location"}),(0,r.jsxs)("ul",{children:[(null!==(L=null===Ce||void 0===Ce?void 0:Ce.value)&&void 0!==L?L:0)>0&&(0,r.jsxs)("li",{children:[(0,r.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-enlisted",children:"Enlisted:"})," ",(0,r.jsx)("span",{id:"military-target-enlisted",children:(null!==(E=null===Ce||void 0===Ce?void 0:Ce.value)&&void 0!==E?E:0).toLocaleString()})]}),(null!==(O=null===Ie||void 0===Ie?void 0:Ie.value)&&void 0!==O?O:0)>0&&(0,r.jsxs)("li",{children:[(0,r.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-soldier",children:"Soldier:"})," ",(0,r.jsx)("span",{id:"military-target-soldier",children:(null!==(F=null===Ie||void 0===Ie?void 0:Ie.value)&&void 0!==F?F:0).toLocaleString()})]}),(null!==(T=null===Le||void 0===Le?void 0:Le.value)&&void 0!==T?T:0)>0&&(0,r.jsxs)("li",{children:[(0,r.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-veteran",children:"Veteran:"})," ",(0,r.jsx)("span",{id:"military-target-veteran",children:(null!==(M=null===Le||void 0===Le?void 0:Le.value)&&void 0!==M?M:0).toLocaleString()})]}),(null!==(W=null===Ee||void 0===Ee?void 0:Ee.value)&&void 0!==W?W:0)>0&&(0,r.jsxs)("li",{children:[(0,r.jsx)("label",{style:{fontWeight:"bold"},htmlFor:"military-unit-info-ghost",children:"Ghost:"})," ",(0,r.jsx)("span",{id:"military-target-ghost",children:(null!==(G=null===Ee||void 0===Ee?void 0:Ee.value)&&void 0!==G?G:0).toLocaleString()})]})]}),(0,r.jsx)(h.Z,{mb:2,component:"h6",variant:"h5",children:"Troops to send"}),(0,r.jsxs)(m.ZP,{container:!0,columns:6,spacing:2,children:[(0,r.jsx)(ht,{name:"enlisted",value:le,onChange:se,max:Pe?null!==(D=null===(v=Oe.enlisted)||void 0===v?void 0:v.value)&&void 0!==D?D:0:Math.min(null!==(B=null===(x=Oe.enlisted)||void 0===x?void 0:x.value)&&void 0!==B?B:0,(null!==($=null===Ce||void 0===Ce?void 0:Ce.maximum)&&void 0!==$?$:0)-(null!==(z=null===Ce||void 0===Ce?void 0:Ce.value)&&void 0!==z?z:0))}),(0,r.jsx)(ht,{name:"soldier",value:ue,onChange:de,max:Pe?null!==(N=null===(p=Oe.soldier)||void 0===p?void 0:p.value)&&void 0!==N?N:0:Math.min(null!==(H=null===(y=Oe.soldier)||void 0===y?void 0:y.value)&&void 0!==H?H:0,(null!==(Q=null===Ie||void 0===Ie?void 0:Ie.maximum)&&void 0!==Q?Q:0)-(null!==(R=null===Ie||void 0===Ie?void 0:Ie.value)&&void 0!==R?R:0))}),(0,r.jsx)(ht,{name:"veteran",value:me,onChange:fe,max:Pe?null!==(U=null===(g=Oe.veteran)||void 0===g?void 0:g.value)&&void 0!==U?U:0:Math.min(null!==(J=null===(b=Oe.veteran)||void 0===b?void 0:b.value)&&void 0!==J?J:0,(null!==(Y=null===Le||void 0===Le?void 0:Le.maximum)&&void 0!==Y?Y:0)-(null!==(K=null===Le||void 0===Le?void 0:Le.value)&&void 0!==K?K:0))}),(0,r.jsx)(ht,{name:"ghost",value:xe,onChange:pe,max:Pe?null!==(V=null===(j=Oe.ghost)||void 0===j?void 0:j.value)&&void 0!==V?V:0:Math.min(null!==(_=null===(S=Oe.ghost)||void 0===S?void 0:S.value)&&void 0!==_?_:0,(null!==(X=null===Ee||void 0===Ee?void 0:Ee.maximum)&&void 0!==X?X:0)-(null!==(ee=null===Ee||void 0===Ee?void 0:Ee.value)&&void 0!==ee?ee:0))})]}),Pe&&(0,r.jsx)(P.Z,{onClick:function(){return Fe.apply(this,arguments)},children:"Attack target"}),!Pe&&(0,r.jsx)(P.Z,{onClick:function(){ne&&je({variables:{target:{x:ne.location.x,y:ne.location.y,map:ne.location.map},units:{enlisted:le,soldier:ue,veteran:me,ghost:xe}}})},children:"Move troops"})]})]})}function ht(e){var n=e.name,t=e.onChange,i=e.value,o=e.max;return 0===o?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.ZP,{item:!0,xs:1,children:(0,r.jsxs)("label",{id:"military-slider-".concat(n,"-label"),children:[(0,Ve.words)(n),":"]})}),(0,r.jsx)(m.ZP,{item:!0,xs:3,children:(0,r.jsx)(L.Z,{fullWidth:!0,children:(0,r.jsx)(rt.ZP,{value:i,onChange:function(e,n){return t(n)},min:0,max:o,valueLabelDisplay:"auto",getAriaValueText:function(e){return e.toLocaleString()},"aria-labelledby":"military-slider-".concat(n,"-label")})})}),(0,r.jsx)(m.ZP,{item:!0,xs:2,children:(0,r.jsx)(L.Z,{fullWidth:!0,children:(0,r.jsx)(tt.Z,{value:i,size:"small",onChange:function(e){return t(""===e.target.value?0:Number(e.target.value))},onBlur:function(){i<0?t(0):i>o&&t(o)},inputProps:{step:1,min:0,max:o,type:"number","aria-labelledby":"input-slider"}})})})]})}var mt,ft=t(947);function vt(e){var n=e.cellSize,t=e.x,i=e.y,o=e.boundingBox,a=e.onClick,l=e.adjacentTiles.find((function(e){return e.location.x===t&&e.location.y===i}));return l?(0,r.jsx)(Nn,{onClick:function(){return a(l)},hover:!0,cellSize:n,boundingBox:o,location:{x:t,y:i},tooltip:"Attack here",color:"rgb(140, 0, 0)",icon:(0,r.jsx)(ft.Z,{})},"".concat(t,"-").concat(i)):null}function xt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function pt(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function yt(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){pt(o,r,i,a,l,"next",e)}function l(e){pt(o,r,i,a,l,"throw",e)}a(void 0)}))}}function gt(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function bt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||Zt(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e){return function(e){if(Array.isArray(e))return xt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Zt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(e,n){if(e){if("string"===typeof e)return xt(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?xt(e,n):void 0}}var St=(gt(mt={},q.oS.Farm,(0,r.jsx)(On.Z,{})),gt(mt,q.oS.Shrine,(0,r.jsx)(In.Z,{})),gt(mt,q.oS.Apiary,(0,r.jsx)(Tn.Z,{})),gt(mt,q.oS.Garrison,(0,r.jsx)(ue.Z,{})),gt(mt,q.oS.Barracks,(0,r.jsx)(qn.Z,{})),mt);function wt(e){var n,t,o=e.hero,a=e.onClose,l=function(){S(null)},c=function(e){"destroy"===Q?S(e):"info"!==Q&&"military"!==Q||function(e){var n;A(null!==(n=null===e||void 0===e?void 0:e.id)&&void 0!==n?n:null)}(e)},u=bt((0,q.j9)(),2),f=u[0],v=u[1].loading,b=(0,i.useState)(null),j=b[0],S=b[1],w=(0,i.useState)(null),k=w[0],A=w[1],C=(0,i.useState)(null),I=C[0],L=C[1],E=(0,q.Dp)({pollInterval:6e4}),O=E.data,F=E.loading,T=E.refetch,M=(0,ce.Z)(),W=(0,Cn.Z)(M.breakpoints.up("sm")),G=(0,Cn.Z)(M.breakpoints.up("md")),D=(0,Cn.Z)(M.breakpoints.up("lg")),B=!W&&!G&&!D,$=W&&!G&&!D,z=W&&G&&!D,N=W&&G&&D,H=(0,i.useState)("info"),Q=H[0],R=H[1];if((0,i.useEffect)((function(){!o.home&&a&&a()}),[o.home,a]),!o.home)return null;if(F)return null;if(!O)return null;var U,J,Y,K,V,_=O.settlementManager,X=_.capital,ee=_.availableBuildings,ne=(_.availableUpgrades,_.range),te=_.adjacentTiles,re=X,ie=null!==(J=null!==(U=re.connections.find((function(e){return e.id===k})))&&void 0!==U?U:te.find((function(e){return e.id===k})))&&void 0!==J?J:null,oe=$n.apply(void 0,[re.resources].concat(jt(re.connections.map((function(e){return e.resources}))))),ae=null!==(Y=null===(n=oe.find((function(e){return"population"===e.name})))||void 0===n?void 0:n.value)&&void 0!==Y?Y:0,le=(K=null===(t=oe.find((function(e){return"food"===e.name})))||void 0===t?void 0:t.value,(V=jt(re.connections).concat([re]).map((function(e){return e.location}))).reduce((function(e,n){return e.min.x=Math.min(e.min.x,n.x),e.min.y=Math.min(e.min.y,n.y),e.max.x=Math.max(e.max.x,n.x),e.max.y=Math.max(e.max.y,n.y),e}),{min:{map:V[0].map,x:127,y:96},max:{map:V[0].map,x:0,y:0}})),se=le.max.x-le.min.x+5,ue=le.max.y-le.min.y+5,de=290;B||($?de=M.breakpoints.values.sm-60:z?de=M.breakpoints.values.md/2-40:N&&(de=M.breakpoints.values.lg/2-80));var he=8*Math.round(Math.min(de/se,de/ue)/8);function me(){return(me=yt(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,f({variables:{location:{x:j.location.x,y:j.location.y,map:j.location.map}}});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:return e.prev=9,S(null),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[2,7,9,12]])})))).apply(this,arguments)}var fe={};return re.connections.forEach((function(e){e.location.x in fe||(fe[e.location.x]={}),fe[e.location.x][e.location.y]=e})),(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)(tn.Z,{open:!!j,onClose:l,"aria-labelledby":"destroy-building-title","aria-describedby":"destroy-building-description",children:[(0,r.jsx)(ln.Z,{id:"destroy-building-title",children:"Destroy Building?"}),(0,r.jsx)(on.Z,{children:j&&(0,r.jsxs)(an.Z,{id:"destroy-building-description",children:["Are you sure you want to destroy the ",j.type," at"," ",j.location.x,", ",j.location.y,"?"]})}),(0,r.jsxs)(rn.Z,{children:[(0,r.jsx)(P.Z,{onClick:l,color:"info",children:"Cancel"}),(0,r.jsx)(sn.Z,{loading:v,onClick:function(){return me.apply(this,arguments)},color:"error",children:"Destroy"})]})]}),(0,r.jsx)(x.ZP,{value:Q,children:(0,r.jsxs)(m.ZP,{container:!0,columns:6,spacing:1,children:[(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsx)(h.Z,{variant:"h4",children:"Settlement Manager"})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)("b",{children:"Capital"}),": ",re.location.x,", ",re.location.y]})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)("b",{children:"Map tiles"}),":"," ",(re.connections.length+1).toLocaleString()]})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)("b",{children:"Range"}),": ",ne.toLocaleString()]})}),jt(oe).sort((function(e,n){return n.value-e.value})).map((function(e){return"stone"===e.name||"wood"===e.name||"food"===e.name||"water"===e.name?e.value<2*ae?(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsxs)(h.Z,{color:"error",children:[(0,r.jsx)("b",{children:(0,Ve.words)(e.name)}),":"," ",e.value.toLocaleString(),e.maximum&&" / ".concat(e.maximum.toLocaleString()),re.upkeep[e.name]>0&&"(-".concat(re.upkeep[e.name].toLocaleString(),")")]})},e.name):(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:[(0,r.jsx)("b",{children:(0,Ve.words)(e.name)}),":"," ",e.value.toLocaleString(),e.maximum&&" / ".concat(e.maximum.toLocaleString())," ",re.upkeep[e.name]>0&&"(-".concat(re.upkeep[e.name].toLocaleString(),")")]},e.name):(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:[(0,r.jsx)("b",{children:(0,Ve.words)(e.name)}),":"," ",e.value.toLocaleString(),e.maximum&&" / ".concat(e.maximum.toLocaleString())]},e.name)})),(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsxs)(p.Z,{"aria-label":"navigation tabs",variant:"scrollable",textColor:"secondary",indicatorColor:"secondary",onChange:function(e,n){I&&L(null),R(n)},sx:{flexShrink:0,flexGrow:1},children:[(0,r.jsx)(d.Z,{icon:(0,r.jsx)(Wn.Z,{}),label:"Building Details",value:"info",wrapped:!0}),(0,r.jsx)(d.Z,{icon:(0,r.jsx)(Ln.Z,{}),label:"Build Buildings",value:"build",wrapped:!0}),(0,r.jsx)(d.Z,{icon:(0,r.jsx)(Mn.Z,{}),label:"Destroy Buildings",value:"destroy",wrapped:!0}),(0,r.jsx)(d.Z,{icon:(0,r.jsx)(En.Z,{}),label:"Resource Market",value:"market",wrapped:!0}),(0,r.jsx)(d.Z,{icon:(0,r.jsx)(Gn.Z,{}),label:"Military",value:"military",wrapped:!0})]})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,md:3,lg:3,children:(0,r.jsxs)(s.Z,{sx:{position:"relative"},children:[(0,r.jsx)(h.Z,{variant:"h6",style:g.Z,children:"Buildings"}),(0,r.jsx)(Ge,{location:re.location,minimapSize:[se,ue],cellSize:he,renderCell:function(e){var n,t,i,o,a,l,s,u,d,h,m,f,v,x,p,y,g,b,j,Z,S,w,k,A,P,C,L,E,O,F,T,M,W,G,D,B,$,z,N,H,R,U,J,Y,K,V,_,X,ee,ie,oe,ae,se=e.x,ce=e.y,ue=!1,de=!1;(null===(n=fe[se])||void 0===n||null===(t=n[ce])||void 0===t?void 0:t.type)!==q.oS.Garrison&&(null===(i=fe[se-1])||void 0===i||null===(o=i[ce+1])||void 0===o?void 0:o.type)!==q.oS.Garrison&&(null===(a=fe[se+1])||void 0===a||null===(l=a[ce+1])||void 0===l?void 0:l.type)!==q.oS.Garrison&&(null===(s=fe[se-1])||void 0===s||null===(u=s[ce])||void 0===u?void 0:u.type)!==q.oS.Garrison&&(null===(d=fe[se+1])||void 0===d||null===(h=d[ce])||void 0===h?void 0:h.type)!==q.oS.Garrison&&(null===(m=fe[se-1])||void 0===m||null===(f=m[ce-1])||void 0===f?void 0:f.type)!==q.oS.Garrison&&(null===(v=fe[se+1])||void 0===v||null===(x=v[ce-1])||void 0===x?void 0:x.type)!==q.oS.Garrison&&(null===(p=fe[se])||void 0===p||null===(y=p[ce+1])||void 0===y?void 0:y.type)!==q.oS.Garrison&&(null===(g=fe[se])||void 0===g||null===(b=g[ce-1])||void 0===b?void 0:b.type)!==q.oS.Garrison&&(null===(j=fe[se])||void 0===j||null===(Z=j[ce+2])||void 0===Z?void 0:Z.type)!==q.oS.Garrison&&(null===(S=fe[se])||void 0===S||null===(w=S[ce-2])||void 0===w?void 0:w.type)!==q.oS.Garrison&&(null===(k=fe[se+2])||void 0===k||null===(A=k[ce])||void 0===A?void 0:A.type)!==q.oS.Garrison&&(null===(P=fe[se-2])||void 0===P||null===(C=P[ce])||void 0===C?void 0:C.type)!==q.oS.Garrison||(ue=!0),(null===(L=fe[se])||void 0===L||null===(E=L[ce])||void 0===E?void 0:E.type)!==q.oS.Barracks&&(null===(O=fe[se-1])||void 0===O||null===(F=O[ce+1])||void 0===F?void 0:F.type)!==q.oS.Barracks&&(null===(T=fe[se+1])||void 0===T||null===(M=T[ce+1])||void 0===M?void 0:M.type)!==q.oS.Barracks&&(null===(W=fe[se-1])||void 0===W||null===(G=W[ce])||void 0===G?void 0:G.type)!==q.oS.Barracks&&(null===(D=fe[se+1])||void 0===D||null===(B=D[ce])||void 0===B?void 0:B.type)!==q.oS.Barracks&&(null===($=fe[se-1])||void 0===$||null===(z=$[ce-1])||void 0===z?void 0:z.type)!==q.oS.Barracks&&(null===(N=fe[se+1])||void 0===N||null===(H=N[ce-1])||void 0===H?void 0:H.type)!==q.oS.Barracks&&(null===(R=fe[se])||void 0===R||null===(U=R[ce+1])||void 0===U?void 0:U.type)!==q.oS.Barracks&&(null===(J=fe[se])||void 0===J||null===(Y=J[ce-1])||void 0===Y?void 0:Y.type)!==q.oS.Barracks&&(null===(K=fe[se])||void 0===K||null===(V=K[ce+2])||void 0===V?void 0:V.type)!==q.oS.Barracks&&(null===(_=fe[se])||void 0===_||null===(X=_[ce-2])||void 0===X?void 0:X.type)!==q.oS.Barracks&&(null===(ee=fe[se+2])||void 0===ee||null===(ie=ee[ce])||void 0===ie?void 0:ie.type)!==q.oS.Barracks&&(null===(oe=fe[se-2])||void 0===oe||null===(ae=oe[ce])||void 0===ae?void 0:ae.type)!==q.oS.Barracks||(de=!0);var me=void 0;if(ue?(me="blue",de&&(me="green")):de&&(me="rgb(180, 200, 0)"),se===re.location.x&&ce===re.location.y)return(0,r.jsx)(Nn,{onClick:function(){return c(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){gt(e,n,t[n])}))}return e}({},re,{connections:[]}))},cellSize:he,boundingBox:le,location:re.location,tooltip:"Capital",bgcolor:me,icon:(0,r.jsx)(Fn.Z,{})});if(fe[se]&&fe[se][ce]){var ve,xe=fe[se][ce];return(0,r.jsx)(Nn,{hover:"destroy"===Q,onClick:function(){return c(xe)},cellSize:he,boundingBox:le,location:xe.location,tooltip:xe.type,bgcolor:me,icon:null!==(ve=St[xe.type])&&void 0!==ve?ve:(0,r.jsx)(In.Z,{})},xe.id)}return I?(0,r.jsx)(Jn,{x:se,y:ce,type:I,cellSize:he,boundingBox:le,capital:re,range:ne}):"military"===Q?(0,r.jsx)(vt,{x:se,y:ce,onClick:function(e){return c(e)},cellSize:he,boundingBox:le,adjacentTiles:te}):null}})]})}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,md:3,lg:3,children:[(0,r.jsxs)(y.Z,{value:"build",children:[(0,r.jsx)(h.Z,{variant:"h6",children:"Construct new buildings"}),(0,r.jsx)(h.Z,{variant:"subtitle2",sx:{mb:1},children:"Each building uses a map tile."}),(0,r.jsx)(hn.Z,{alignItems:"start",children:ee.map((function(e){return(0,r.jsxs)(_e.Z,{sx:{mb:3},children:[(0,r.jsx)(en.Z,{title:e.name}),(0,r.jsxs)(nn.Z,{children:[(0,r.jsx)(h.Z,{sx:{mb:1},children:e.description}),(0,r.jsx)(h.Z,{variant:"h6",children:"Cost to build"}),(0,r.jsx)("ul",{style:{margin:2},children:e.cost.map((function(e){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)("li",{children:[(0,r.jsxs)("label",{style:{fontWeight:"bold"},htmlFor:"cost-value-".concat(e.name),children:[(0,Ve.words)(e.name),":"]})," ",(0,r.jsx)("span",{id:"cost-value-".concat(e.name),children:e.value.toLocaleString()})]})},e.name)}))})]}),(0,r.jsx)(Xe.Z,{children:(0,r.jsx)(P.Z,{onClick:function(){return L(e.type)},variant:"contained",color:"success",children:"Build Building"},e.type)})]},e.name)}))})]}),(0,r.jsx)(y.Z,{value:"destroy",children:"Click on a location to demolish the building there. You will get nothing back, and this cannot be undone."}),(0,r.jsx)(y.Z,{value:"market",children:(0,r.jsx)(pn,{hero:o,camp:re,onBuyResource:function(){T()}})}),(0,r.jsxs)(y.Z,{value:"info",children:[(0,r.jsx)(h.Z,{variant:"h5",children:"Building Details"}),!ie&&(0,r.jsx)(h.Z,{variant:"body1",children:"Select a building from the map on the left to see details about it here."}),ie&&(0,r.jsx)(Xn,{location:ie,hero:o,onDestroy:S}),!ie&&(0,r.jsx)(Xn,{location:re,hero:o,onDestroy:S})]}),(0,r.jsx)(y.Z,{value:"military",children:(0,r.jsx)(dt,{location:ie,capital:re,resources:oe,hero:o,refetch:T})})]})]})})]})}function kt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function At(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Pt(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){At(o,r,i,a,l,"next",e)}function l(e){At(o,r,i,a,l,"throw",e)}a(void 0)}))}}function Ct(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return kt(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return kt(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var It={"random-aberration-unholy-paladin":"The darkness here isn't natural","random-aberration-thornbrute":"The overgrowth here is hostile and deadly","domari-aberration-1":"The ash in the air is so thick you can barely breathe","random-aberration-moving-mountain":"The ground itself threatens you"};function Lt(){var e,n,t,o,a,l=function(e,n){var t=Number(e),r=Number(n);NaN!==t&&NaN!==r&&Number.isFinite(t)&&Number.isFinite(r)&&(r=Math.min(95,Math.max(0,Math.round(r))),(t=Math.min(127,Math.max(0,Math.round(t))))!==x&&p(t),r!==g&&b(r))},s=D(),u=(0,i.useState)(!1),d=u[0],f=u[1],v=(0,i.useState)(-1),x=v[0],p=v[1],y=(0,i.useState)(-1),g=y[0],b=y[1],j=Ct((0,oe.gZ)(),2),S=j[0],w=j[1],k=Ct((0,q.gK)(),2),A=k[0],C=k[1].loading,I=Ct((0,q.Q8)(),2),L=I[0],E=I[1].loading,O=(0,q.Of)(),F=O.data,T=O.refetch,M=null!==(a=null===F||void 0===F||null===(e=F.monsters)||void 0===e||null===(n=e.map)||void 0===n?void 0:n.call(e,(function(e){return null!==(o=It[e.monster.id])&&void 0!==o?o:""})))&&void 0!==a?a:[],W=ae(),G=le(),$=function(){var e=ae(),n=(null===e||void 0===e?void 0:e.playerLocations)||[];return n.length?n[0]:null}(),z=(null===W||void 0===W?void 0:W.neighborTerrain.north)?W.neighborTerrain.north.terrain:"blocked",H=(null===W||void 0===W?void 0:W.neighborTerrain.south)?W.neighborTerrain.south.terrain:"blocked",Q=(null===W||void 0===W?void 0:W.neighborTerrain.east)?W.neighborTerrain.east.terrain:"blocked",R=(null===W||void 0===W?void 0:W.neighborTerrain.west)?W.neighborTerrain.west.terrain:"blocked";if((0,i.useEffect)((function(){s&&(p(s.location.x),b(s.location.y))}),[s]),!s)return null;if(d)return(0,r.jsx)(wt,{hero:s});var U=C||0===s.combat.health||S>0||E;function J(e){return Y.apply(this,arguments)}function Y(){return(Y=Pt(Z().mark((function e(n){var t,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A({variables:{direction:n}});case 3:T(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(t=e.t0.graphQLErrors[0])||void 0===t||null===(r=t.extensions)||void 0===r?void 0:r.delay)&&w(e.t0.graphQLErrors[0].extensions.remaining);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function K(){return(K=Pt(Z().mark((function e(){var n,t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L({variables:{x:x,y:g}});case 3:T(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(n=e.t0.graphQLErrors[0])||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.delay)&&w(e.t0.graphQLErrors[0].extensions.remaining);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var V,_=Math.round(Math.pow(5*(0,B.LW)(s.location,{x:x,y:g}),1.3));return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(m.ZP,{container:!0,columns:2,spacing:3,children:[(0,r.jsx)(m.ZP,{item:!0,xs:2,sm:1,children:(0,r.jsxs)(m.ZP,{container:!0,columns:6,spacing:3,children:[(0,r.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:(0,r.jsx)(Zn,{hero:s,onShowSettlement:function(){f(!0)}})}),(0,r.jsxs)(m.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:[(0,r.jsx)(h.Z,{variant:"h3",children:"Travel"}),s.combat.health>0&&(0,r.jsx)(h.Z,{children:"Use buttons to move around the map."}),0===s.combat.health&&(0,r.jsx)(h.Z,{component:"p",variant:"h6",children:"You cannot move while dead. Heal yourself in the Combat tab."})]}),(0,r.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(P.Z,{"aria-label":"North terrain: ".concat(z),disabled:U,variant:"contained",onClick:function(){return J(q.p$.North)},children:"North"})}),(0,r.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(P.Z,{"aria-label":"West terrain: ".concat(R),disabled:U,variant:"contained",onClick:function(){return J(q.p$.West)},children:"West"})}),(0,r.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsxs)(h.Z,{children:[s.location.x,", ",s.location.y]})}),(0,r.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(P.Z,{"aria-label":"East terrain: ".concat(Q),disabled:U,variant:"contained",onClick:function(){return J(q.p$.East)},children:"East"})}),(0,r.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(P.Z,{"aria-label":"South terrain: ".concat(H),disabled:U,variant:"contained",onClick:function(){return J(q.p$.South)},children:"South"})}),(0,r.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2}),s.stats.intelligence>100&&(0,r.jsxs)(m.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:[(0,r.jsx)(c.Z,{}),(0,r.jsx)(h.Z,{variant:"h5",component:"h3",color:"secondary",sx:{margin:1},children:"Teleport"}),(0,r.jsx)(N.Z,{label:"X coordinate",value:x,onChange:function(e){return l(e.target.value,g)},sx:{width:"100px",margin:1}}),(0,r.jsx)(N.Z,{label:"Y coordinate",value:g,onChange:function(e){return l(x,e.target.value)},sx:{width:"100px",margin:1}}),(0,r.jsx)("br",{}),(0,r.jsxs)(P.Z,{color:"secondary",variant:"outlined",onClick:function(){return K.apply(this,arguments)},disabled:0===_||_>s.stats.intelligence||U,children:["Teleport",(0,r.jsx)("br",{}),_>0&&"".concat(_.toLocaleString()," minimum intelligence")]})]})]})}),(0,r.jsxs)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,sm:1,children:[G&&(0,r.jsx)(h.Z,{variant:"h6",component:"h4",children:G.name}),G&&(0,r.jsx)(h.Z,{variant:"subtitle2",component:"p",children:G.type}),$&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(h.Z,{variant:"h6",component:"h4",children:[null!==(V=null===(t=$.publicOwner)||void 0===t?void 0:t.name)&&void 0!==V?V:"???","'s Settlement"]}),(0,r.jsx)(h.Z,{variant:"subtitle2",component:"p",children:$.type})]}),!G&&!$&&W&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.Z,{variant:"h6",component:"h4",children:"Wilderness"}),(0,r.jsx)(h.Z,{variant:"subtitle2",component:"p",children:W.terrain.terrain})]}),!G&&!$&&!W&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.Z,{variant:"h6",component:"h4",children:"\xa0"}),(0,r.jsx)(h.Z,{variant:"subtitle2",component:"p",children:"loading..."})]}),(0,r.jsx)(Ge,{location:s.location,renderCell:function(e){var n=e.x,t=e.y;return s.location.x===n&&s.location.y===t?(0,r.jsx)("div",{style:{borderRadius:"".concat(4,"px"),backgroundColor:"red",border:"2px solid rgba(255,255,255,0.3)",width:"".concat(8,"px"),height:"".concat(8,"px"),margin:"auto"}}):null}}),(null===G||void 0===G?void 0:G.description)&&G.description.map((function(e,n){return(0,r.jsx)(h.Z,{component:"h4",variant:"body1",children:e},"loc-desc-".concat(n))})),M.filter((function(e){return!!e})).map((function(e){return(0,r.jsx)(h.Z,{component:"h4",variant:"body1",children:e},e)}))]}),"dock"===(null===G||void 0===G?void 0:G.type)&&(0,r.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(ze,{location:G})}),(null===W||void 0===W?void 0:W.shop)&&(0,r.jsx)(m.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(Ue,{shop:null===W||void 0===W?void 0:W.shop})})]})})}var Et,Ot=t(5582);function Ft(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Tt(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Mt(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){Tt(o,r,i,a,l,"next",e)}function l(e){Tt(o,r,i,a,l,"throw",e)}a(void 0)}))}}function Wt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Ft(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ft(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(){var e=Wt((0,oe.gZ)(),2),n=e[0],t=e[1],o=(0,i.useState)(1),a=o[0],l=o[1],u=Wt((0,q.Y4)(),2),d=u[0],f=u[1].loading,v=D();(null===v||void 0===v?void 0:v.attributePoints)&&(a=Math.min(a,v.attributePoints));var x="Spending ".concat(a.toLocaleString()," attribute points");function p(e){return y.apply(this,arguments)}function y(){return(y=Mt(Z().mark((function e(n){var r,i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Leveling up...",n),e.prev=1,e.next=4,d({variables:{attribute:q.GC[n],amount:a}});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.graphQLErrors&&(null===(r=e.t0.graphQLErrors[0])||void 0===r||null===(i=r.extensions)||void 0===i?void 0:i.delay)&&t(e.t0.graphQLErrors[0].extensions.remaining);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(s.Z,{sx:{backgroundColor:"secondary.light"},children:[(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{variant:"h5",align:"center",children:"You have leveled up!"}),(0,r.jsxs)(Ot.Z,{children:[(0,r.jsx)(h.Z,{align:"center",children:"Each of your attributes increases by 1 when you level up. You may also choose an attribute to further increase."}),(0,r.jsx)(s.Z,{sx:{textAlign:"center",align:"center",ml:1,mr:1},children:v&&v.attributePoints>2&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.Z,{id:"level-up-stat-slider-label",children:x}),(0,r.jsx)(rt.ZP,{min:1,max:v.attributePoints,value:a,onChange:function(e,n){return!Array.isArray(n)&&l(n)},id:"level-up-stat-slider","aria-labelledby":"level-up-stat-slider-label",valueLabelDisplay:"auto"})]})})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(m.ZP,{container:!0,columns:14,spacing:2,children:[(0,r.jsx)(F.Z,{title:"Strength determines your damage when attacking with melee weapons",children:(0,r.jsx)(m.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(h.Z,{align:"center",children:(0,r.jsx)(P.Z,{id:"level-up-strength",disabled:f||n>0,onClick:function(){return p("Strength")},variant:"contained",children:"Strength"})})})}),(0,r.jsx)(F.Z,{title:"Dexterity determines the accuracy and dodge rate for melee and ranged weapons, it also determines ranged weapons damage",children:(0,r.jsx)(m.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(h.Z,{align:"center",children:(0,r.jsx)(P.Z,{id:"level-up-dexterity",disabled:f||n>0,onClick:function(){return p("Dexterity")},variant:"contained",children:"Dexterity"})})})}),(0,r.jsx)(F.Z,{title:"Constitution determines your max health, and is used in both attacking and defending blood magic",children:(0,r.jsx)(m.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(h.Z,{align:"center",children:(0,r.jsx)(P.Z,{id:"level-up-constitution",disabled:f||n>0,onClick:function(){return p("Constitution")},variant:"contained",children:"Constitution"})})})}),(0,r.jsx)(F.Z,{title:"Intelligence determines your spellcasting damage",children:(0,r.jsx)(m.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(h.Z,{align:"center",children:(0,r.jsx)(P.Z,{id:"level-up-intelligence",disabled:f||n>0,onClick:function(){return p("Intelligence")},variant:"contained",children:"Intelligence"})})})}),(0,r.jsx)(F.Z,{title:"Wisdom is your accuracy and dodge stat for spellcasting and smiting",children:(0,r.jsx)(m.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(h.Z,{align:"center",children:(0,r.jsx)(P.Z,{id:"level-up-wisdom",disabled:f||n>0,onClick:function(){return p("Wisdom")},variant:"contained",children:"Wisdom"})})})}),(0,r.jsx)(F.Z,{title:"Willpower helps you survive attacks by reducing damage, it also helps smiters deal deal more damage.",children:(0,r.jsx)(m.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(h.Z,{align:"center",children:(0,r.jsx)(P.Z,{id:"level-up-willpower",disabled:f||n>0,onClick:function(){return p("Willpower")},variant:"contained",children:"Willpower"})})})}),(0,r.jsx)(F.Z,{title:"Luck helps you critically strike foes and also affects item drop rates",children:(0,r.jsx)(m.ZP,{item:!0,xs:14,md:12,lg:2,children:(0,r.jsx)(h.Z,{align:"center",children:(0,r.jsx)(P.Z,{id:"level-up-luck",disabled:f||n>0,onClick:function(){return p("Luck")},variant:"contained",children:"Luck"})})})}),(0,r.jsx)(F.Z,{title:"Places 1 in every stat for a more well rounded character",children:(0,r.jsx)(m.ZP,{item:!0,xs:14,md:12,lg:2,children:(0,r.jsx)(h.Z,{align:"center",children:(0,r.jsx)(P.Z,{id:"level-up-all",disabled:f||n>0,onClick:function(){return p("All")},variant:"contained",children:"All"})})})})]}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]}),(0,r.jsx)(c.Z,{})]})}function qt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Dt(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Bt(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){Dt(o,r,i,a,l,"next",e)}function l(e){Dt(o,r,i,a,l,"throw",e)}a(void 0)}))}}function $t(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function zt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return qt(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qt(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Nt=($t(Et={},q.$7.MeleeWeapon,"Melee Weapon"),$t(Et,q.$7.RangedWeapon,"Ranged Weapon"),$t(Et,q.$7.SpellFocus,"Spell Focus"),$t(Et,q.$7.Shield,"Shield"),$t(Et,q.$7.BodyArmor,"Body Armor"),$t(Et,q.$7.HandArmor,"Gauntlets"),$t(Et,q.$7.LegArmor,"Leggings"),$t(Et,q.$7.HeadArmor,"Helmet"),$t(Et,q.$7.FootArmor,"Greaves"),Et);function Ht(e){var n;return null!==(n=Nt[e])&&void 0!==n?n:(0,B.qh)(e)}function Qt(e){var n=e.value,t=e.onChange,o=e.sellables,a=function(e){var n="string"===typeof e?e:e.baseItem,t=o.find((function(e){return e.id===n}));return t&&t.cost?function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){$t(e,n,t[n])}))}return e}({},t,{cost:Math.round(t.cost/3)}):null},l=D();if(!l)return null;var s=l.inventory.filter((function(e){return!e.enchantment})).filter((function(e){return e.type!==q.$7.Quest})).sort((function(e,n){return e.level-n.level})),c="Sell non-enchanted gear";return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"sell-shop-select-label",children:c}),(0,r.jsx)($.Z,{id:"sell-shop-select",labelId:"sell-shop-select-label",value:n||"",label:c,onChange:function(e){var n=e.target.value,r=l.inventory.find((function(e){return e.id===n}));if(r){var i=a(r);i&&i.cost&&t&&t({id:n,name:(0,B.GJ)(r),cost:i.cost})}},children:s.map((function(e){var n=a(e);return(0,r.jsxs)(z.Z,{value:e.id,disabled:!n||!!e.enchantment||(0,B.mQ)(l,e),children:[(null===n||void 0===n?void 0:n.cost)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{display:"inline-block",children:(0,B.GJ)(e)}),"\xa0",(0,r.jsxs)(h.Z,{variant:"caption",display:"inline-block",children:["Lvl. ",e.level]}),"\xa0",(0,r.jsxs)(h.Z,{variant:"subtitle2",display:"inline-block",sx:{color:"info.main"},children:[n.cost.toLocaleString()," Gold"]})]}),!(null===n||void 0===n?void 0:n.cost)&&e.name," ",(0,B.mQ)(l,e)&&"*EQUIPPED*"]},e.id)}))})]})})}function Rt(e){var n=e.type,t=e.items,i=e.value,o=e.onChange,a=D(),l=Ht(n),s="".concat(l," Shop");return a?(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"".concat(n,"-shop-select-label"),children:s}),(0,r.jsx)($.Z,{id:"".concat(n,"-shop-select"),labelId:"".concat(n,"-shop-select-label"),value:i||"",label:s,onChange:function(e){var n=e.target.value,r=t.find((function(e){return e.id===n}));o&&r&&r.cost&&o({id:n,name:r.name,cost:r.cost})},children:t.map((function(e){return e.id!==e.alias?null:(0,r.jsxs)(z.Z,{value:e.id,disabled:!e.cost||e.cost>a.gold,children:[e.cost&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{display:"inline-block",children:e.name}),"\xa0",(0,r.jsxs)(h.Z,{variant:"caption",display:"inline-block",children:["Lvl. ",e.level]}),"\xa0",(0,r.jsxs)(h.Z,{variant:"subtitle2",display:"inline-block",sx:{color:"info.main"},children:[e.cost.toLocaleString()," Gold"]})]}),!e.cost&&e.name]},e.id)}))})]}):null}function Ut(){var e=zt((0,oe.gZ)(),1)[0],n=(0,i.useState)(null),t=n[0],o=n[1],a=(0,i.useState)(""),l=a[0],s=a[1],u=(0,q.Cb)(),d=u.data,f=(u.loading,u.error,zt((0,q.Nn)(),2)),v=f[0],x=f[1].loading,p=zt((0,q.o_)(),2),y=p[0],g=p[1].loading||x||e>0;function b(){return(b=Bt(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,o(null),e.next=6,v({variables:{baseItem:t.id}});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function j(){return(j=Bt(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,o(null),e.next=6,y({variables:{item:t.id}});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}var S,w="Choose which shop to visit";return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(h.Z,{align:"center",children:["Welcome to the shop! You can buy and sell any non-enchanted items here.",(0,r.jsx)("br",{}),"The items purchasable here have a level from 1 to 32 but no enchantments or direct attribute increases."]}),(0,r.jsx)("br",{}),(0,r.jsx)(c.Z,{}),(0,r.jsx)("br",{}),(0,r.jsxs)(m.ZP,{container:!0,columns:6,spacing:2,children:[(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"shop-type-select-label",children:w}),(0,r.jsxs)($.Z,{id:"shop-type-select",labelId:"shop-type-select-label",label:w,onChange:function(e){s(e.target.value),o(null)},children:[(0,r.jsx)(z.Z,{value:"sell",children:"Sell Items"}),(0,r.jsx)(c.Z,{}),(0,r.jsxs)(z.Z,{value:q.$7.MeleeWeapon,children:[Ht(q.$7.MeleeWeapon)," Shop"]}),(0,r.jsxs)(z.Z,{value:q.$7.RangedWeapon,children:[Ht(q.$7.RangedWeapon)," Shop"]}),(0,r.jsxs)(z.Z,{value:q.$7.SpellFocus,children:[Ht(q.$7.SpellFocus)," Shop"]}),(0,r.jsxs)(z.Z,{value:q.$7.Shield,children:[Ht(q.$7.Shield)," Shop"]}),(0,r.jsxs)(z.Z,{value:q.$7.BodyArmor,children:[Ht(q.$7.BodyArmor)," Shop"]}),(0,r.jsxs)(z.Z,{value:q.$7.HandArmor,children:[Ht(q.$7.HandArmor)," Shop"]}),(0,r.jsxs)(z.Z,{value:q.$7.LegArmor,children:[Ht(q.$7.LegArmor)," Shop"]}),(0,r.jsxs)(z.Z,{value:q.$7.HeadArmor,children:[Ht(q.$7.HeadArmor)," Shop"]}),(0,r.jsxs)(z.Z,{value:q.$7.FootArmor,children:[Ht(q.$7.FootArmor)," Shop"]})]})]})}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,children:[""!==l&&"sell"!==l&&(0,r.jsx)(Rt,{value:t?t.id:"",type:l,items:function(e){var n;return(null===d||void 0===d||null===(n=d.shopItems)||void 0===n?void 0:n.length)?d.shopItems.filter((function(n){return n.type===e})):[]}(l),onChange:function(e){return o(e)}},l),"sell"===l&&(0,r.jsx)(Qt,{value:t?t.id:"",sellables:null!==(S=null===d||void 0===d?void 0:d.shopItems)&&void 0!==S?S:[],onChange:function(e){return o(e)}})]}),(0,r.jsx)(m.ZP,{item:!0,xs:6,children:t&&(0,r.jsxs)(P.Z,{variant:"contained",color:"sell"===l?"error":"success",fullWidth:!0,disabled:g,onClick:"sell"===l?function(){return j.apply(this,arguments)}:function(){return b.apply(this,arguments)},children:["sell"===l?"Sell":"Buy"," ",t.name," for"," ",t.cost.toLocaleString()," gold"]})})]}),(0,r.jsx)("br",{})]})}function Jt(){D();var e=ae();le();return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.Z,{variant:"h3",sx:{textAlign:"center"},children:"Item Shop"}),(0,r.jsx)(Ut,{}),(null===e||void 0===e?void 0:e.shop)&&(0,r.jsx)(Ue,{shop:null===e||void 0===e?void 0:e.shop})]})}function Yt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Kt(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Vt(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){Kt(o,r,i,a,l,"next",e)}function l(e){Kt(o,r,i,a,l,"throw",e)}a(void 0)}))}}function _t(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Yt(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Yt(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e){var n=e.hero,t=(e.disabled,_t((0,q.Nw)(),2)),o=t[0],a=(t[1].loading,n.level>=n.levelCap);function l(){return(l=Vt(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsxs)(s.Z,{sx:{padding:1,margin:1},children:[(0,r.jsx)(h.Z,{color:"secondary",variant:"h2",children:"Rebirth"}),!a&&(0,r.jsx)(h.Z,{children:"You may only be reborn when you are at level cap. Keep leveling up your character in order to be reborn!"}),a&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.Z,{children:"This will reset your character's level and attributes, however you will keep all gold and items and will receive special bonuses depending on your current level cap."}),(0,r.jsx)("br",{}),(0,r.jsx)(P.Z,{size:"large",variant:"outlined",color:"secondary",onClick:function(){return l.apply(this,arguments)},children:"Reset Character to Level 1"})]})]})}var er=t(5988),nr=t(9629);function tr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function rr(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function ir(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){rr(o,r,i,a,l,"next",e)}function l(e){rr(o,r,i,a,l,"throw",e)}a(void 0)}))}}function or(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return tr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tr(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(e){var n=e.hero,t=e.disabled,o=(0,i.useState)(""),a=o[0],l=o[1],s=(0,i.useState)(""),c=s[0],u=s[1],d=!!n.inventory.find((function(e){return(0,B.kJ)(e.baseItem)})),m=or((0,q.Pw)(),2),f=m[0],v=m[1].loading,x=n.inventory.filter((function(e){return e.type!==q.$7.Quest&&(!(0,B.mQ)(n,e)&&!!e.enchantment)})),p=x.filter((function(e){return""===c||e.enchantment===c})).sort(B.v4),y=x.filter((function(e){return!(0,B.mQ)(n,e)})).map((function(e){return e.enchantment})).reduce((function(e,n){return n?(e.indexOf(n)<0&&e.push(n),e):e}),[]),g="Select item to destroy",b=p.find((function(e){return e.id===a}));function j(){return(j=ir(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f({variables:{item:a}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return!b&&a.length&&(p.length?(b=p[0],a=b.id):a=""),(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.Z,{variant:"body1",children:"Select an enchanted item you would like to destroy, smashing it with the crafting hammer into fine Enchanting Dust."}),(0,r.jsx)("br",{}),(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"destroy-select-label",children:g}),(0,r.jsx)($.Z,{id:"destroy-select",labelId:"destroy-select-label",value:a||"",label:g,onChange:function(e){var t=e.target.value;n.inventory.find((function(e){return e.id===t}))&&l(t)},children:p.map((function(e){return(0,r.jsxs)(z.Z,{value:e.id,disabled:(0,B.mQ)(n,e),children:[(0,B.GJ)(e)," ",(0,B.mQ)(n,e)&&"*EQUIPPED*",e.enchantment&&(0,r.jsxs)(h.Z,{variant:"subtitle2",sx:{color:"info.main"},children:["\xa0",(0,B.Lt)(e.enchantment)]})]},e.id)}))}),(0,r.jsxs)(P.Z,{variant:"contained",disabled:!b||t||v,color:"error",onClick:function(){return j.apply(this,arguments)},children:[b&&(0,r.jsxs)(i.Fragment,{children:["Destroy ",(0,B.GJ)(b)]}),!b&&"Select Item"]})]}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),d&&(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"filter-select-label",children:"Filter by enchantment"}),(0,r.jsx)($.Z,{id:"filter-select",labelId:"filter-select-label",value:c||"",label:"Filter by enchantment",onChange:function(e){var t=e.target.value;n.inventory.find((function(e){return e.enchantment===t}))&&u(t)},children:y.map((function(e){return(0,r.jsxs)(z.Z,{value:e,children:[(0,B.uD)(e),"???"!==(0,B.Lt)(e)&&(0,r.jsxs)(h.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:["\xa0",(0,B.Lt)(e)]})]},e)}))})]})]})}function lr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function sr(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function cr(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){sr(o,r,i,a,l,"next",e)}function l(e){sr(o,r,i,a,l,"throw",e)}a(void 0)}))}}function ur(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||hr(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dr(e){return function(e){if(Array.isArray(e))return lr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||hr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(e,n){if(e){if("string"===typeof e)return lr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?lr(e,n):void 0}}function mr(e){var n=e.hero,t=e.disabled,o=(0,i.useState)(""),a=o[0],l=o[1],c=(0,i.useState)(""),u=c[0],d=c[1],m=ur((0,q.mE)(),2),f=m[0],v=m[1].loading,x=n.inventory.filter((function(e){return e.type!==q.$7.Quest&&!e.enchantment})).sort(B.v4),p={},y=dr(n.enchantments).sort().filter((function(e){var n;return p[e]?(p[e]=(null!==(n=p[e])&&void 0!==n?n:0)+1,!1):(p[e]=1,!0)})),g=x.find((function(e){return e.id===a}));!g&&a.length&&(x.length?(g=x[0],a=g.id):a="");var b=y.find((function(e){return e===u}));function j(){return(j=cr(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,f({variables:{item:a,enchantment:u}});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}!b&&u.length&&(y.length?(b=y[0],u=b):u="");var S=g?g.level:0,w="Select base item",k="Select an enchantment";return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.Z,{variant:"body1",children:"Enchanting allows you to combine a pure item and pure enchantment into a new enchanted item! You can acquire pure enchantments through disenchanting items."}),(0,r.jsx)("br",{}),(0,r.jsxs)(L.Z,{fullWidth:!0,sx:{margin:1},children:[(0,r.jsx)(E.Z,{id:"enchant-baseItem-select-label",children:w}),(0,r.jsx)($.Z,{id:"enchant-baseItem-select",labelId:"enchant-baseItem-select-label",value:a||"",label:w,onChange:function(e){var t=e.target.value;n.inventory.find((function(e){return e.id===t}))&&l(t)},children:x.map((function(e){return(0,r.jsxs)(z.Z,{value:e.id,children:[(0,B.GJ)(e),(0,B.mQ)(n,e)&&"*EQUIPPED*"]},e.id)}))})]}),(0,r.jsxs)(L.Z,{fullWidth:!0,sx:{margin:1},children:[(0,r.jsx)(E.Z,{id:"enchant-enchantment-select-label",children:k}),(0,r.jsx)($.Z,{id:"enchant-enchantment-select",labelId:"enchant-enchantment-select-label",value:u||"",label:k,onChange:function(e){var n=e.target.value,t=y.find((function(e){return n===e}));t&&d(t)},children:y.map((function(e){return(0,r.jsxs)(z.Z,{value:e,children:[(0,B.uD)(e)," ",p[e]&&p[e]>1&&"(".concat(p[e],")"),"???"!==(0,B.Lt)(e)&&(0,r.jsxs)(h.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:["\xa0",(0,B.Lt)(e)]})]},e)}))})]}),(0,r.jsxs)(P.Z,{fullWidth:!0,variant:"contained",disabled:!g||t||v||S>n.enchantingDust,color:"success",onClick:function(){return j.apply(this,arguments)},children:[g&&""!==u&&(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)(h.Z,{children:["Create ",(0,r.jsx)("b",{children:(0,B.GJ)(g,u)})]}),(0,r.jsxs)(h.Z,{variant:"subtitle2",children:["Costs ",S.toLocaleString()," Enchantment Dust"]})]}),!g&&"Select Item"]})]})}function fr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function vr(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function xr(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){vr(o,r,i,a,l,"next",e)}function l(e){vr(o,r,i,a,l,"throw",e)}a(void 0)}))}}function pr(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return fr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fr(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yr(e){var n=e.hero,t=e.disabled,o=(0,i.useState)(""),a=o[0],l=o[1],c=(0,i.useState)(""),u=c[0],d=c[1],m=!!n.inventory.find((function(e){return(0,B.kJ)(e.baseItem)})),f=pr((0,q.dg)(),2),v=f[0],x=f[1].loading,p=n.inventory.filter((function(e){return e.type!==q.$7.Quest&&(!(0,B.mQ)(n,e)&&!!e.enchantment)})),y=p.filter((function(e){return""===a||e.enchantment===a})).sort(B.v4),g=p.filter((function(e){return!(0,B.mQ)(n,e)})).map((function(e){return e.enchantment})).reduce((function(e,n){return n?(e.indexOf(n)<0&&e.push(n),e):e}),[]),b=y.find((function(e){return e.id===u}));function j(){return(j=xr(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v({variables:{item:u}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}!b&&u.length&&(y.length?(b=y[0],u=b.id):u="");var S="Select item to disenchant",w=b?b.level:0;return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.Z,{variant:"body1",children:"Select an item to split from its enchantment. You will keep both the base item and the enchantment itself for use in further crafting."}),(0,r.jsx)("br",{}),(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"disenchant-select-label",children:S}),(0,r.jsx)($.Z,{id:"disenchant-select",labelId:"disenchant-select-label",value:u||"",label:S,onChange:function(e){var t=e.target.value;n.inventory.find((function(e){return e.id===t}))&&d(t)},children:y.map((function(e){return(0,r.jsxs)(z.Z,{value:e.id,disabled:(0,B.mQ)(n,e),children:[(0,B.GJ)(e)," ",(0,B.mQ)(n,e)&&"*EQUIPPED*",e.enchantment&&(0,r.jsxs)(h.Z,{variant:"subtitle2",sx:{color:"info.main"},children:["\xa0",(0,B.Lt)(e.enchantment)]})]},e.id)}))}),(0,r.jsxs)(P.Z,{variant:"contained",disabled:!b||t||x||w>n.enchantingDust,color:"error",onClick:function(){return j.apply(this,arguments)},children:[b&&(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)(h.Z,{children:["Disenchant ",(0,r.jsx)("b",{children:(0,B.GJ)(b)})]}),(0,r.jsxs)(h.Z,{variant:"subtitle2",children:["Costs ",w.toLocaleString()," Enchantment Dust"]})]}),!b&&"Select Item"]})]}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),m&&(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"filter-select-label",children:"Filter by enchantment"}),(0,r.jsx)($.Z,{id:"filter-select",labelId:"filter-select-label",value:a||"",label:"Filter by enchantment",onChange:function(e){var t=e.target.value;n.inventory.find((function(e){return e.enchantment===t}))&&l(t)},children:g.map((function(e){return(0,r.jsxs)(z.Z,{value:e,children:[(0,B.uD)(e),"???"!==(0,B.Lt)(e)&&(0,r.jsxs)(h.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:["\xa0",(0,B.Lt)(e)]})]},e)}))})]})]})}var gr=t(3457),br=t(480),jr=t(9368);function Zr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Sr(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function wr(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Zr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Zr(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(e){var n=e.hero,t=e.disabled,o=(0,i.useState)(""),a=o[0],l=o[1],s=(0,i.useState)([]),c=s[0],u=s[1],d=wr((0,q.Xe)(),2),m=d[0],f=(d[1].loading,n.inventory.filter((function(e){return e.type!==q.$7.Quest&&(!e.enchantment&&e.level>31)})).sort(B.v4)),v=f.find((function(e){return e.id===a}));!v&&a.length&&(f.length?(v=f[0],a=v.id):a="");var x="Select base item",p=n.equipment.artifact;if(!p)return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(h.Z,{children:"You must have an artifact to imbue items with."})});var y,g=(0,B.Vy)(p);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{children:"Imbueing an item adds parts of an artifact onto a base item. Items can only be imbued once, and there is no way to remove the imbue. You may enchant an imbued item, however only unenchanted items can receive an imbue."}),(0,r.jsx)("br",{}),(0,r.jsxs)(L.Z,{fullWidth:!0,sx:{margin:1},children:[(0,r.jsx)(E.Z,{id:"enchant-baseItem-select-label",children:x}),(0,r.jsx)($.Z,{id:"enchant-baseItem-select",labelId:"enchant-baseItem-select-label",value:a||"",label:x,onChange:function(e){var t=e.target.value;n.inventory.find((function(e){return e.id===t}))&&l(t)},children:f.map((function(e){return(0,r.jsxs)(z.Z,{value:e.id,children:[(0,B.GJ)(e),(0,B.mQ)(n,e)&&"*EQUIPPED*"]},e.id)}))})]}),v&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.Z,{variant:"h5",children:[v.name," to be imbued with"," ",(0,r.jsx)("strong",{children:p.name})]}),(0,r.jsx)(h.Z,{variant:"subtitle1",children:"Select up to three affixes to activate on the item, each affix increases dust cost dramatically. The remaining affixes will be selected randomly from the remaining affixes."}),(0,r.jsx)(gr.Z,{children:g.map((function(e){return(0,r.jsx)(br.Z,{control:(0,r.jsx)(jr.Z,{disabled:c.length>=3&&!c.includes(e.type),onChange:function(n){var t=c.filter((function(n){return n!==e.type}));n.target.checked&&t.push(e.type),u(t)}}),label:(0,B.xq)(e)},e.type)}))})]}),(0,r.jsx)(sn.Z,{variant:"contained",disabled:t||!v||0===c.length,loading:t,onClick:(y=Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t&&v&&0!==c.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,m({variables:{item:v.id,artifact:p.id,affixes:c}});case 4:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(t,r){var i=y.apply(e,n);function o(e){Sr(i,t,r,o,a,"next",e)}function a(e){Sr(i,t,r,o,a,"throw",e)}o(void 0)}))}),children:"Imbue item"})]})}function Ar(e){var n=e.hero,t=e.disabled,o=(0,i.useState)("1"),a=o[0],l=o[1],u=n.inventory.some((function(e){return"pure-essence"===e.baseItem})),m=n.inventory.some((function(e){return"essence-of-void"===e.baseItem})),f=u&&m&&null!==n.equipment.artifact;return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(c.Z,{sx:{margin:2}}),(0,r.jsx)(h.Z,{variant:"h2",component:"h4",color:"secondary",children:"Crafting"}),(0,r.jsxs)(h.Z,{variant:"subtitle1",color:"secondary",children:["Enchanting Dust:"," ",(0,r.jsx)("span",{id:"hero-stats-enchanting-dust",children:n.enchantingDust.toLocaleString()})]}),(0,r.jsxs)(h.Z,{variant:"subtitle1",color:"secondary",children:["Enchantments:"," ",(0,r.jsx)("span",{id:"hero-stats-enchantments",children:n.enchantments.length.toLocaleString()})]}),(0,r.jsx)("br",{}),(0,r.jsx)(x.ZP,{value:a,children:(0,r.jsxs)(s.Z,{sx:{flexGrow:1,borderBottom:1,borderColor:"divider",display:"flex"},children:[(0,r.jsxs)(p.Z,{orientation:"vertical",onChange:function(e,n){return l(n)},"aria-label":"navigation tabs",variant:"scrollable",textColor:"secondary",indicatorColor:"secondary",sx:{flexShrink:0,flexGrow:0,width:"100px"},children:[(0,r.jsx)(d.Z,{icon:(0,r.jsx)(Mn.Z,{}),label:"Destroy",value:"1"}),(0,r.jsx)(d.Z,{icon:(0,r.jsx)(nr.Z,{}),label:"Disenchant",value:"2"}),(0,r.jsx)(d.Z,{icon:(0,r.jsx)(er.Z,{}),label:"Enchant",value:"3"}),f&&(0,r.jsx)(d.Z,{icon:(0,r.jsx)(er.Z,{}),label:"Imbue",value:"4"})]}),(0,r.jsxs)(y.Z,{value:"1",children:[(0,r.jsx)(h.Z,{variant:"h5",sx:g.Z,children:"Destroy Items"}),(0,r.jsx)(ar,{hero:n,disabled:t})]}),(0,r.jsxs)(y.Z,{value:"2",children:[(0,r.jsx)(h.Z,{variant:"h5",sx:g.Z,children:"Disenchant Items"}),(0,r.jsx)(yr,{hero:n,disabled:t})]}),(0,r.jsxs)(y.Z,{value:"3",children:[(0,r.jsx)(h.Z,{variant:"h5",sx:g.Z,children:"Enchant Items"}),(0,r.jsx)(mr,{hero:n,disabled:t})]}),f&&(0,r.jsxs)(y.Z,{value:"4",children:[(0,r.jsx)(h.Z,{variant:"h5",sx:g.Z,children:"Imbue Items"}),(0,r.jsx)(kr,{hero:n,disabled:t})]})]})})]})}function Pr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Cr(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Pr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pr(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ir(e){e.hero,e.disabled;var n=function(){var e,n=ae();return null!==(e=null===n||void 0===n?void 0:n.voidTravel)&&void 0!==e&&e}(),t=Cr((0,q.Rz)(),1)[0];return(0,r.jsxs)(s.Z,{sx:{padding:1,margin:1},children:[(0,r.jsx)(h.Z,{color:"secondary",variant:"h2",children:"Void Travel"}),(0,r.jsx)(h.Z,{sx:{mb:2},children:"Void dimensions have different rules than the overworld. While each void world which you visit may varry in mechanics, there is one common rule: Death in a void world results in immediate overworld rebirth."}),!n&&(0,r.jsx)(P.Z,{disabled:!0,size:"large",variant:"outlined",color:"error",children:"You must be near a void conduit"}),n&&(0,r.jsx)(P.Z,{size:"large",variant:"outlined",color:"secondary",onClick:function(){return t()},children:"Travel to the void"})]})}function Lr(e){var n,t=e.hero,o=e.slot,a=e.label,l=e.onEquip,s=e.disabled,c=null===(n=t.equipment[o])||void 0===n?void 0:n.id,u=["leftHand","rightHand","bodyArmor","handArmor","legArmor","headArmor","footArmor"].filter((function(e){return t.equipment[e]&&e!==o})).map((function(e){var n;return null===(n=t.equipment[e])||void 0===n?void 0:n.id})),d=(0,i.useState)(c||""),m=(d[0],d[1]),f=t.inventory.filter((function(e){return function(e,n){switch(e){case"rightHand":case"leftHand":return n.type===q.$7.MeleeWeapon||n.type===q.$7.RangedWeapon||n.type===q.$7.Shield||n.type===q.$7.SpellFocus;case"bodyArmor":return n.type===q.$7.BodyArmor;case"handArmor":return n.type===q.$7.HandArmor;case"legArmor":return n.type===q.$7.LegArmor;case"headArmor":return n.type===q.$7.HeadArmor;case"footArmor":return n.type===q.$7.FootArmor;default:return!1}}(o,e)})).sort(B.v4),v={};f.forEach((function(e){var n=(0,B.GJ)(e);v[n]?v[n]+=1:v[n]=1}));var x=Object.keys(v).map((function(e){return f.find((function(n){return(0,B.GJ)(n)===e}))})),p=f.find((function(e){return e.id===c}));return p&&!x.find((function(e){return e.id===c}))&&(x.push(p),v[(0,B.GJ)(p)]-=1),u.forEach((function(e){var n=x.find((function(n){return n.id===e}));if(n){var t=(0,B.GJ)(n);if(v[t]>1){var r=f.find((function(n){return(0,B.GJ)(n)===t&&n.id!==e}));r&&(x.push(r),v[t]-=1)}}})),x.sort(B.v4),(0,r.jsx)(i.Fragment,{children:(0,r.jsx)("div",{children:(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"".concat(o,"-equip-select-label"),children:a}),(0,r.jsx)($.Z,{id:"".concat(o,"-equip-select"),labelId:"".concat(o,"-equip-select-label"),value:c||"",label:a,disabled:s,onChange:function(e){m(e.target.value),l(o,e.target.value)},children:x.map((function(e){return(0,r.jsxs)(z.Z,{value:e.id,disabled:u.indexOf(e.id)>=0,children:[e.id===c?(0,r.jsx)("b",{children:(0,B.GJ)(e)}):(0,r.jsxs)(r.Fragment,{children:[(0,B.GJ)(e),v[(0,B.GJ)(e)]>1&&-1===u.indexOf(e.id)?" x".concat(v[(0,B.GJ)(e)]):""]}),(0,r.jsxs)(h.Z,{variant:"caption",sx:{color:"info.secondary"},children:["\xa0Lvl. ",e.level]}),e.enchantment&&(0,r.jsxs)(h.Z,{variant:"subtitle2",sx:{color:"info.main"},children:["\xa0",(0,B.Lt)(e.enchantment)]})]},e.id)}))})]})})})}function Er(e){var n=e.hero,t=e.disabled,o=e.onChange,a=(0,i.useState)(""),l=a[0],s=a[1],c=n.inventory.filter((function(e){return e.type===q.$7.Quest})).sort((function(e,n){return n.level-e.level})),u="Quest items (passive, always active)",d=n.inventory.find((function(e){return e.id===l}));(0,i.useEffect)((function(){l.length&&!d&&s("")}),[d,l]);var m={};c.forEach((function(e){var n=(0,B.GJ)(e);m[n]?m[n]+=1:m[n]=1}));var f=Object.keys(m).map((function(e){return c.find((function(n){return(0,B.GJ)(n)===e}))}));return(0,r.jsx)(i.Fragment,{children:(0,r.jsx)("div",{children:(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"quest-item-label",children:u}),(0,r.jsx)($.Z,{id:"quest-item",labelId:"quest-item-label",value:l,label:u,disabled:t,onChange:function(e){if(s(e.target.value),o){var n=c.find((function(n){return n.id===e.target.value}));n&&o(n.baseItem)}},children:f.map((function(e){return(0,r.jsxs)(z.Z,{value:e.id,children:[(0,r.jsxs)(r.Fragment,{children:[(0,B.GJ)(e),m[(0,B.GJ)(e)]>1?" x".concat(m[(0,B.GJ)(e)]):""]}),"???"!==(0,B.Lt)(e.baseItem)&&(0,r.jsxs)(h.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:["\xa0",(0,B.Lt)(e.baseItem)]})]},e.id)}))})]})})})}function Or(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Fr(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Tr(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){Fr(o,r,i,a,l,"next",e)}function l(e){Fr(o,r,i,a,l,"throw",e)}a(void 0)}))}}function Mr(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Or(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Or(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(){var e,n,t,o,a,l,s,c,u,d,f,v,x,p,y,g,b,j,S,w,k,A,P,C,I,L,E,O,F,T=Mr((0,oe.gZ)(),1)[0],M=Mr((0,q.aP)(),2),W=M[0],G=M[1].loading,$=(0,i.useState)(""),z=$[0],N=$[1],H=D(),Q=G||T>0;if(!H)return null;function R(e,n){return U.apply(this,arguments)}function U(){return(U=Tr(Z().mark((function e(n,t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W({variables:{item:t,slot:n}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(m.ZP,{container:!0,columns:6,spacing:1,children:[(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsx)(h.Z,{variant:"h3",sx:{fontSize:"1.2rem"},children:"Equipped items"})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Lr,{hero:H,slot:"leftHand",label:"Left Hand",onEquip:R,disabled:Q})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Lr,{hero:H,slot:"rightHand",label:"Right Hand",onEquip:R,disabled:Q})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Lr,{hero:H,slot:"bodyArmor",label:"Body Armor",onEquip:R,disabled:Q})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Lr,{hero:H,slot:"handArmor",label:"Gauntlets",onEquip:R,disabled:Q})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Lr,{hero:H,slot:"legArmor",label:"Leggings",onEquip:R,disabled:Q})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Lr,{hero:H,slot:"headArmor",label:"Helmets",onEquip:R,disabled:Q})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Lr,{hero:H,slot:"footArmor",label:"Greaves",onEquip:R,disabled:Q})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Er,{hero:H,disabled:Q,onChange:N})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(Y,{title:null===(e=H.equipment.artifact)||void 0===e?void 0:e.name,artifact:H.equipment.artifact}),(0,r.jsx)(Y,{title:H.equipment.leftHand?(0,B.GJ)(H.equipment.leftHand,null):null,artifact:null===(n=H.equipment.leftHand)||void 0===n||null===(t=n.imbue)||void 0===t?void 0:t.artifact,affixes:null===(o=H.equipment.leftHand)||void 0===o||null===(a=o.imbue)||void 0===a?void 0:a.affixes}),(0,r.jsx)(Y,{title:H.equipment.rightHand?(0,B.GJ)(H.equipment.rightHand,null):null,artifact:null===(l=H.equipment.rightHand)||void 0===l||null===(s=l.imbue)||void 0===s?void 0:s.artifact,affixes:null===(c=H.equipment.rightHand)||void 0===c||null===(u=c.imbue)||void 0===u?void 0:u.affixes}),(0,r.jsx)(Y,{title:H.equipment.bodyArmor?(0,B.GJ)(H.equipment.bodyArmor,null):null,artifact:null===(d=H.equipment.bodyArmor)||void 0===d||null===(f=d.imbue)||void 0===f?void 0:f.artifact,affixes:null===(v=H.equipment.bodyArmor)||void 0===v||null===(x=v.imbue)||void 0===x?void 0:x.affixes}),(0,r.jsx)(Y,{title:H.equipment.handArmor?(0,B.GJ)(H.equipment.handArmor,null):null,artifact:null===(p=H.equipment.handArmor)||void 0===p||null===(y=p.imbue)||void 0===y?void 0:y.artifact,affixes:null===(g=H.equipment.handArmor)||void 0===g||null===(b=g.imbue)||void 0===b?void 0:b.affixes}),(0,r.jsx)(Y,{title:H.equipment.legArmor?(0,B.GJ)(H.equipment.legArmor,null):null,artifact:null===(j=H.equipment.legArmor)||void 0===j||null===(S=j.imbue)||void 0===S?void 0:S.artifact,affixes:null===(w=H.equipment.legArmor)||void 0===w||null===(k=w.imbue)||void 0===k?void 0:k.affixes}),(0,r.jsx)(Y,{title:H.equipment.headArmor?(0,B.GJ)(H.equipment.headArmor,null):null,artifact:null===(A=H.equipment.headArmor)||void 0===A||null===(P=A.imbue)||void 0===P?void 0:P.artifact,affixes:null===(C=H.equipment.headArmor)||void 0===C||null===(I=C.imbue)||void 0===I?void 0:I.affixes}),(0,r.jsx)(Y,{title:H.equipment.footArmor?(0,B.GJ)(H.equipment.footArmor,null):null,artifact:null===(L=H.equipment.footArmor)||void 0===L||null===(E=L.imbue)||void 0===E?void 0:E.artifact,affixes:null===(O=H.equipment.footArmor)||void 0===O||null===(F=O.imbue)||void 0===F?void 0:F.affixes})]})}),H.level===H.levelCap&&(0,B.jr)(z)&&(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsx)(Xt,{hero:H,disabled:Q})}),(0,B.OB)(z)&&(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsx)(Ar,{hero:H,disabled:Q})}),(0,B.jj)(z)&&(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsx)(Ir,{hero:H,disabled:Q})})]})})}function Gr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function qr(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Gr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Gr(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(e){var n=function(){o()},t=e.event.message,i=qr((0,q.PF)(),2),o=i[0],a=i[1].loading;return(0,r.jsx)(f.a,{children:(0,r.jsxs)(tn.Z,{open:!0,onClose:n,"aria-labelledby":"quest-event-title","aria-describedby":"quest-event-description",children:[(0,r.jsx)(ln.Z,{id:"quest-event-title",children:"Quest Event"}),(0,r.jsx)(on.Z,{id:"quest-event-description",children:t&&t.map((function(e,n){return(0,r.jsx)(an.Z,{children:e},"".concat(n))}))}),(0,r.jsx)(rn.Z,{children:(0,r.jsx)(P.Z,{variant:"contained",color:"error",onClick:n,disabled:a,children:"Continue"})})]})})}var Br=t(461),$r=t(8895),zr=t(2797),Nr=t(3508),Hr=t(888),Qr=t(8304);function Rr(e){var n,t,o,a,l,c=e.quest,d=(0,i.useState)(!1),m=(d[0],d[1],(0,q.QT)({variables:(null===c||void 0===c||null===(n=c.lastEvent)||void 0===n?void 0:n.quest)?{quest:null===c||void 0===c||null===(t=c.lastEvent)||void 0===t?void 0:t.quest}:void 0,skip:!(null===c||void 0===c||null===(o=c.lastEvent)||void 0===o?void 0:o.quest)})),f=m.data,v=m.loading;if(!(null===c||void 0===c||null===(a=c.lastEvent)||void 0===a?void 0:a.quest)||v||!f)return(0,r.jsx)("div",{});var x=f.quest,p=c.progress||1;return p=Math.log2(p),(0,r.jsxs)(Br.Z,{children:[(0,r.jsx)($r.Z,{expandIcon:(0,r.jsx)(Nr.Z,{}),children:(0,r.jsxs)(hn.Z,{direction:"row",sx:{width:"100%"},spacing:1,children:[c.finished&&(0,r.jsx)(Hr.Z,{}),!c.finished&&(0,r.jsx)(Qr.Z,{}),(0,r.jsxs)(hn.Z,{sx:{width:"100%"},children:[(0,r.jsx)(h.Z,{sx:{lineHeight:3},children:(0,B.qh)(x.id)}),(0,r.jsx)(u.Z,{variant:"determinate",color:c.finished?"success":"secondary",value:c.finished?100:100*p/(p+1)})]})]})}),(0,r.jsxs)(zr.Z,{children:[(0,r.jsx)(h.Z,{children:x.description}),(null===(l=c.lastEvent)||void 0===l?void 0:l.message)&&(0,r.jsxs)(s.Z,{sx:{bgcolor:"warning.light",color:"warning.contrast",margin:2,padding:2},children:[(0,r.jsx)(h.Z,{variant:"h6",children:"Last event:"}),c.lastEvent.message.map((function(e,n){return(0,r.jsx)(h.Z,{sx:{fontStyle:"italic"},children:e},"".concat(n))}))]})]})]})}function Ur(){var e=D();if(!e)return null;var n=e.questLog;e.currentQuest;return 2===Object.values(n).filter((function(e){return!!e})).length?(0,r.jsx)(s.Z,{children:"You have not yet started any quests. Explore the world and grow stronger."}):(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(h.Z,{variant:"h4",children:"Quest Log"}),(0,r.jsx)("br",{}),Object.values(n).filter((function(e){return!!e&&"string"!==typeof e})).sort((function(e,n){return e.finished?n.finished?n.progress-e.progress:1:n.finished?-1:n.progress-e.progress})).map((function(e){return e&&"string"!==typeof e?(0,r.jsx)(Rr,{quest:e},e.id):null}))]})}function Jr(e,n){return"".concat((Math.round(e/n*1e3)/10).toLocaleString(),"%")}function Yr(e){var n=e.stats,t=e.skills;return(0,r.jsx)(s.Z,{children:(0,r.jsxs)(m.ZP,{container:!0,columns:6,spacing:2,children:[(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Strength"}),": ",n.stats.strength.toLocaleString()]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Dexterity"}),": ",n.stats.dexterity.toLocaleString()]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Constitution"}),": ",n.stats.constitution.toLocaleString()]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Intelligence"}),": ",n.stats.intelligence.toLocaleString()]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Wisdom"}),": ",n.stats.wisdom.toLocaleString()]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Willpower"}),": ",n.stats.willpower.toLocaleString()]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Luck"}),": ",n.stats.luck.toLocaleString()]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Bonus Armor"}),": ",Jr(n.damageReduction-1,1)]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Bonus Damage"}),":"," ",Jr(n.damageAmplification-1,1)]}),(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsx)(m.ZP,{})}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Attacking Accuracy"}),": ",t.attackingAccuracy.toLocaleString()]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Attacking Damage"}),": ",t.attackingDamage.toLocaleString()]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Casting Accuracy"}),": ",t.castingAccuracy.toLocaleString()]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Casting Damage"}),": ",t.castingDamage.toLocaleString()]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Vitality"}),": ",t.vitality.toLocaleString()]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Resilience"}),": ",t.resilience.toLocaleString()]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Regeneration"}),": ",t.regeneration.toLocaleString()]}),(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsx)(m.ZP,{})}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Strength"}),":"," ",Jr(n.enemyStats.strength-1e6,1e6)]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Dexterity"}),":"," ",Jr(n.enemyStats.dexterity-1e6,1e6)]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Constitution"}),":"," ",Jr(n.enemyStats.constitution-1e6,1e6)]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Intelligence"}),":"," ",Jr(n.enemyStats.intelligence-1e6,1e6)]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Wisdom"}),":"," ",Jr(n.enemyStats.wisdom-1e6,1e6)]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Willpower"}),":"," ",Jr(n.enemyStats.willpower-1e6,1e6)]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Luck"}),":"," ",Jr(n.enemyStats.luck-1e6,1e6)]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Armor Reduction"}),":"," ",Jr(n.armorReduction-1,1)]})]})})}function Kr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Vr(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function _r(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){Vr(o,r,i,a,l,"next",e)}function l(e){Vr(o,r,i,a,l,"throw",e)}a(void 0)}))}}function Xr(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Kr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Kr(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ei(e){var n=e.hero,t=Xr((0,q.w3)(),1)[0],o=(0,i.useState)(n.settings.autoDust),a=o[0],l=o[1];function s(){return(s=_r(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({variables:{value:a}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(m.ZP,{container:!0,columns:6,children:[(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsx)(h.Z,{variant:"h5",children:"Autodust"})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsx)(h.Z,{variant:"subtitle2",children:"Automatically destroy enchanted items as they drop off monsters if they are at or below the following level."})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsx)(N.Z,{label:"Gear Level",value:a,onChange:function(e){return function(e){var n=Math.round(Number(e));!isNaN(n)&&Number.isFinite(n)&&l(n)}(e.target.value)}})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,children:(0,r.jsx)(P.Z,{onClick:function(){return s.apply(this,arguments)},children:"Save"})})]})})}function ni(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ti(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return ni(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ni(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ri={attackingAccuracy:"Attacking Accuracy",attackingDamage:"Attacking Damage",castingAccuracy:"Casting Accuracy",castingDamage:"Casting Damage",vitality:"Vitality",resilience:"Resilience",regeneration:"Regeneration"};function ii(e){var n=e.hero,t=(0,i.useState)(n.skillPercent),o=t[0],a=t[1],l=ti((0,q.Xx)(),2),s=l[0],c=l[1].loading,u=ti((0,q.hv)(),2),d=u[0],m=u[1].loading;return(0,r.jsxs)("div",{children:[(0,r.jsx)(h.Z,{variant:"h4",children:"Skills"}),(0,r.jsx)(h.Z,{sx:{mb:1},children:"Select which skill you would like to improve, as well as percentage of how devoted your character is to leveling it up as opposed to receiving experience. This means that incoming experience is reduced by the percentage, however the amount of experience you gain doesn't affect the chances of gaining a skill level."}),(0,r.jsxs)(L.Z,{sx:{mb:5},children:[(0,r.jsx)(E.Z,{id:"active-skill-select-label",children:"Active Skill"}),(0,r.jsx)($.Z,{labelId:"active-skill-select-label",id:"active-skill-select",value:n.activeSkill,label:"Active Skill",disabled:c,onChange:function(e){return s({variables:{skill:e.target.value}})},children:Object.values(q.lq).map((function(e){return(0,r.jsx)(z.Z,{value:e,children:ri[e]},e)}))})]}),(0,r.jsxs)(L.Z,{fullWidth:!0,children:[(0,r.jsx)(rt.ZP,{value:o,step:1,getAriaValueText:function(e){return"".concat(e,"%")},onChange:function(e,n){return!Array.isArray(n)&&a(n)},"aria-label":"Percent experience towards skills",valueLabelDisplay:"on",disabled:m}),(0,r.jsx)(P.Z,{disabled:m,onClick:function(){return d({variables:{percent:o}})},children:"Save Percent"})]})]})}function oi(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ai(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function li(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){ai(o,r,i,a,l,"next",e)}function l(e){ai(o,r,i,a,l,"throw",e)}a(void 0)}))}}function si(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return oi(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oi(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ci(e){var n,t=e.hero,o=e.stat,a=(0,i.useState)(null!==(n=t.settings.minimumStats[o])&&void 0!==n?n:10),l=a[0],s=a[1],c=si((0,q.Rw)(),1)[0];function u(){return(u=li(Z().mark((function e(n){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Number(n),!isNaN(t)&&Number.isFinite(t)){e.next=3;break}return e.abrupt("return");case 3:t=Math.max(1,Math.min(2e9,t)),s(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=li(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{name:o,value:l}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(m.ZP,{item:!0,md:1,xs:2,children:["".concat(o.substr(0,1).toUpperCase()).concat(o.substr(1)),":"]}),(0,r.jsx)(m.ZP,{item:!0,xs:1,sm:2,children:(0,r.jsx)(N.Z,{fullWidth:!0,label:"Minimum ".concat(o),value:l,onChange:function(e){return function(e){return u.apply(this,arguments)}(e.target.value)}})}),(0,r.jsx)(m.ZP,{item:!0,md:3,sm:2,xs:3,children:(0,r.jsxs)(P.Z,{onClick:function(){return d.apply(this,arguments)},children:["Set minimum ",o]})})]})}function ui(){var e=D();return e?(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(h.Z,{variant:"h2",children:"Settings"}),(0,r.jsx)(h.Z,{variant:"subtitle2",sx:{mb:1},children:"Configure your mysterious automation"}),(0,r.jsx)(ii,{hero:e}),(0,r.jsx)(h.Z,{variant:"h5",children:"Minimum Stats"}),(0,r.jsx)(h.Z,{variant:"subtitle2",children:"Prevents transfering from lowering your stats below these values..."}),(0,r.jsxs)(m.ZP,{container:!0,columns:6,spacing:2,children:[(0,r.jsx)(ci,{hero:e,stat:"strength"}),(0,r.jsx)(ci,{hero:e,stat:"dexterity"}),(0,r.jsx)(ci,{hero:e,stat:"constitution"}),(0,r.jsx)(ci,{hero:e,stat:"intelligence"}),(0,r.jsx)(ci,{hero:e,stat:"wisdom"}),(0,r.jsx)(ci,{hero:e,stat:"willpower"}),(0,r.jsx)(ci,{hero:e,stat:"luck"})]}),(0,r.jsx)(ei,{hero:e})]}):(0,r.jsx)("div",{})}function di(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function hi(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return di(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return di(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var mi=l()((function(){return t.e(290).then(t.bind(t,8290))}),{loadableGenerated:{webpack:function(){return[8290]}}});function fi(){var e,n,t,a,l,j,Z=(0,o.useRouter)(),S=Z.route.split("/").pop(),w=hi((0,Oe.d)(),2),k=w[0],A=(w[1],(0,q.UE)({fetchPolicy:"cache-only"})),P=A.data,C=A.loading,I=A.error,L=(0,i.useState)(null!==S&&void 0!==S?S:"play"),E=L[0],O=L[1],F=(0,q.Wg)({pollInterval:3e4}).data,T=null!==(l=null===P||void 0===P||null===(e=P.me)||void 0===e||null===(n=e.account)||void 0===n?void 0:n.hero)&&void 0!==l?l:null,M=null!==(j=null===P||void 0===P||null===(t=P.me)||void 0===t||null===(a=t.account)||void 0===a?void 0:a.access)&&void 0!==j?j:null;if((0,i.useEffect)((function(){!I&&k||Z.push("/?auth=".concat(Z.asPath))}),[I,k]),I||!k)return(0,r.jsx)(b.A,{children:(0,r.jsxs)(f.a,{children:[(0,r.jsx)("br",{}),"Redirecting..."]})});if(C)return(0,r.jsx)(b.A,{children:(0,r.jsx)(f.a,{children:C&&(0,r.jsx)(u.Z,{})})});var W=!!(null===T||void 0===T?void 0:T.inventory.find((function(e){return(0,B.r_)(e.baseItem)})));return(0,r.jsx)(b.A,{showHero:!0,children:(0,r.jsxs)(f.a,{children:[(0,r.jsxs)(i.Fragment,{children:[T&&T.attributePoints>0&&(0,r.jsx)(Gt,{}),T&&T.currentQuest&&(0,r.jsx)(Dr,{event:T.currentQuest})]}),(0,r.jsxs)(s.Z,{sx:{width:"100%",typography:"body1"},children:[(0,r.jsxs)(x.ZP,{value:E,children:[(0,r.jsxs)(s.Z,{sx:{borderBottom:1,borderColor:"divider"},children:[(0,r.jsx)(h.Z,{variant:"h1",sx:g.Z,children:"Navigation"}),(0,r.jsxs)(p.Z,{onChange:function(e,n){"play"===n?Z.push("/play","/play",{scroll:!1}):Z.push("/play/".concat(n),"/play/".concat(n),{scroll:!1}),O(n)},"aria-label":"navigation tabs",variant:"scrollable",children:[(0,r.jsx)(d.Z,{label:"Welcome",value:"play"}),(0,r.jsx)(d.Z,{label:"Combat",value:"combat"}),!(!(null===T||void 0===T?void 0:T.inventory.length)&&!(null===T||void 0===T?void 0:T.gold))&&(0,r.jsx)(d.Z,{label:"Shop",value:"shop"}),!!(null===T||void 0===T?void 0:T.inventory.length)&&(0,r.jsx)(d.Z,{label:"Inventory",value:"inventory"}),(0,r.jsx)(d.Z,{label:"Map",value:"map"}),T&&Object.values(T.questLog).filter((function(e){return!!e})).length>2&&(0,r.jsx)(d.Z,{label:"Quests",value:"quests"}),W&&(0,r.jsx)(d.Z,{label:"Settings",value:"settings"}),M===q.Ks.Admin&&(0,r.jsx)(d.Z,{label:"Admin",value:"admin"})]})]}),(0,r.jsx)(y.Z,{value:"play",children:(0,r.jsxs)(m.ZP,{container:!0,columns:12,spacing:4,children:[(0,r.jsxs)(m.ZP,{item:!0,xs:12,sm:7,md:8,children:[(0,r.jsxs)(h.Z,{variant:"h2",sx:{mb:2,fontSize:"1.8rem"},children:["Welcome to ",(0,r.jsx)("b",{children:"Proof of Combat"}),"!"]}),(0,r.jsxs)(h.Z,{variant:"subtitle1",sx:g.Z,children:["This text is only available to screen readers. Thank you for trying out my game! If you find any parts of the user interface that are difficult to navigate please let me know and I would love to improve them.",(0,r.jsx)("br",{}),(0,r.jsx)(v.Z,{href:"https://github.com/chrisinajar/proofofcombat/wiki/Screen-Readers-and-Accessibility",target:"_blank",rel:"noreferrer",children:"Check this wiki page for more details on accessibility"})]}),(0,r.jsx)(h.Z,{sx:{mb:2},children:"This game is once again being developed actively. It's been a long time coming and there's a lot of major changes to the underlying engine in order to unlock cooler and more interesting mechanics for the game."}),(0,r.jsx)(h.Z,{variant:"h4",sx:g.Z,children:"Discord Server"}),(0,r.jsxs)(h.Z,{sx:{mb:2},children:["If you'd like to talk more with other players, report bugs, or discuss upcoming features,"," ",(0,r.jsx)(v.Z,{underline:"hover",href:"https://discord.gg/t7AZSxvfJG",target:"_blank",rel:"noreferrer",children:"join the discord!"})]}),(0,r.jsx)(h.Z,{variant:"h4",sx:g.Z,children:"Game Wiki"}),(0,r.jsxs)(h.Z,{sx:{mb:2},children:["A great deal of the game is undocumented, but the parts which are documented can be found,"," ",(0,r.jsx)(v.Z,{underline:"hover",href:"https://github.com/chrisinajar/proofofcombat/wiki/",target:"_blank",rel:"noreferrer",children:"in the wiki"}),". The game is nearly impossible to 100% without consulting the wiki."]}),(0,r.jsx)(h.Z,{variant:"h5",sx:{mb:2},children:"Combat Stats"}),(null===T||void 0===T?void 0:T.combatStats)&&(0,r.jsx)(Yr,{skills:T.skills,stats:T.combatStats})]}),(null===F||void 0===F?void 0:F.leaderboard)&&(0,r.jsxs)(m.ZP,{item:!0,xs:12,sm:5,md:4,children:[(0,r.jsx)(h.Z,{variant:"h6",children:"Leaderboard"}),(0,r.jsx)("ul",{id:"leaderboard-list",children:F.leaderboard.slice(0,20).map((function(e,n){return(0,r.jsxs)("li",{id:"leaderboard-list-".concat(n),children:[(0,r.jsx)("b",{id:"leaderboard-list-".concat(n,"-name"),children:e.name})," ","(",(0,B.qh)(e.class),")"]},e.id)}))})]})]})}),(0,r.jsxs)(y.Z,{value:"combat",children:[(0,r.jsx)(h.Z,{variant:"h3",sx:{textAlign:"center"},children:"Combat"}),(0,r.jsx)(h.Z,{children:"Challenge a monster from the list, then fight it to the death. Note that other players in the same location see the same monster lists, so they may get to it first!"}),(0,r.jsx)("br",{}),(0,r.jsx)(Ee,{})]}),(0,r.jsx)(y.Z,{value:"shop",children:(0,r.jsx)(Jt,{})}),(0,r.jsx)(y.Z,{value:"inventory",children:(0,r.jsx)(Wr,{})}),(0,r.jsx)(y.Z,{value:"map",children:(0,r.jsx)(Lt,{})}),(0,r.jsx)(y.Z,{value:"quests",children:(0,r.jsx)(Ur,{})}),(0,r.jsx)(y.Z,{value:"settings",children:(0,r.jsx)(ui,{})}),(0,r.jsx)(y.Z,{value:"admin",children:(0,r.jsx)(mi,{})})]}),(0,r.jsx)("br",{}),(0,r.jsx)(c.Z,{}),(0,r.jsx)("br",{}),(0,r.jsx)(re,{})]})]})})}}}]);