"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[799],{3799:function(e,n,t){t.d(n,{Z:function(){return Wr}});var r=t(5893),i=t(7294),a=t(1163),o=t(5152),l=t(7357),s=t(7720),c=t(1458),u=t(44),d=t(5861),h=t(6886),f=t(9104),m=t(122),x=t(5670),v=t(7225),p=t(5050),g=t(3113),y=t(7018),b=t(4051),j=t.n(b),Z=t(1157),S=t(8445),w=t(5739),A=t(9825),k=t(3321),P=t(7109),C=t(3946),I=t(4054),E=t(3841),L=t(7058),M=t(3984),O=t(9267),F=t(6824),W=t(622),T=t(4510),B=t(9402);function $(){var e,n,t,r=(0,B.UE)().data;return null!==(t=null===r||void 0===r||null===(e=r.me)||void 0===e||null===(n=e.account)||void 0===n?void 0:n.hero)&&void 0!==t?t:void 0}var D=t(874),z=t(5018),q=t(3599),Q=t(1903);function N(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function G(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function R(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){G(a,r,i,o,l,"next",e)}function l(e){G(a,r,i,o,l,"throw",e)}o(void 0)}))}}function H(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return N(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e){var n,t,a=e.hero,o=e.to,c=H((0,B.F2)(),2),u=c[0],f=c[1].loading,m=H((0,B.AF)(),2),x=m[0],v=(m[1].loading,(0,B._v)({pollInterval:5e3})),p=v.data,g=v.refetch,y=(0,i.useState)(0),b=y[0],Z=y[1],S=(0,i.useState)(""),w=S[0],A=S[1],P=H((0,B.Fw)(),2),C=P[0],L=P[1].loading||f;if(!(null===p||void 0===p||null===(n=p.me)||void 0===n||null===(t=n.account)||void 0===t?void 0:t.hero))return null;var M=p.me.account.hero,O=M.incomingTrades,F=M.outgoingTrades,W="Select an item to offer",T=a.inventory.filter((function(e){return e.type!==B.$7.Quest})).sort(D.v4);function $(){return($=R(j().mark((function e(){var n;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=w,e.next=4,C({variables:{offer:{to:o,item:n,gold:b}}});case 4:e.sent,g(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function N(e){return G.apply(this,arguments)}function G(){return(G=R(j().mark((function e(n){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u({variables:{offer:n}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function U(){return(U=R(j().mark((function e(n){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x({variables:{offer:n}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var Y=T.find((function(e){return e.id===w}));return(0,r.jsxs)(l.Z,{sx:{p:2,m:1,bgcolor:"background.paper"},children:[(0,r.jsx)(d.Z,{color:"error",variant:"h4",children:"Offer trade"}),(0,r.jsx)(d.Z,{children:"You can offer one of your items for gold, and then the other player must accept."}),(0,r.jsxs)(h.ZP,{sx:{mt:1},container:!0,columns:6,spacing:3,children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"trade-item-select-label",children:W}),(0,r.jsx)(z.Z,{id:"trade-item-select",labelId:"trade-item-select-label",label:W,value:w,onChange:function(e){return A(e.target.value)},children:T.map((function(e){return(0,r.jsx)(q.Z,{value:e.id,disabled:(0,D.mQ)(a,e),children:(0,D.GJ)(e)},e.id)}))})]})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Q.Z,{label:"Gold value",value:0===b?"":b,onChange:function(e){var n=Number(e.target.value);!isNaN(n)&&Number.isFinite(n)&&(n=Math.round(Math.max(0,Math.min(2e9,n))),console.log(n),Z(n))}})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsxs)(k.Z,{variant:"contained",fullWidth:!0,disabled:b<=0||!w.length||L,onClick:function(){return $.apply(this,arguments)},children:[Y&&"Offer ".concat((0,D.GJ)(Y)," for ").concat(b.toLocaleString()," gold"),!Y&&"Select an item to offer"]})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(s.Z,{})}),O.length>0&&(0,r.jsxs)(h.ZP,{item:!0,xs:6,children:["Received offers:",(0,r.jsx)(l.Z,{children:O.map((function(e){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(l.Z,{sx:{mt:1,bgcolor:"info.main",p:2},children:["From: ",(0,r.jsx)("b",{children:e.fromName}),(0,r.jsx)("br",{}),"Item: ",(0,r.jsx)("b",{children:(0,D.GJ)(e.item)}),(0,r.jsx)("br",{}),"Gold: ",(0,r.jsx)("b",{children:e.gold.toLocaleString()}),(0,r.jsx)("br",{}),(0,r.jsx)(k.Z,{sx:{m:1},variant:"contained",color:"success",disabled:L||e.gold>a.gold,onClick:function(){return function(e){return U.apply(this,arguments)}(e.id)},children:"Accept Trade"}),(0,r.jsx)(k.Z,{sx:{m:1},variant:"contained",color:"error",disabled:L,onClick:function(){return N(e.id)},children:"Reject Trade"})]})},e.id)}))})]}),F.length>0&&(0,r.jsxs)(h.ZP,{item:!0,xs:6,children:["Sent offers:",(0,r.jsx)(l.Z,{children:F.map((function(e){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(l.Z,{sx:{mt:1,bgcolor:"info.main",p:2},children:["To: ",(0,r.jsx)("b",{children:e.toName}),(0,r.jsx)("br",{}),"Item: ",(0,r.jsx)("b",{children:(0,D.GJ)(e.item)}),(0,r.jsx)("br",{}),"Gold: ",(0,r.jsx)("b",{children:e.gold.toLocaleString()}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(k.Z,{variant:"contained",color:"error",disabled:L,onClick:function(){return N(e.id)},children:"Cancel Trade"})]})},e.id)}))})]})]})]})}function Y(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function J(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return Y(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Y(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e){var n=[e.attributes.namePrefix,e.attributes.namePostfix].concat(J(e.attributes.bonusAffixes));return e.attributes.titlePrefix&&n.push(e.attributes.titlePrefix),e.attributes.titlePostfix&&n.push(e.attributes.titlePostfix),n}function _(e){var n=e.artifact,t=e.sx,a=e.children,o=K(n),l=function(e,n){return(0,r.jsx)(d.Z,{variant:"body1",sx:t,children:(0,r.jsx)("b",{children:e})},n)};return"function"===typeof a&&(l=a),(0,r.jsx)(i.Fragment,{children:o.map((function(e){return l(function(e){var n=e.magnitude>1?"".concat(Math.round(1e3*(e.magnitude-1))/10,"%"):"".concat(Math.round(1e3*e.magnitude)/10,"%");switch(e.type){case B.WB.BonusStrength:return"".concat(n," increased strength");case B.WB.BonusDexterity:return"".concat(n," increased dexterity");case B.WB.BonusConstitution:return"".concat(n," increased constitution");case B.WB.BonusIntelligence:return"".concat(n," increased intelligence");case B.WB.BonusWisdom:return"".concat(n," increased wisdom");case B.WB.BonusWillpower:return"".concat(n," increased willpower");case B.WB.BonusLuck:return"".concat(n," increased luck");case B.WB.DamageReduction:return"".concat(n," reduced damage taken");case B.WB.EnhancedDamage:return"".concat(n," enhanced damage");case B.WB.BonusHealth:return"".concat(n," bonus max health");case B.WB.ReducedDelay:return"".concat(n," reduced delay on actions");case B.WB.BonusExperience:return"".concat(n," more experience from all sources");case B.WB.BonusSkillChance:return"".concat(n," bonus chance to increase skills");case B.WB.Lifesteal:return"".concat(n," damage dealt gained as health");case B.WB.Mesmerize:return"".concat(n," chance to mesmerize opponents");case B.WB.Focus:return"".concat(n," chance to resist mesmerizing")}}(e),e.type)}))})}function V(e){var n=e.artifact;return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"h4",children:n.name}),"A mysterious magical item with the following properties:",(0,r.jsx)(_,{artifact:n})]})}function X(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ee(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function ne(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){ee(a,r,i,o,l,"next",e)}function l(e){ee(a,r,i,o,l,"throw",e)}o(void 0)}))}}function te(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function re(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return X(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return X(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ie="https://chrisinajar.com:2096/";function ae(){var e,n,t,a,o=function(e){return e.trim()},s=function(e,n){n!==(null===h||void 0===h?void 0:h.id)&&(console.log("Trying to whisper",e,n.substr(0,4)),ee((function(t){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){te(e,n,t[n])}))}return e}({},t,te({},e,{type:"private",heroId:n}))})),K(e))},c=(0,A.Ds)().enqueueSnackbar,h=$(),f=(0,B.TX)().data,m=(0,i.useState)(!1),p=m[0],g=m[1],y=(0,i.useState)([]),b=y[0],z=y[1],q=(0,i.useState)(!1),Q=q[0],N=q[1],G=(0,i.useState)(""),R=G[0],H=G[1],Y=(0,i.useState)("all"),J=Y[0],K=Y[1],_=(0,i.useState)({all:{type:"built-in"},chat:{type:"built-in"},notifications:{type:"built-in"}}),X=_[0],ee=_[1],ae=(0,i.useState)(!1),oe=ae[0],le=ae[1],se=(0,i.useRef)();(0,i.useEffect)((function(){var e;if(!se.current&&(null===f||void 0===f||null===(e=f.chat)||void 0===e?void 0:e.token))return se.current=(0,Z.io)(ie,{withCredentials:!0,auth:{token:f.chat.token}}),se.current.on("hello",(function(e){z(e.chat)})),se.current.on("chat",(function(e){console.log("Got chat event!",e),z((function(n){return[e].concat(re(n))}))})),se.current.on("notification",(function(e){var n;e.item&&(e.message=e.message.replace("{{item}}",(0,D.GJ)(e.item))),"drop"===e.type||"artifact"===e.type?e.item?c("You found ".concat((0,D.GJ)(e.item)),{variant:"success"}):e.artifactItem?(c("You found ".concat(e.artifactItem.name),{variant:"success"}),le(e.artifactItem)):c(e.message,{variant:"success"}):c(e.message,{variant:"info"}),z((function(t){return[{type:null!==(n=e.type)&&void 0!==n?n:"notification",id:Math.random(),time:Date.now()/1e3,message:"",from:e.message,color:"drop"===e.type?"error":"secondary",variant:"body1"}].concat(re(t))}))})),se.current.on("system-message",(function(e){c(e.message,{variant:"warning"}),z((function(n){return[{type:"system",id:Math.random(),time:Date.now()/1e3,message:e.message,from:"",color:e.color,variant:"h6"}].concat(re(n))}))})),function(){se.current&&(se.current.disconnect(),se.current=void 0)}}),[null===f||void 0===f||null===(e=f.chat)||void 0===e?void 0:e.token]);var ce=o(R);function ue(){return de.apply(this,arguments)}function de(){return(de=ne(j().mark((function e(){var n;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(se.current){e.next=2;break}return e.abrupt("return");case 2:if("private"!==(n=X[J]).type){e.next=7;break}return se.current.emit("private-chat",{to:n.heroId,message:R},(function(e){console.log("Got a confirmation!",e),z((function(n){return[e].concat(re(n))}))})),H(""),e.abrupt("return");case 7:se.current.emit("chat",{message:R},(function(e){console.log("Got a reply!",e),z((function(n){return[e].concat(re(n))}))})),H("");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var he,fe=b.filter((function(e){if("all"===J)return!0;if("chat"===J)return"chat"===e.type||"private"===e.type||"system"===e.type;if("notifications"===J)return"notification"===e.type||"drop"===e.type||"quest"===e.type||"system"===e.type;var n=X[J];return!n||"private"===n.type&&("private"===e.type&&(e.heroId===n.heroId||e.to===n.heroId))})),me=Q?"Max message: ".concat(140-ce.length,"/").concat(140):"Type here...";return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(O.Z,{open:!(null===h||void 0===h?void 0:h.currentQuest)&&!!oe,onClose:function(){return le(!1)},children:(0,r.jsx)(l.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",padding:[2,4],minWidth:"320px",maxWidth:"580px",width:"80%",textAlign:"center"},children:oe&&(0,r.jsx)(V,{artifact:oe})})}),(0,r.jsx)(x.ZP,{value:J,children:(0,r.jsx)(v.Z,{onChange:function(e,n){p&&g(!1),K(n)},"aria-label":"navigation tabs",variant:"scrollable",children:Object.keys(X).map((function(e){return(0,r.jsx)(u.Z,{label:e,value:e},e)}))})}),"notifications"!==J&&(0,r.jsxs)(I.Z,{sx:{marginTop:1},fullWidth:!0,variant:"outlined",children:[(0,r.jsx)(E.Z,{htmlFor:"chat-input",children:me}),(0,r.jsx)(L.Z,{disabled:!(null===(n=se.current)||void 0===n?void 0:n.connected),value:R,id:"chat-input",name:"Chat input",label:me,placeholder:"Type here...",onChange:function(e){var n=e.target.value;o(n).length<=140&&H(n)},onFocus:function(){return N(!0)},onBlur:function(){return N(!1)},autoComplete:"off",onKeyPress:function(e){"Enter"!==e.key||ue()},endAdornment:(0,r.jsxs)(P.Z,{position:"end",children:[(0,r.jsx)(M.Z,{title:"Send message",children:(0,r.jsx)(C.Z,{"aria-label":"send chat",onClick:ue,children:(0,r.jsx)(F.Z,{})})}),"private"===(null===(t=X[J])||void 0===t?void 0:t.type)&&(0,r.jsx)(M.Z,{title:p?"Cancel trade":"Trade with player",children:(0,r.jsxs)(C.Z,{onClick:function(){return g(!p)},children:[p&&(0,r.jsx)(T.Z,{}),!p&&(0,r.jsx)(W.Z,{})]})})]})})]}),p&&h&&(null===(a=X[J])||void 0===a?void 0:a.heroId)&&(0,r.jsx)(U,{hero:h,to:null!==(he=X[J].heroId)&&void 0!==he?he:""}),(0,r.jsx)(l.Z,{sx:{padding:1,minHeight:"600px",bgcolor:"background.paper"},children:fe.map((function(e){return(0,r.jsxs)(d.Z,{variant:e.variant||"body1",sx:{color:"".concat("private"===e.type?"secondary":e.color||"text",".main")},children:[e.time&&(0,r.jsxs)(d.Z,{variant:"caption",children:["(",(0,w.S)(new Date(1e3*e.time)),")\xa0"]}),e.heroId&&(0,r.jsx)(k.Z,{onClick:function(){e.heroId&&s(e.from,e.heroId)},sx:{color:"inherit",textTransform:"none",paddingTop:0,paddingBottom:0,paddingLeft:1,paddingRight:.5,margin:0},children:(0,r.jsxs)("b",{children:[e.from,":"]})}),!e.heroId&&(0,r.jsx)("b",{children:e.from})," ",(0,S.emojify)(e.message)]},e.id)}))}),(0,r.jsx)("br",{})]})}var oe=t(2471),le=t(9835);function se(){var e,n=$(),t=(0,B.W1)({fetchPolicy:"network-only",variables:(null===n||void 0===n?void 0:n.location)?{location:{x:n.location.x,y:n.location.y,map:n.location.map}}:void 0,skip:!(null===n||void 0===n?void 0:n.location)}).data;return null!==(e=null===t||void 0===t?void 0:t.locationDetails)&&void 0!==e?e:null}function ce(){var e=se(),n=(null===e||void 0===e?void 0:e.specialLocations)||[];return n.length?n[0]:null}var ue,de=t(1292),he=t(5499),fe=t(8698),me=t(7600),xe=t(5826);function ve(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function pe(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function ge(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){pe(a,r,i,o,l,"next",e)}function l(e){pe(a,r,i,o,l,"throw",e)}o(void 0)}))}}function ye(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return ve(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ve(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e){var n,t,a,o=e.autoBattle,l=e.canAutoBattle,s=e.fight,u=s.id,f=s.monster,m=e.onVictory,x=e.onError,v=e.onAutoBattle,p=e.fightMutationRef,g=e.duel,y=(0,i.useState)(!1),b=y[0],Z=y[1],S=ye((0,B.zC)(),2),w=S[0],A=S[1],P=A.data,C=A.loading,I=ye((0,B.E0)(),2),E=I[0],L=I[1],O=L.data,F=L.loading,W=(0,i.useState)(100),T=W[0],$=W[1],z=(0,i.useState)(B.hK.Melee),q=z[0],Q=z[1],N=(null===P||void 0===P?void 0:P.fight)||(null===O||void 0===O?void 0:O.attackHero)||null,G=(null===P||void 0===P||null===(n=P.fight)||void 0===n||null===(t=n.monster)||void 0===t?void 0:t.monster)||(null===O||void 0===O||null===(a=O.attackHero)||void 0===a?void 0:a.otherHero)||null,R=!o&&l;function H(e){return U.apply(this,arguments)}function U(){return(U=ge(j().mark((function e(n){var t,r,i,a,o,l,s;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q(n),e.prev=1,!g){e.next=10;break}return e.next=6,E({variables:{id:u,attackType:n}});case 6:r=e.sent,(null===(t=r.data)||void 0===t?void 0:t.attackHero.victory)&&m&&m(),e.next=15;break;case 10:return e.next=13,w({variables:{monster:u,attackType:n}});case 13:a=e.sent,(null===(i=a.data)||void 0===i?void 0:i.fight.victory)&&m&&m();case 15:e.next=29;break;case 17:if(e.prev=17,e.t0=e.catch(1),!e.t0.graphQLErrors||!e.t0.graphQLErrors[0]){e.next=28;break}if(l=ye(e.t0.graphQLErrors,1),s=l[0],!(null===(o=s.extensions)||void 0===o?void 0:o.delay)){e.next=24;break}return e.abrupt("return");case 24:if(!s.message.startsWith("Key not found in database")){e.next=28;break}return Z(!0),$(0),e.abrupt("return");case 28:x&&x(e.t0);case 29:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}return(0,i.useEffect)((function(){b&&Z(!1),C||F||$(100*(G?G.combat.health:f.combat.health)/f.combat.maxHealth)}),[null===G||void 0===G?void 0:G.combat.health,null===G||void 0===G?void 0:G.combat.maxHealth,f.combat.maxHealth]),p&&(p.current=H),(0,i.useEffect)((function(){return function(){p&&(p.current=function(){})}}),[]),(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(h.ZP,{id:"combat-display",style:{minHeight:"110px"},item:!0,xs:6,children:[(0,r.jsxs)(h.ZP,{container:!0,sx:{textAlign:"center"},columns:6,children:[(0,r.jsxs)(h.ZP,{item:!0,xs:6,children:[(0,r.jsxs)(d.Z,{variant:"h4",children:[T>0&&(o?"Auto-Battling":"Battling"),T<=0&&"Dead"," ",f.name]}),(0,r.jsx)(c.Z,{variant:"determinate",value:T,color:"error"})]}),T>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:2,xl:2,children:(0,r.jsx)(M.Z,{title:"Attack using your melee weapons, uses strength and dexterity",children:(0,r.jsx)(k.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-melee",onClick:function(){return H(B.hK.Melee)},"aria-label":"melee attack",startIcon:(0,r.jsx)(de.Z,{}),children:"Melee attack"})})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:2,xl:2,children:(0,r.jsx)(M.Z,{title:"Attack using your ranged weapons, uses dexterity",children:(0,r.jsx)(k.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-ranged",onClick:function(){return H(B.hK.Ranged)},"aria-label":"ranged attack",startIcon:(0,r.jsx)(he.Z,{}),children:"Ranged attack"})})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:2,xl:2,children:(0,r.jsx)(M.Z,{title:"Cast spells using your wisdom and intelligence",children:(0,r.jsx)(k.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-cast",onClick:function(){return H(B.hK.Cast)},"aria-label":"cast spell",startIcon:(0,r.jsx)(fe.Z,{}),children:"Cast Spell"})})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:3,xl:3,children:(0,r.jsx)(M.Z,{title:"Smite your foe using wisdom and willpower",children:(0,r.jsx)(k.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-holy",onClick:function(){return H(B.hK.Smite)},"aria-label":"holy attack",startIcon:(0,r.jsx)(me.Z,{}),children:"Smite"})})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:6,md:3,xl:3,children:(0,r.jsx)(M.Z,{title:"Damage yourself to damage the enemy, uses constitution",children:(0,r.jsx)(k.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-blood",onClick:function(){return H(B.hK.Blood)},"aria-label":"blood magic",startIcon:(0,r.jsx)(xe.Z,{}),children:"Blood magic"})})})]})]}),b&&"This enemy was killed by another player",N&&N.log.map((function(e,n){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(d.Z,{children:[e.isEnchantment&&(0,r.jsxs)(i.Fragment,{children:[e.damage<0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("b",{children:e.from})," heals"," ",(0,r.jsx)("span",{id:"fight-".concat(e.from,"-enchantment-heal"),children:(0-e.damage).toLocaleString()})," ","health from their enchantments"]}),e.damage>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("b",{children:e.from})," dealt"," ",(0,r.jsx)("span",{id:"fight-".concat(e.from,"-enchantment-damage"),children:e.damage.toLocaleString()})," ","enchantment damage to ",(0,r.jsx)("b",{children:e.to})]})]}),!e.isEnchantment&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("b",{children:e.from})," ".concat(je(e.attackType,e.success,e.critical)," "),(0,r.jsx)("b",{children:e.to}),e.success?" for ".concat(e.damage.toLocaleString()," damage!"):"."]})]})},"".concat(e.from,"-").concat(n))})),N&&N.victory&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(d.Z,{id:"fight-did-win",children:[f.name," has been killed!",(N.experience||N.gold)&&" You gain ",N.gold&&(0,r.jsxs)(i.Fragment,{children:[" ",(0,r.jsx)("span",{id:"fight-recap-gold",children:N.gold.toLocaleString()})," ","gold"]}),N.gold&&N.experience&&" and",N.experience&&(0,r.jsxs)(i.Fragment,{children:[" ",(0,r.jsx)("span",{id:"fight-recap-experience",children:N.experience.toLocaleString()})," ","experience"]}),(N.experience||N.gold)&&"!! ",N.didLevel&&(0,r.jsx)("b",{id:"fight-level-up",children:"You leveled up!!"})]}),N.drop&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsxs)(d.Z,{id:"fight-got-drop",variant:"h5",children:["You find an enchanted item on the monster's corpse!",(0,r.jsx)("br",{}),(0,D.GJ)(N.drop)]})]}),(0,r.jsx)("br",{}),R&&(0,r.jsx)(k.Z,{fullWidth:!0,color:"secondary",variant:"contained",onClick:function(){v&&v(f.id,q)},children:"Auto-Battle this enemy"})]})]})})}function je(e,n,t){switch(e){case B.hK.Blood:return n?t?"surges with blood magic against":"lets blood and casts forth towards":"attempts to cast a spell against";case B.hK.Smite:return n?t?"summons powers beyond this world against":"smites":"attempts to smite";case B.hK.Cast:return n?t?"carefully casts a spell at":"blasts a beam of necrotic energy into":"attempts to cast a spell against";case B.hK.Ranged:return n?t?"lands a sneak attack from the shadows, critically damaging":"fires an arrow at":"shoots an arrow but it misses";case B.hK.Melee:default:return n?t?"lands a crippling blow against":"struck":"missed"}}function Ze(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Se=(Ze(ue={},B.zP.Normal,"Normal stance with no pros or cons."),Ze(ue,B.zP.Combat,"???"),Ze(ue,B.zP.Reckless,"???"),Ze(ue,B.zP.Aggressive,"???"),Ze(ue,B.zP.Defensive,"???"),Ze(ue,B.zP.NecroticBeam,"???"),Ze(ue,B.zP.CloudofKnives,"???"),Ze(ue,B.zP.FrozenOrb,"???"),Ze(ue,B.zP.MageArmor,"???"),Ze(ue,B.zP.NormalArrow,"???"),Ze(ue,B.zP.BarbedArrow,"???"),Ze(ue,B.zP.BloodHunter,"???"),Ze(ue,B.zP.DarkPresence,"???"),Ze(ue,B.zP.AuraoftheLifeless,"???"),Ze(ue,B.zP.ShieldSmash,"???"),Ze(ue,B.zP.ShieldSlash,"???"),Ze(ue,B.zP.HolySmite,"???"),Ze(ue,B.zP.VengefulSmite,"???"),Ze(ue,B.zP.WarriorsStance,"???"),Ze(ue,B.zP.Hexblade,"???"),Ze(ue,B.zP.Focus,"???"),ue);function we(){var e=$();if(!e)return null;var n=e.availableStances.map((function(e){return{name:e,tooltip:Se[e]}}));return n.length<2?null:(0,r.jsx)(h.ZP,{item:!0,xs:12,children:(0,r.jsxs)(h.ZP,{container:!0,sx:{textAlign:"center"},columns:6,children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)("hr",{})}),(0,r.jsx)(h.ZP,{item:!0,lg:1,xs:6,children:(0,r.jsx)(d.Z,{variant:"h5",children:"Select Stance"})}),n.map((function(n){return(0,r.jsx)(h.ZP,{item:!0,lg:1,md:2,sm:3,xs:6,children:(0,r.jsx)(M.Z,{title:n.tooltip,children:(0,r.jsx)(k.Z,{variant:e.activeStance===n.name?"outlined":"text",sx:{fontSize:"1rem",padding:2},size:"large",id:"set-stance-".concat(n.name.toLowerCase()),onClick:function(){return function(n){console.log("Setting stance to",n,e)}(n.name)},"aria-label":"set stance ".concat(n.name),children:n.name})})},n.name)}))]})})}function Ae(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ke(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Pe(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){ke(a,r,i,o,l,"next",e)}function l(e){ke(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Ce(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||Ee(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,n){if(e){if("string"===typeof e)return Ae(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ae(e,n):void 0}}function Le(){var e,n,t,a,o=(0,i.useState)(B.hK.Melee),l=o[0],s=o[1],u=(0,i.useState)(0),f=u[0],m=u[1],x=(0,i.useState)(0),v=x[0],p=x[1],g=(0,i.useState)([0,50,100]),y=g[0],b=g[1],Z=(0,i.useRef)((function(){})),S=(0,i.useState)(!1),w=S[0],A=S[1],P=(0,i.useState)(""),C=P[0],L=P[1],M=(0,i.useState)(0),O=M[0],F=M[1],W=(0,i.useState)(null),T=W[0],Q=W[1],N=Ce((0,le.g)(),2),G=N[0],R=N[1],H=(0,i.useState)(""),U=H[0],Y=H[1],J=(0,i.useState)(""),K=J[0],_=J[1],V=(0,i.useState)(""),X=V[0],ee=V[1],ne=(0,i.useState)(""),te=ne[0],re=ne[1],ie=(0,B.Of)(),ae=ie.data,ce=ie.loading,ue=(ie.error,ie.refetch),de=Ce((0,B.Ht)(),1)[0],he=Ce((0,B.hL)(),2),fe=he[0],me=he[1].loading,xe=(0,B.pL)(),ve=xe.data,pe=xe.refetch,ge=(null===ve||void 0===ve?void 0:ve.challenges)||[],ye=$(),je=Ce((0,B.zC)(),2),Ze=(je[0],je[1]),Se=(Ze.data,Ze.loading),Ae=(0,i.useRef)((function(e){})),ke=se(),Ee=null!==(a=null===ke||void 0===ke?void 0:ke.players)&&void 0!==a?a:[],Le=null===ae||void 0===ae||null===(e=ae.monsters)||void 0===e?void 0:e.find((function(e){return e.id===T})),Me=!1,Oe=0;ye&&(Me=!!ye.inventory.find((function(e){return(0,D.h8)(e.baseItem)})),Oe=ye.inventory.filter((function(e){return(0,D.Ke)(e.baseItem)})).length);var Fe=me||ce||Se;function We(){return Te.apply(this,arguments)}function Te(){return(Te=Pe(j().mark((function e(){var n,t;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(n=e.t0.graphQLErrors[0])||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.delay)&&R(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function Be(){return(Be=Pe(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===ae||void 0===ae?void 0:ae.monsters.find((function(e){return e.id===K})),Q(K),re("");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){return($e=Pe(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",De(U));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e){return ze.apply(this,arguments)}function ze(){return(ze=Pe(j().mark((function e(n){var t,r,i;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,de({variables:{monster:n}});case 4:return r=e.sent.data,e.next=7,ue();case 7:(null===r||void 0===r?void 0:r.challenge)&&Q(r.challenge.id),(null===r||void 0===r||null===(t=r.challenge)||void 0===t?void 0:t.id)&&_(null===r||void 0===r||null===(i=r.challenge)||void 0===i?void 0:i.id),F(O+1),re(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),ue();case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function qe(){return(qe=Pe(j().mark((function e(n,t){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Enabling auto battler! weee!"),A(!0),s(t),m(0),L(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(){return(Qe=Pe(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re(X),Q("");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,i.useEffect)((function(){return window.setChallengeMonster=Y,function(){delete window.setChallengeMonster}}),[Y]),(0,i.useEffect)((function(){pe(),ue()}),[null===ye||void 0===ye?void 0:ye.location.x,null===ye||void 0===ye?void 0:ye.location.y,null===ye||void 0===ye?void 0:ye.location.map]),Z.current=Pe(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p((v+1)%(4/Math.pow(2,Oe))),b([Math.random()>.5?100*Math.random():y[0],Math.random()>.5?100*Math.random():y[1],Math.random()>.5?100*Math.random():y[2]]),0===v){e.next=4;break}return e.abrupt("return");case 4:if(!(Fe||G>0)){e.next=6;break}return e.abrupt("return");case 6:if(0!==(null===ye||void 0===ye?void 0:ye.combat.health)){e.next=9;break}return console.log("[AutoBattler] Healing!"),e.abrupt("return",We());case 9:if(Le&&0!==Le.monster.combat.health&&Le.monster.id===C){e.next=13;break}return console.log("[AutoBattler] Challenging new mob!"),De(C),e.abrupt("return");case 13:if(!Le||!Ae.current){e.next=17;break}return console.log("[AutoBattler] Fighting ".concat(l,"!")),Ae.current(l),e.abrupt("return");case 17:console.log("[AutoBattler] Doing nothing...");case 18:case"end":return e.stop()}}),e)}))),(0,i.useEffect)((function(){if(w&&C.length){var e=(0,oe.Zi)((function(){Z.current()}),500);return function(){(0,oe.cv)(e)}}}),[w,Oe]),(0,i.useEffect)((function(){var e;if(null===ae||void 0===ae||null===(e=ae.monsters)||void 0===e?void 0:e.length){var n=ae.monsters.concat().sort((function(e,n){return e.monster.level-n.monster.level}));if(""===K)_(n[0].id);else ae.monsters.find((function(e){return e.id===K}))||_(n[0].id)}}),[K,null===ae||void 0===ae||null===(n=ae.monsters)||void 0===n?void 0:n.length]);var Ne=null===ae||void 0===ae||null===(t=ae.monsters)||void 0===t?void 0:t.find((function(e){return e.id===K}));Ne||(K="");var Ge=Ee.find((function(e){return e.id===te}));(Ee.find((function(e){return e.id===X}))||(X=""),ye)&&(ye.levelCap>100||(ge=ge.slice(0,ye.level)));Ee=Ee.filter((function(e){return e.combat.health>0}));var Re="Select a new monster to challenge",He="Fight an existing monster!",Ue="Duel with a nearby player!";return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:4,children:[!w&&ye&&ye.combat.health>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"challenge-monster-select-label",children:Re}),(0,r.jsx)(z.Z,{id:"challenge-select",labelId:"challenge-monster-select-label",value:U,label:Re,disabled:w,onChange:function(e){return Y(e.target.value)},children:ge.map((function(e){return(0,r.jsxs)(q.Z,{value:e.id,children:[e.name,"\xa0",(0,r.jsxs)(d.Z,{variant:"caption",display:"inline-block",children:["Tier ",e.level]})]},e.id)}))}),(0,r.jsx)(k.Z,{id:"challenge-button",disabled:!U||G>0||me||w,onClick:function(){return $e.apply(this,arguments)},variant:"contained",children:"Challenge!"})]})}),(0,r.jsx)(h.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"fight-monster-select-label",children:He}),(0,r.jsx)(z.Z,{id:"fight-select",labelId:"fight-monster-select-label",value:K,label:He,disabled:w,onChange:function(e){return _(e.target.value)},children:(null===ae||void 0===ae?void 0:ae.monsters)&&Ie(null===ae||void 0===ae?void 0:ae.monsters).sort((function(e,n){return e.monster.level-n.monster.level})).map((function(e){return(0,r.jsxs)(q.Z,{value:e.id,disabled:0===e.monster.combat.health,children:[0===e.monster.combat.health&&"Dead ",e.monster.name]},e.id)}))}),(0,r.jsx)(k.Z,{id:"fight-button",disabled:!K||G>0||me||Ne&&0===Ne.monster.combat.health||w,onClick:function(){return Be.apply(this,arguments)},variant:"contained",children:"Fight!"})]})}),Ee.length>1&&(0,r.jsx)(h.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"duel-select-label",children:Ue}),(0,r.jsx)(z.Z,{id:"duel-select",labelId:"duel-select-label",value:X,label:Ue,disabled:w,onChange:function(e){return ee(e.target.value)},children:Ee.filter((function(e){return e.id!==ye.id})).sort((function(e,n){return e.level-n.level})).map((function(e){return(0,r.jsx)(q.Z,{value:e.id,children:e.name},e.id)}))}),(0,r.jsx)(k.Z,{id:"duel-button",disabled:!X.length||G>0||me||w,onClick:function(){return Qe.apply(this,arguments)},variant:"contained",children:"Duel Player!"})]})})]}),w&&(0,r.jsxs)(h.ZP,{item:!0,xs:6,children:[(0,r.jsx)(c.Z,{sx:{margin:1,color:"#f00"},variant:"determinate",value:y[0],color:"inherit"}),(0,r.jsx)(c.Z,{color:"inherit",sx:{margin:1,color:"#0f0"},variant:"determinate",value:y[1]}),(0,r.jsx)(c.Z,{color:"inherit",sx:{margin:1,color:"#00f"},variant:"determinate",value:y[2]}),(0,r.jsx)(k.Z,{fullWidth:!0,variant:"contained",color:"error",size:"large",onClick:function(){return A(!1)},children:"Disable Auto-Battle"})]}),ye&&ye.combat.health<=0&&(0,r.jsx)(h.ZP,{item:!0,lg:3,xs:6,children:(0,r.jsx)(d.Z,{id:"you-are-dead",children:"You are dead."})}),Le&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(we,{}),(0,r.jsx)(be,{fight:Le,onError:function(){ue(),Q(null)},autoBattle:w,canAutoBattle:Me,onAutoBattle:function(e,n){return qe.apply(this,arguments)},fightMutationRef:Ae,onVictory:function(){return m(f+1)}},"".concat(Le.id,"-").concat(O))]}),Ge&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(we,{}),(0,r.jsx)(be,{fight:{id:Ge.id,monster:Ge},onError:function(){ue(),Q(null)},duel:!0,autoBattle:!1,canAutoBattle:!1},"".concat(Ge.id,"-").concat(O))]}),(0,r.jsx)(h.ZP,{item:!0,lg:3,xs:6,children:(0,r.jsx)(k.Z,{id:"heal-button",fullWidth:!0,onClick:We,variant:"contained",disabled:G>0||me||ye&&ye.combat.health===ye.combat.maxHealth,children:"Heal"})})]})})}var Me=t(9692);function Oe(e){var n=e.location,t=e.minimapSize,i=void 0===t?[24,24]:t,a=e.gridSize,o=void 0===a?[128,96]:a,l=e.cellSize,s=void 0===l?16:l,c=e.indicatorSize,u=void 0===c?8:c,d=[Math.round(Math.min(o[0]-i[0],Math.max(0,n.x-i[0]/2))),Math.round(Math.min(o[1]-i[1],Math.max(0,n.y-i[1]/2)))];return(0,r.jsx)("div",{style:{position:"relative",display:"inline-block",backgroundImage:"url(/maps/".concat(n.map,".jpg)"),backgroundPosition:"-".concat(d[0]*s,"px -").concat(d[1]*s,"px"),backgroundSize:"".concat(128*s,"px ").concat(96*s,"px "),width:"".concat(i[0]*s,"px"),height:"".concat(i[1]*s,"px")},children:(0,r.jsx)("div",{style:{position:"absolute",borderRadius:"".concat(u/2,"px"),backgroundColor:"red",border:"2px solid rgba(255,255,255,0.3)",left:"".concat((n.x-d[0])*s+(s-u)/2,"px"),top:"".concat((n.y-d[1])*s+(s-u)/2,"px"),width:"".concat(u,"px"),height:"".concat(u,"px")}})})}function Fe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function We(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||Be(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Be(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e,n){if(e){if("string"===typeof e)return Fe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Fe(e,n):void 0}}function $e(e){var n=e.location,t=function(e){return(0,D.LW)(e.location,n.location)},a=We((0,B.L7)(),2),o=a[0],s=a[1].loading,c=(0,B.dE)().data,u=(0,i.useState)(""),h=u[0],f=u[1],m="Choose a port to sail to";return(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(d.Z,{variant:"h5",children:n.name}),(0,r.jsx)(d.Z,{children:"The wooden docks creak and sway with the water below."}),(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"sail-dock-select-label",children:m}),(0,r.jsx)(z.Z,{id:"sail-select",labelId:"sail-dock-select-label",value:h,label:m,onChange:function(e){return f(e.target.value)},children:(null===c||void 0===c?void 0:c.docks)&&Te(null===c||void 0===c?void 0:c.docks).sort((function(e,n){return t(e)-t(n)})).map((function(e){return(0,r.jsxs)(q.Z,{value:e.name,disabled:e.name===n.name,children:[e.name,":"," ",e.name!==n.name&&(0,r.jsxs)(i.Fragment,{children:[(t=e,Math.round(12*(0,D.LW)(t.location,n.location))).toLocaleString()," Gold"]}),e.name===n.name&&"Current location"]},e.name);var t}))}),(0,r.jsx)(k.Z,{onClick:function(){if(c){var e=c.docks.find((function(e){return e.name===h}));e&&o({variables:{x:e.location.x,y:e.location.y}})}},variant:"outlined",color:"success",disabled:!h.length||s,children:"Sail!"})]})]})}function De(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ze(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function qe(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){ze(a,r,i,o,l,"next",e)}function l(e){ze(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Qe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return De(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return De(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e){var n=e.shop,t=(0,i.useState)(!1),a=t[0],o=t[1],l=(0,i.useState)(""),c=l[0],u=l[1],h=Qe((0,B.NA)(),2),f=h[0],m=h[1].loading;function x(){return(x=qe(j().mark((function e(n){var t,r;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("attemptiong trade",n),u(""),e.prev=2,e.next=6,f({variables:{trade:n}});case 6:(null===(r=e.sent)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.npcTrade)&&(u(r.data.npcTrade.message),o(r.data.npcTrade.success)),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(s.Z,{sx:{mt:1,mb:1}}),(0,r.jsx)(d.Z,{variant:"h4",color:"info.main",children:n.name}),(0,r.jsx)(d.Z,{sx:{mb:2},variant:"subtitle2",color:"info.main",children:"Hermit shop"}),c.length>0&&(0,r.jsx)(d.Z,{sx:{mb:2},variant:"body1",color:a?"success.main":"error.main",children:c}),n.trades.map((function(e,n){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(Ge,{trade:e}),(0,r.jsx)(k.Z,{disabled:m,onClick:function(){return function(e){return x.apply(this,arguments)}(e.id)},sx:{ml:1},children:"Trade"})]})},"npc shop items ".concat(n))}))]})}function Ge(e){var n=e.trade;return(0,r.jsxs)(i.Fragment,{children:["For the price of ",(0,r.jsx)(Re,{price:n.price}),", I'll give you"," ",(0,r.jsx)(Re,{price:n.offer})]})}function Re(e){var n=e.price;return(0,r.jsx)(M.Z,{title:He(n),children:(0,r.jsx)("b",{children:n.description})})}function He(e){var n,t,r,i=[];return e.gold&&i.push("".concat(e.gold.toLocaleString()," gold")),e.dust&&i.push("".concat(e.dust.toLocaleString()," dust")),(null===(n=e.baseItems)||void 0===n?void 0:n.length)&&e.baseItems.forEach((function(e){i.push("".concat(e))})),(null===(t=e.enchantments)||void 0===t?void 0:t.length)&&e.enchantments.forEach((function(e){i.push("".concat((0,D.uD)(e)))})),(null===(r=e.questItems)||void 0===r?void 0:r.length)&&e.questItems.forEach((function(e){i.push("".concat(e))})),i.length?i.join(", "):"???"}var Ue=t(3020),Ye=t(2748),Je=t(1425),Ke=t(6580),_e=t(8951),Ve=t(7645),Xe=t(8987),en=t(7855),nn=t(3707),tn=t(9653),rn=t(6447);function an(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function on(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function ln(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){on(a,r,i,o,l,"next",e)}function l(e){on(a,r,i,o,l,"throw",e)}o(void 0)}))}}function sn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return an(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return an(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e){e.hero;var n=e.camp,t=e.onBuyResource,a=(0,i.useState)(!1),o=a[0],s=a[1],c=sn((0,B.G_)(),2),u=c[0],f=c[1].loading,m=sn((0,B.jE)(),2),x=m[0],v=m[1].loading;B.G_;var p=(0,i.useState)(""),g=p[0],y=p[1],b=(0,i.useState)(""),Z=b[0],S=b[1],w=v||f;function A(){return(A=ln(j().mark((function e(){var n;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=o?u:x,e.next=4,n({variables:{amount:Number(Z),resource:g}});case 4:S(""),y(""),t&&t(),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var k=!!n.upgrades.find((function(e){return e===B.gT.TradingPost})),P=!g.length||!Z.length||Number(Z)<1||isNaN(Number(Z))||!Number.isFinite(Number(Z));return(0,r.jsx)(l.Z,{children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:1,children:[k&&(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsxs)(rn.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,r.jsx)(d.Z,{children:"Buy"}),(0,r.jsx)(tn.Z,{color:"success",checked:o,onChange:function(e){return s(e.target.checked)}}),(0,r.jsx)(d.Z,{children:"Sell"})]})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsxs)(I.Z,{fullWidth:!0,sx:{mt:1,minWidth:200},children:[(0,r.jsxs)(E.Z,{children:["Select resource to ",o?"sell":"buy"]}),(0,r.jsxs)(z.Z,{label:"Select resource to ".concat(o?"sell":"buy"),value:g,onChange:function(e){return y(e.target.value)},children:[(0,r.jsx)(q.Z,{value:"wood",children:"Wood"}),(0,r.jsx)(q.Z,{value:"food",children:"Food"}),(0,r.jsx)(q.Z,{value:"water",children:"Water"}),(0,r.jsx)(q.Z,{value:"stone",children:"Stone"})]})]})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(I.Z,{fullWidth:!0,sx:{mt:1,minWidth:200},children:(0,r.jsx)(Q.Z,{label:"Amount to ".concat(o?"sell":"buy"),value:Z,onChange:function(e){return S(e.target.value)}})})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(I.Z,{fullWidth:!0,children:(0,r.jsxs)(Xe.Z,{color:o?"success":"error",loading:w,variant:"contained",disabled:P,onClick:function(){return A.apply(this,arguments)},children:[o&&"Sell ",!o&&"Buy ",P&&"Resources",!P&&"".concat(g," for ").concat((1e4*Number(Z)).toLocaleString()," Gold")]})})})]})})}function un(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function dn(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function hn(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){dn(a,r,i,o,l,"next",e)}function l(e){dn(a,r,i,o,l,"throw",e)}o(void 0)}))}}function fn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return un(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return un(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(e){var n=e.hero,t=e.onShowSettlement,i=ce(),a=!1;return n.home&&n.home.location.x===n.location.x&&n.home.location.y===n.location.y&&n.home.location.map===n.location.map&&(a=!0),i||!n.home&&n.gold<1e5?null:(0,r.jsxs)(l.Z,{children:[!n.home&&(0,r.jsx)(xn,{hero:n}),n.home&&(0,r.jsx)(vn,{isLocal:a,hero:n,onShowSettlement:t}),(0,r.jsx)(s.Z,{sx:{mt:2,mb:2}})]})}function xn(e){e.hero;var n=fn((0,B.kO)(),2),t=n[0],i=n[1].loading;function a(){return(a=hn(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(d.Z,{variant:"h5",sx:{mb:2},children:"Settle Camp"}),(0,r.jsx)(d.Z,{sx:{mb:2},children:"Settling a camp site allows you to heal faster while standing on that square. Additionally, you'll be able to upgrade the camp site to gain additional features and upgrades."}),(0,r.jsxs)(Xe.Z,{loading:i,color:"success",onClick:function(){return a.apply(this,arguments)},sx:{p:2},startIcon:(0,r.jsx)(en.Z,{}),children:["Settle Camp for ",1e5.toLocaleString()," Gold"]})]})}function vn(e){var n=e.hero,t=e.isLocal,a=e.onShowSettlement,o=(0,i.useState)(!1),s=o[0],c=o[1],u=(0,i.useState)(!1),h=u[0],f=u[1],m=fn((0,B.kO)(),2),x=m[0],v=m[1].loading;function p(){return(p=hn(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!1),e.prev=1,e.next=4,x();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}if(!n.home)return null;if(!t)return(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(Ye.Z,{open:s,onClose:function(){return c(!1)},"aria-labelledby":"confirmation-title","aria-describedby":"confirmation-description",children:[(0,r.jsx)(Ve.Z,{id:"confirmation-title",children:"Destroy existing campsite?"}),(0,r.jsx)(Ke.Z,{children:(0,r.jsx)(_e.Z,{id:"confirmation-description",children:"Settling a new camp here will leave your old camp abandoned. You will lose any upgrades to the camp or anything stored there."})}),(0,r.jsxs)(Je.Z,{children:[(0,r.jsx)(Xe.Z,{color:"error",loading:v,onClick:function(){return c(!1)},children:"Nevermind"}),(0,r.jsx)(Xe.Z,{color:"success",loading:v,onClick:function(){return p.apply(this,arguments)},autoFocus:!0,children:"Re-Settle Camp"})]})]}),(0,r.jsxs)(d.Z,{sx:{mb:2},children:["You must be at your campsite to interract with it. Your campsite is at"," ",(0,r.jsxs)("b",{children:[n.home.location.x,", ",n.home.location.y]})]}),(0,r.jsxs)(Xe.Z,{loading:v,color:"error",onClick:function(){return c(!0)},sx:{p:2},startIcon:(0,r.jsx)(nn.Z,{}),children:["Rebuild Camp HERE for ",1e5.toLocaleString()," Gold"]})]});var g=!!n.home.upgrades.find((function(e){return e===B.gT.TradingPost})),y=!!n.home.upgrades.find((function(e){return e===B.gT.Settlement})),b=y?"Manage Settlement":"Manage Campsite";return(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(Ye.Z,{open:h,onClose:function(){return f(!1)},"aria-labelledby":"manage-camp-title","aria-describedby":"manage-camp-description",children:[(0,r.jsx)(Ve.Z,{id:"manage-camp-title",children:b}),(0,r.jsxs)(Ke.Z,{children:[(0,r.jsx)(pn,{camp:n.home}),(0,r.jsxs)(_e.Z,{id:"manage-camp-description",children:["The fire crackles and pops as you work.",!y&&" Your tools and supplies lie staggered across the campsite.",y&&" Your tools sit organized in the shed, spare the ones in use"]}),(0,r.jsx)(cn,{hero:n,camp:n.home}),g&&(0,r.jsx)(yn,{hero:n,camp:n.home}),(0,r.jsx)(gn,{hero:n,camp:n.home})]}),(0,r.jsx)(Je.Z,{children:(0,r.jsx)(Xe.Z,{color:"success",loading:v,onClick:function(){return f(!1)},children:"Done"})})]}),(0,r.jsxs)(d.Z,{variant:"h5",sx:{mb:2},children:["Your ",y?"Settlement":"Campsite"]}),(0,r.jsx)(d.Z,{sx:{mb:2},children:"The fire crackles and pops as it burns through the night."}),(0,r.jsxs)(Xe.Z,{color:"warning",variant:"contained",loading:v,onClick:function(){return y&&a?a():f(!0)},startIcon:(0,r.jsx)(en.Z,{}),children:["Open ",y?"Settlement":"Camps"," Management"]})]})}function pn(e){var n=e.camp;return console.log(n.resources),(0,r.jsx)(h.ZP,{container:!0,columns:8,children:n.resources.map((function(e){return(0,r.jsxs)(h.ZP,{item:!0,xs:8,sm:4,md:2,children:[(0,r.jsx)("b",{children:(0,Ue.words)(e.name)}),":"," ",0===e.value?(0,r.jsx)(d.Z,{sx:{display:"inline-block"},color:"error",children:e.value.toLocaleString()}):e.value.toLocaleString()," ","/ ",e.maximum&&e.maximum.toLocaleString()]},e.name)}))})}function gn(e){var n,t=e.hero,i=e.camp,a=function(e){var n,t;return null!==(t=null===(n=e.find((function(e){return"gold"===e.name})))||void 0===n?void 0:n.value)&&void 0!==t?t:0},o=fn((0,B.Th)(),2),s=o[0],c=o[1].loading,u=(0,B.Hk)(),h=u.data,f=u.refetch,m=null!==(n=null===h||void 0===h?void 0:h.availableUpgrades)&&void 0!==n?n:[];if(console.log(m),!m.length)return null;function x(){return(x=hn(j().mark((function e(n){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s({variables:{upgrade:n}});case 3:return e.next=5,f();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var v=!!i.upgrades.find((function(e){return e===B.gT.Settlement}));return(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(d.Z,{variant:"h6",children:[v?"Settlement":"Camp"," Upgrades"]}),m.map((function(e){return(0,r.jsx)(M.Z,{title:e.cost.map((function(e){return"".concat(e.value.toLocaleString()," ").concat((0,Ue.words)(e.name))})).join("\n"),children:(0,r.jsxs)(l.Z,{sx:{m:1},children:[(0,r.jsx)(Xe.Z,{loading:c,sx:{m:1},variant:"outlined",color:a(e.cost)>t.gold?"error":"success",onClick:function(){return function(e){return x.apply(this,arguments)}(e.type)},children:"Upgrade"}),e.name]})},e.type)}))]})}function yn(e){e.hero,e.camp;return null}var bn=t(8396),jn=t(2734),Zn=t(2613),Sn=t(3054),wn=t(7563),An=t(6398),kn=t(6667),Pn=t(3898),Cn=t(1733),In=t(1671);function En(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ln(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){En(e,n,t[n])}))}return e}function Mn(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.reduce((function(e,n){return n.forEach((function(n){var t,r,i=e.find((function(e){return e.name===n.name}));i?(i.value=i.value+n.value,(i.maximum||n.maximum)&&(i.maximum=(null!==(t=i.maximum)&&void 0!==t?t:0)+(null!==(r=n.maximum)&&void 0!==r?r:0))):e.push(Ln({},n))})),e}),[])}var On,Fn=t(7621),Wn=t.n(Fn);function Tn(e){var n=e.location,t=e.icon,a=e.cellSize,o=e.boundingBox,s=e.tooltip,c=e.hover,u=void 0!==c&&c,d=e.onClick,h=e.color,f=void 0===h?"rgb(33, 5, 33)":h,m=[n.x-o.min.x,n.y-o.min.y],x=m[0]+2,v=m[1]+2;return(0,r.jsx)(M.Z,{title:(0,r.jsxs)(i.Fragment,{children:[n.x,", ",n.y,(0,r.jsx)("br",{}),s]}),children:(0,r.jsx)(l.Z,{onClick:d,sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"".concat(a,"px"),height:"".concat(a,"px"),position:"absolute",left:"".concat(x*a,"px"),top:"".concat(v*a,"px"),backgroundColor:Wn()(f).darken(20).setAlpha(.4).toRgbString(),"&:hover":u?{backgroundColor:Wn()(f).setAlpha(.8).toRgbString()}:void 0},children:t})})}function Bn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function $n(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Dn(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){$n(a,r,i,o,l,"next",e)}function l(e){$n(a,r,i,o,l,"throw",e)}o(void 0)}))}}function zn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Bn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Bn(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(e){var n=e.cellSize,t=e.boundingBox,a=e.capital,o=e.type,l=e.range,s=zn((0,B.iA)(),1)[0],c=a.connections.map((function(e){return e.location})).concat(a.location),u={x:Math.max(0,t.min.x-1),y:Math.max(0,t.min.y-1)},d={x:Math.min(127,t.max.x+1),y:Math.min(95,t.max.y+1)},h=(0,i.useMemo)((function(){for(var e=function(e,t){for(var r=function(t,r){return Math.abs(e-a.location.x)+Math.abs(t-a.location.y)>=l||c.find((function(n){return n.x===e&&n.y===t}))?"continue":c.find((function(n){return n.x===e+1&&n.y===t||n.x===e-1&&n.y===t||n.x===e&&n.y===t+1||n.x===e&&n.y===t-1}))?void n.push({x:e,y:t,map:a.location.map}):"continue"},i=u.y,o=d.y;i<=o;++i)r(i)},n=[],t=u.x,r=d.x;t<=r;++t)e(t);return n}),[c.length,u.x,u.y,d.x,d.y,l]);function f(){return(f=Dn(j().mark((function e(n){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s({variables:{location:n,type:o}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsx)(i.Fragment,{children:h.map((function(e){return(0,r.jsx)(Tn,{onClick:function(){return function(e){return f.apply(this,arguments)}(e)},hover:!0,color:"rgb(10, 120, 10)",cellSize:n,boundingBox:t,location:e,tooltip:"Build here",icon:(0,r.jsx)(Sn.Z,{})},"".concat(e.x,"-").concat(e.y))}))})}function Qn(e){e.location;return(0,r.jsx)("div",{children:"details"})}function Nn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Gn(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Rn(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Gn(a,r,i,o,l,"next",e)}function l(e){Gn(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Hn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Un(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Hn(e,n,t[n])}))}return e}function Yn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||Kn(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jn(e){return function(e){if(Array.isArray(e))return Nn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Kn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(e,n){if(e){if("string"===typeof e)return Nn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Nn(e,n):void 0}}var _n=(Hn(On={},B.oS.Farm,(0,r.jsx)(An.Z,{})),Hn(On,B.oS.Shrine,(0,r.jsx)(Zn.Z,{})),Hn(On,B.oS.Apiary,(0,r.jsx)(Pn.Z,{})),Hn(On,B.oS.Barracks,(0,r.jsx)(de.Z,{})),On);function Vn(e){var n,t,a=e.hero,o=e.onClose,c=function(){S(null)},f=function(e){console.log(R),"destroy"===R?S(e):"info"===R&&P(e)},m=Yn((0,B.j9)(),2),g=m[0],y=m[1].loading,b=(0,i.useState)(null),Z=b[0],S=b[1],w=(0,i.useState)(null),A=w[0],P=w[1],C=(0,i.useState)(null),I=C[0],E=C[1],L=(0,B.Dp)({pollInterval:6e4}),M=L.data,O=L.loading,F=L.refetch,W=(0,jn.Z)(),T=(0,bn.Z)(W.breakpoints.up("sm")),$=(0,bn.Z)(W.breakpoints.up("md")),D=(0,bn.Z)(W.breakpoints.up("lg")),z=!T&&!$&&!D,q=T&&!$&&!D,Q=T&&$&&!D,N=T&&$&&D,G=(0,i.useState)("info"),R=G[0],H=G[1];if((0,i.useEffect)((function(){!a.home&&o&&o()}),[a.home,o]),!a.home)return null;if(O)return null;if(!M)return null;var U,Y,J,K=M.settlementManager,_=K.capital,V=K.availableBuildings,X=(K.availableUpgrades,K.range),ee=_,ne=Mn.apply(void 0,[ee.resources].concat(Jn(ee.connections.map((function(e){return e.resources}))))),te=null!==(U=null===(n=ne.find((function(e){return"population"===e.name})))||void 0===n?void 0:n.value)&&void 0!==U?U:0,re=(Y=null===(t=ne.find((function(e){return"food"===e.name})))||void 0===t?void 0:t.value,(J=Jn(ee.connections).concat([ee]).map((function(e){return e.location}))).reduce((function(e,n){return e.min.x=Math.min(e.min.x,n.x),e.min.y=Math.min(e.min.y,n.y),e.max.x=Math.max(e.max.x,n.x),e.max.y=Math.max(e.max.y,n.y),e}),{min:{map:J[0].map,x:127,y:96},max:{map:J[0].map,x:0,y:0}})),ie=re.max.x-re.min.x+5,ae=re.max.y-re.min.y+5,oe=290;z||(q?oe=W.breakpoints.values.sm-110:Q?oe=W.breakpoints.values.md/2-160:N&&(oe=W.breakpoints.values.lg/2-80));var le,se=8*Math.round(Math.min(oe/ie,oe/ae)/8);function ce(){return(ce=Rn(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,g({variables:{location:{x:Z.location.x,y:Z.location.y,map:Z.location.map}}});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:return e.prev=9,S(null),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[2,7,9,12]])})))).apply(this,arguments)}return(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(Ye.Z,{open:!!Z,onClose:c,"aria-labelledby":"destroy-building-title","aria-describedby":"destroy-building-description",children:[(0,r.jsx)(Ve.Z,{id:"destroy-building-title",children:"Destroy Building?"}),(0,r.jsx)(Ke.Z,{children:Z&&(0,r.jsxs)(_e.Z,{id:"destroy-building-description",children:["Are you sure you want to destroy the ",Z.type," at"," ",Z.location.x,", ",Z.location.y,"?"]})}),(0,r.jsxs)(Je.Z,{children:[(0,r.jsx)(k.Z,{onClick:c,color:"info",children:"Cancel"}),(0,r.jsx)(Xe.Z,{loading:y,onClick:function(){return ce.apply(this,arguments)},color:"error",children:"Destroy"})]})]}),(0,r.jsx)(x.ZP,{value:R,children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:1,children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(d.Z,{variant:"h4",children:"Settlement Manager"})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:2,children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)("b",{children:"Capital"}),": ",ee.location.x,", ",ee.location.y]})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:2,children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)("b",{children:"Map tiles"}),":"," ",(ee.connections.length+1).toLocaleString()]})}),Jn(ne).sort((function(e,n){return n.value-e.value})).map((function(e){return e.value<te&&("food"===e.name||"water"===e.name)?(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsxs)(d.Z,{color:"error",children:[(0,r.jsx)("b",{children:(0,Ue.words)(e.name)}),":"," ",e.value.toLocaleString(),e.maximum&&" / ".concat(e.maximum.toLocaleString())]})},e.name):(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:[(0,r.jsx)("b",{children:(0,Ue.words)(e.name)}),":"," ",e.value.toLocaleString(),e.maximum&&" / ".concat(e.maximum.toLocaleString())]},e.name)})),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsxs)(v.Z,{"aria-label":"navigation tabs",variant:"scrollable",textColor:"secondary",indicatorColor:"secondary",onChange:function(e,n){I&&E(null),H(n)},sx:{flexShrink:0,flexGrow:1},children:[(0,r.jsx)(u.Z,{icon:(0,r.jsx)(In.Z,{}),label:"View",value:"info"}),(0,r.jsx)(u.Z,{icon:(0,r.jsx)(Sn.Z,{}),label:"Build",value:"build"}),(0,r.jsx)(u.Z,{icon:(0,r.jsx)(Cn.Z,{}),label:"Destroy",value:"destroy"}),(0,r.jsx)(u.Z,{icon:(0,r.jsx)(wn.Z,{}),label:"Market",value:"market"})]})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,md:2,lg:3,children:(0,r.jsxs)(l.Z,{sx:{position:"relative"},children:[(0,r.jsx)(Oe,{location:ee.location,indicatorSize:0,minimapSize:[ie,ae],cellSize:se}),(0,r.jsx)(Tn,{onClick:function(){return f(Un({},ee,{connections:[]}))},cellSize:se,boundingBox:re,location:ee.location,tooltip:"Capital",icon:(0,r.jsx)(kn.Z,{})}),ee.connections.map((function(e){return(0,r.jsx)(Tn,{hover:"destroy"===R,onClick:function(){return f(Un({},e,{connections:[]}))},cellSize:se,boundingBox:re,location:e.location,tooltip:e.type,icon:null!==(le=_n[e.type])&&void 0!==le?le:(0,r.jsx)(Zn.Z,{})},e.id)})),I&&(0,r.jsx)(i.Fragment,{children:(0,r.jsx)(qn,{type:I,cellSize:se,boundingBox:re,capital:ee,range:X})})]})}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,md:4,lg:3,children:[(0,r.jsxs)(p.Z,{value:"build",children:[(0,r.jsx)(d.Z,{variant:"h6",children:"Construct new buildings"}),(0,r.jsx)(d.Z,{variant:"subtitle2",sx:{mb:1},children:"Each building uses a map tile."}),(0,r.jsx)(rn.Z,{alignItems:"start",children:V.map((function(e){return(0,r.jsxs)(l.Z,{sx:{mb:3},children:[(0,r.jsx)(s.Z,{sx:{mb:1}}),(0,r.jsx)(d.Z,{variant:"h5",children:e.name}),(0,r.jsx)(d.Z,{sx:{mb:1},children:e.description}),(0,r.jsx)(d.Z,{variant:"h6",children:"Cost to build"}),(0,r.jsx)(l.Z,{sx:{pl:2},children:e.cost.map((function(e){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)("li",{children:[(0,r.jsxs)("b",{children:[(0,Ue.words)(e.name),":"]})," ",e.value.toLocaleString()]})},e.name)}))}),(0,r.jsx)(k.Z,{sx:{mt:2},onClick:function(){return E(e.type)},variant:"contained",color:"success",children:"Build Building"},e.type)]})}))})]}),(0,r.jsx)(p.Z,{value:"destroy",children:"Click on a location to demolish the building there. You will get nothing back, and this cannot be undone."}),(0,r.jsx)(p.Z,{value:"market",children:(0,r.jsx)(cn,{hero:a,camp:ee,onBuyResource:function(){F()}})}),(0,r.jsxs)(p.Z,{value:"info",children:[!A&&(0,r.jsx)(d.Z,{}),A&&(0,r.jsx)(Qn,{location:A})]})]})]})})]})}function Xn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function et(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function nt(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){et(a,r,i,o,l,"next",e)}function l(e){et(a,r,i,o,l,"throw",e)}o(void 0)}))}}function tt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Xn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Xn(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(){var e,n=function(e,n){var t=Number(e),r=Number(n);NaN!==t&&NaN!==r&&Number.isFinite(t)&&Number.isFinite(r)&&(r=Math.min(95,Math.max(0,Math.round(r))),(t=Math.min(127,Math.max(0,Math.round(t))))!==u&&f(t),r!==x&&v(r))},t=$(),a=(0,i.useState)(!1),o=a[0],l=a[1],c=(0,i.useState)(-1),u=c[0],f=c[1],m=(0,i.useState)(-1),x=m[0],v=m[1],p=tt((0,le.g)(),2),g=p[0],y=p[1],b=tt((0,B.gK)(),2),Z=b[0],S=b[1].loading,w=tt((0,B.Q8)(),2),A=w[0],P=w[1].loading,C=se(),I=ce(),E=function(){var e=se(),n=(null===e||void 0===e?void 0:e.playerLocations)||[];return n.length?n[0]:null}(),L=(null===C||void 0===C?void 0:C.neighborTerrain.north)?C.neighborTerrain.north.terrain:"blocked",M=(null===C||void 0===C?void 0:C.neighborTerrain.south)?C.neighborTerrain.south.terrain:"blocked",O=(null===C||void 0===C?void 0:C.neighborTerrain.east)?C.neighborTerrain.east.terrain:"blocked",F=(null===C||void 0===C?void 0:C.neighborTerrain.west)?C.neighborTerrain.west.terrain:"blocked";if((0,i.useEffect)((function(){t&&(f(t.location.x),v(t.location.y))}),[t]),!t)return null;if(o)return(0,r.jsx)(Vn,{hero:t});var W=S||0===t.combat.health||g>0||P;function T(e){return z.apply(this,arguments)}function z(){return(z=nt(j().mark((function e(n){var t,r;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z({variables:{direction:n}});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(t=e.t0.graphQLErrors[0])||void 0===t||null===(r=t.extensions)||void 0===r?void 0:r.delay)&&y(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function q(){return(q=nt(j().mark((function e(){var n,t;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A({variables:{x:u,y:x}});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(n=e.t0.graphQLErrors[0])||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.delay)&&y(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var N,G=Math.round(Math.pow(5*(0,D.LW)(t.location,{x:u,y:x}),1.3));return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(h.ZP,{container:!0,columns:2,spacing:3,children:[(0,r.jsx)(h.ZP,{item:!0,xs:2,sm:1,children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:3,children:[(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:(0,r.jsx)(mn,{hero:t,onShowSettlement:function(){l(!0)}})}),(0,r.jsxs)(h.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:[(0,r.jsx)(d.Z,{variant:"h5",children:"Travel"}),t.combat.health>0&&(0,r.jsx)(d.Z,{children:"Use buttons to move around the map."}),0===t.combat.health&&(0,r.jsx)(d.Z,{variant:"h6",children:"You cannot move while dead. Heal yourself in the Combat tab."})]}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(k.Z,{"aria-label":"North terrain: ".concat(L),disabled:W,variant:"contained",onClick:function(){return T(B.p$.North)},children:"North"})}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(k.Z,{"aria-label":"West terrain: ".concat(F),disabled:W,variant:"contained",onClick:function(){return T(B.p$.West)},children:"West"})}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsxs)(d.Z,{children:[t.location.x,", ",t.location.y]})}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(k.Z,{"aria-label":"East terrain: ".concat(O),disabled:W,variant:"contained",onClick:function(){return T(B.p$.East)},children:"East"})}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(k.Z,{"aria-label":"South terrain: ".concat(M),disabled:W,variant:"contained",onClick:function(){return T(B.p$.South)},children:"South"})}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2}),t.stats.intelligence>100&&(0,r.jsxs)(h.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:[(0,r.jsx)(s.Z,{}),(0,r.jsx)(d.Z,{variant:"h5",color:"secondary",sx:{margin:1},children:"Teleport"}),(0,r.jsx)(Q.Z,{label:"X coordinate",value:u,onChange:function(e){return n(e.target.value,x)},sx:{width:"100px",margin:1}}),(0,r.jsx)(Q.Z,{label:"Y coordinate",value:x,onChange:function(e){return n(u,e.target.value)},sx:{width:"100px",margin:1}}),(0,r.jsx)("br",{}),(0,r.jsxs)(k.Z,{color:"secondary",variant:"outlined",onClick:function(){return q.apply(this,arguments)},disabled:0===G||G>t.stats.intelligence||W,children:["Teleport",(0,r.jsx)("br",{}),G>0&&"".concat(G.toLocaleString()," minimum intelligence")]})]})]})}),(0,r.jsxs)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,sm:1,children:[I&&(0,r.jsx)(d.Z,{variant:"h6",children:I.name}),I&&(0,r.jsx)(d.Z,{variant:"subtitle2",children:I.type}),E&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(d.Z,{variant:"h6",children:[null!==(N=null===(e=E.publicOwner)||void 0===e?void 0:e.name)&&void 0!==N?N:"???","'s Settlement"]}),(0,r.jsx)(d.Z,{variant:"subtitle2",children:E.type})]}),!I&&!E&&C&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"h6",children:"Wilderness"}),(0,r.jsx)(d.Z,{variant:"subtitle2",children:C.terrain.terrain})]}),!I&&!E&&!C&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"h6",children:"\xa0"}),(0,r.jsx)(d.Z,{variant:"subtitle2",children:"loading..."})]}),(0,r.jsx)(Oe,{location:t.location}),(null===I||void 0===I?void 0:I.description)&&I.description.map((function(e,n){return(0,r.jsx)(d.Z,{variant:"body1",children:e},"loc-desc-".concat(n))}))]}),"dock"===(null===I||void 0===I?void 0:I.type)&&(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)($e,{location:I})}),(null===C||void 0===C?void 0:C.shop)&&(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(Ne,{shop:null===C||void 0===C?void 0:C.shop})})]})})}var it,at=t(7948),ot=t(7416);function lt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function st(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function ct(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){st(a,r,i,o,l,"next",e)}function l(e){st(a,r,i,o,l,"throw",e)}o(void 0)}))}}function ut(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return lt(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lt(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(){var e=ut((0,le.g)(),2),n=e[0],t=e[1],a=(0,i.useState)(1),o=a[0],c=a[1],u=ut((0,B.Y4)(),2),f=u[0],m=u[1].loading,x=$();(null===x||void 0===x?void 0:x.attributePoints)&&(o=Math.min(o,x.attributePoints));var v="Spending ".concat(o.toLocaleString()," attribute points");function p(e){return g.apply(this,arguments)}function g(){return(g=ct(j().mark((function e(n){var r,i;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Leveling up...",n),e.prev=1,e.next=4,f({variables:{attribute:B.GC[n],amount:o}});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.graphQLErrors&&(null===(r=e.t0.graphQLErrors[0])||void 0===r||null===(i=r.extensions)||void 0===i?void 0:i.delay)&&t(e.t0.graphQLErrors[0].extensions.remaining);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(l.Z,{sx:{backgroundColor:"secondary.light"},children:[(0,r.jsx)("br",{}),(0,r.jsx)(d.Z,{variant:"h5",align:"center",children:"You have leveled up!"}),(0,r.jsxs)(at.Z,{children:[(0,r.jsx)(d.Z,{align:"center",children:"Each of your attributes increases by 1 when you level up. You may also choose an attribute to further increase."}),(0,r.jsx)(l.Z,{sx:{textAlign:"center",align:"center",ml:1,mr:1},children:x&&x.attributePoints>2&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{id:"level-up-stat-slider-label",children:v}),(0,r.jsx)(ot.ZP,{min:1,max:x.attributePoints,value:o,onChange:function(e,n){return!Array.isArray(n)&&c(n)},id:"level-up-stat-slider","aria-labelledby":"level-up-stat-slider-label",valueLabelDisplay:"auto"})]})})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(h.ZP,{container:!0,columns:14,spacing:2,children:[(0,r.jsx)(M.Z,{title:"Strength determines your damage when attacking with melee weapons",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-strength",disabled:m||n>0,onClick:function(){return p("Strength")},variant:"contained",children:"Strength"})})})}),(0,r.jsx)(M.Z,{title:"Dexterity determines the accuracy and dodge rate for melee and ranged weapons, it also determines ranged weapons damage",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-dexterity",disabled:m||n>0,onClick:function(){return p("Dexterity")},variant:"contained",children:"Dexterity"})})})}),(0,r.jsx)(M.Z,{title:"Constitution determines your max health, and is used in both attacking and defending blood magic",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-constitution",disabled:m||n>0,onClick:function(){return p("Constitution")},variant:"contained",children:"Constitution"})})})}),(0,r.jsx)(M.Z,{title:"Intelligence determines your spellcasting damage",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-intelligence",disabled:m||n>0,onClick:function(){return p("Intelligence")},variant:"contained",children:"Intelligence"})})})}),(0,r.jsx)(M.Z,{title:"Wisdom is your accuracy and dodge stat for spellcasting and smiting",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-wisdom",disabled:m||n>0,onClick:function(){return p("Wisdom")},variant:"contained",children:"Wisdom"})})})}),(0,r.jsx)(M.Z,{title:"Willpower helps you survive attacks by reducing damage, it also helps smiters deal deal more damage.",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-willpower",disabled:m||n>0,onClick:function(){return p("Willpower")},variant:"contained",children:"Willpower"})})})}),(0,r.jsx)(M.Z,{title:"Luck helps you critically strike foes and also affects item drop rates",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,md:12,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-luck",disabled:m||n>0,onClick:function(){return p("Luck")},variant:"contained",children:"Luck"})})})}),(0,r.jsx)(M.Z,{title:"Places 1 in every stat for a more well rounded character",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,md:12,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-all",disabled:m||n>0,onClick:function(){return p("All")},variant:"contained",children:"All"})})})})]}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]}),(0,r.jsx)(s.Z,{})]})}function ht(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ft(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function mt(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){ft(a,r,i,o,l,"next",e)}function l(e){ft(a,r,i,o,l,"throw",e)}o(void 0)}))}}function xt(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function vt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return ht(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ht(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pt=(xt(it={},B.$7.MeleeWeapon,"Melee Weapon"),xt(it,B.$7.RangedWeapon,"Ranged Weapon"),xt(it,B.$7.SpellFocus,"Spell Focus"),xt(it,B.$7.Shield,"Shield"),xt(it,B.$7.BodyArmor,"Body Armor"),xt(it,B.$7.HandArmor,"Gauntlets"),xt(it,B.$7.LegArmor,"Leggings"),xt(it,B.$7.HeadArmor,"Helmet"),xt(it,B.$7.FootArmor,"Greaves"),it);function gt(e){var n;return null!==(n=pt[e])&&void 0!==n?n:(0,D.qh)(e)}function yt(e){var n=e.value,t=e.onChange,a=e.sellables,o=function(e){var n="string"===typeof e?e:e.baseItem,t=a.find((function(e){return e.id===n}));return t&&t.cost?function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){xt(e,n,t[n])}))}return e}({},t,{cost:Math.round(t.cost/3)}):null},l=$();if(!l)return null;var s=l.inventory.filter((function(e){return!e.enchantment})).filter((function(e){return e.type!==B.$7.Quest})).sort((function(e,n){return e.level-n.level})),c="Sell non-enchanted gear";return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"sell-shop-select-label",children:c}),(0,r.jsx)(z.Z,{id:"sell-shop-select",labelId:"sell-shop-select-label",value:n||"",label:c,onChange:function(e){var n=e.target.value,r=l.inventory.find((function(e){return e.id===n}));if(r){var i=o(r);i&&i.cost&&t&&t({id:n,name:(0,D.GJ)(r),cost:i.cost})}},children:s.map((function(e){var n=o(e);return(0,r.jsxs)(q.Z,{value:e.id,disabled:!n||!!e.enchantment||(0,D.mQ)(l,e),children:[(null===n||void 0===n?void 0:n.cost)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{display:"inline-block",children:(0,D.GJ)(e)}),"\xa0",(0,r.jsxs)(d.Z,{variant:"caption",display:"inline-block",children:["Lvl. ",e.level]}),"\xa0",(0,r.jsxs)(d.Z,{variant:"subtitle2",display:"inline-block",sx:{color:"info.main"},children:[n.cost.toLocaleString()," Gold"]})]}),!(null===n||void 0===n?void 0:n.cost)&&e.name," ",(0,D.mQ)(l,e)&&"*EQUIPPED*"]},e.id)}))})]})})}function bt(e){var n=e.type,t=e.items,i=e.value,a=e.onChange,o=$(),l=gt(n),s="".concat(l," Shop");return o?(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"".concat(n,"-shop-select-label"),children:s}),(0,r.jsx)(z.Z,{id:"".concat(n,"-shop-select"),labelId:"".concat(n,"-shop-select-label"),value:i||"",label:s,onChange:function(e){var n=e.target.value,r=t.find((function(e){return e.id===n}));a&&r&&r.cost&&a({id:n,name:r.name,cost:r.cost})},children:t.map((function(e){return(0,r.jsxs)(q.Z,{value:e.id,disabled:!e.cost||e.cost>o.gold,children:[e.cost&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{display:"inline-block",children:e.name}),"\xa0",(0,r.jsxs)(d.Z,{variant:"caption",display:"inline-block",children:["Lvl. ",e.level]}),"\xa0",(0,r.jsxs)(d.Z,{variant:"subtitle2",display:"inline-block",sx:{color:"info.main"},children:[e.cost.toLocaleString()," Gold"]})]}),!e.cost&&e.name]},e.id)}))})]}):null}function jt(){var e=vt((0,le.g)(),1)[0],n=(0,i.useState)(null),t=n[0],a=n[1],o=(0,i.useState)(""),l=o[0],c=o[1],u=(0,B.Cb)(),f=u.data,m=(u.loading,u.error,vt((0,B.Nn)(),2)),x=m[0],v=m[1].loading,p=vt((0,B.o_)(),2),g=p[0],y=p[1].loading||v||e>0;function b(){return(b=mt(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a(null),e.next=6,x({variables:{baseItem:t.id}});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function Z(){return(Z=mt(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a(null),e.next=6,g({variables:{item:t.id}});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}var S,w="Choose which shop to visit";return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(d.Z,{align:"center",children:["Welcome to the shop! You can buy and sell any non-enchanted items here.",(0,r.jsx)("br",{}),"The items purchasable here have a level from 1 to 32 but no enchantments or direct attribute increases."]}),(0,r.jsx)("br",{}),(0,r.jsx)(s.Z,{}),(0,r.jsx)("br",{}),(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:2,children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"shop-type-select-label",children:w}),(0,r.jsxs)(z.Z,{id:"shop-type-select",labelId:"shop-type-select-label",value:l,label:w,onChange:function(e){c(e.target.value),a(null)},children:[(0,r.jsx)(q.Z,{value:"sell",children:"Sell Items"}),(0,r.jsx)(s.Z,{}),(0,r.jsxs)(q.Z,{value:B.$7.MeleeWeapon,children:[gt(B.$7.MeleeWeapon)," Shop"]}),(0,r.jsxs)(q.Z,{value:B.$7.RangedWeapon,children:[gt(B.$7.RangedWeapon)," Shop"]}),(0,r.jsxs)(q.Z,{value:B.$7.SpellFocus,children:[gt(B.$7.SpellFocus)," Shop"]}),(0,r.jsxs)(q.Z,{value:B.$7.Shield,children:[gt(B.$7.Shield)," Shop"]}),(0,r.jsxs)(q.Z,{value:B.$7.BodyArmor,children:[gt(B.$7.BodyArmor)," Shop"]}),(0,r.jsxs)(q.Z,{value:B.$7.HandArmor,children:[gt(B.$7.HandArmor)," Shop"]}),(0,r.jsxs)(q.Z,{value:B.$7.LegArmor,children:[gt(B.$7.LegArmor)," Shop"]}),(0,r.jsxs)(q.Z,{value:B.$7.HeadArmor,children:[gt(B.$7.HeadArmor)," Shop"]}),(0,r.jsxs)(q.Z,{value:B.$7.FootArmor,children:[gt(B.$7.FootArmor)," Shop"]})]})]})}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,children:[""!==l&&"sell"!==l&&(0,r.jsx)(bt,{value:t?t.id:null,type:l,items:function(e){var n;return(null===f||void 0===f||null===(n=f.shopItems)||void 0===n?void 0:n.length)?f.shopItems.filter((function(n){return n.type===e})):[]}(l),onChange:function(e){return a(e)}},l),"sell"===l&&(0,r.jsx)(yt,{value:t?t.id:null,sellables:null!==(S=null===f||void 0===f?void 0:f.shopItems)&&void 0!==S?S:[],onChange:function(e){return a(e)}})]}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:t&&(0,r.jsxs)(k.Z,{variant:"contained",color:"sell"===l?"error":"success",fullWidth:!0,disabled:y,onClick:"sell"===l?function(){return Z.apply(this,arguments)}:function(){return b.apply(this,arguments)},children:["sell"===l?"Sell":"Buy"," ",t.name," for"," ",t.cost.toLocaleString()," gold"]})})]}),(0,r.jsx)("br",{})]})}function Zt(){$();var e=se();ce();return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"h3",sx:{textAlign:"center"},children:"Item Shop"}),(0,r.jsx)(jt,{}),(null===e||void 0===e?void 0:e.shop)&&(0,r.jsx)(Ne,{shop:null===e||void 0===e?void 0:e.shop})]})}function St(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function wt(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function At(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){wt(a,r,i,o,l,"next",e)}function l(e){wt(a,r,i,o,l,"throw",e)}o(void 0)}))}}function kt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return St(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return St(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e){var n=e.hero,t=(e.disabled,kt((0,B.Nw)(),2)),a=t[0],o=(t[1].loading,n.level>=n.levelCap);function s(){return(s=At(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsxs)(l.Z,{sx:{padding:1,margin:1},children:[(0,r.jsx)(d.Z,{color:"secondary",variant:"h2",children:"Rebirth"}),!o&&(0,r.jsx)(d.Z,{children:"You may only be reborn when you are at level cap. Keep leveling up your character in order to be reborn!"}),o&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{children:"This will reset your character's level and attributes, however you will keep all gold and items and will receive special bonuses depending on your current level cap."}),(0,r.jsx)("br",{}),(0,r.jsx)(k.Z,{size:"large",variant:"outlined",color:"secondary",onClick:function(){return s.apply(this,arguments)},children:"Reset Character to Level 1"})]})]})}var Ct=t(5988),It=t(9629);function Et(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Lt(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Mt(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Lt(a,r,i,o,l,"next",e)}function l(e){Lt(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Ot(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Et(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Et(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e){var n=e.hero,t=e.disabled,a=(0,i.useState)(""),o=a[0],l=a[1],s=(0,i.useState)(""),c=s[0],u=s[1],h=!!n.inventory.find((function(e){return(0,D.kJ)(e.baseItem)})),f=Ot((0,B.Pw)(),2),m=f[0],x=f[1].loading,v=n.inventory.filter((function(e){return e.type!==B.$7.Quest&&(!(0,D.mQ)(n,e)&&!!e.enchantment)})),p=v.filter((function(e){return""===c||e.enchantment===c})).sort(D.v4),g=v.filter((function(e){return!(0,D.mQ)(n,e)})).map((function(e){return e.enchantment})).reduce((function(e,n){return n?(e.indexOf(n)<0&&e.push(n),e):e}),[]),y="Select item to destroy",b=p.find((function(e){return e.id===o}));function Z(){return(Z=Mt(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({variables:{item:o}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return!b&&o.length&&(p.length?(b=p[0],o=b.id):o=""),(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"body1",children:"Select an enchanted item you would like to destroy, smashing it with the crafting hammer into fine Enchanting Dust."}),(0,r.jsx)("br",{}),(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"destroy-select-label",children:y}),(0,r.jsx)(z.Z,{id:"destroy-select",labelId:"destroy-select-label",value:o||"",label:y,onChange:function(e){var t=e.target.value;n.inventory.find((function(e){return e.id===t}))&&l(t)},children:p.map((function(e){return(0,r.jsxs)(q.Z,{value:e.id,disabled:(0,D.mQ)(n,e),children:[(0,D.GJ)(e)," ",(0,D.mQ)(n,e)&&"*EQUIPPED*",e.enchantment&&(0,r.jsxs)(d.Z,{variant:"subtitle2",sx:{color:"info.main"},children:["\xa0",(0,D.Lt)(e.enchantment)]})]},e.id)}))}),(0,r.jsxs)(k.Z,{variant:"contained",disabled:!b||t||x,color:"error",onClick:function(){return Z.apply(this,arguments)},children:[b&&(0,r.jsxs)(i.Fragment,{children:["Destroy ",(0,D.GJ)(b)]}),!b&&"Select Item"]})]}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),h&&(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"filter-select-label",children:"Filter by enchantment"}),(0,r.jsx)(z.Z,{id:"filter-select",labelId:"filter-select-label",value:c||"",label:"Filter by enchantment",onChange:function(e){var t=e.target.value;n.inventory.find((function(e){return e.enchantment===t}))&&u(t)},children:g.map((function(e){return(0,r.jsxs)(q.Z,{value:e,children:[(0,D.uD)(e),"???"!==(0,D.Lt)(e)&&(0,r.jsxs)(d.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:["\xa0",(0,D.Lt)(e)]})]},e)}))})]})]})}function Wt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Tt(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Bt(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Tt(a,r,i,o,l,"next",e)}function l(e){Tt(a,r,i,o,l,"throw",e)}o(void 0)}))}}function $t(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||zt(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e){return function(e){if(Array.isArray(e))return Wt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,n){if(e){if("string"===typeof e)return Wt(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Wt(e,n):void 0}}function qt(e){var n=e.hero,t=e.disabled,a=(0,i.useState)(""),o=a[0],s=a[1],c=(0,i.useState)(""),u=c[0],h=c[1],f=$t((0,B.mE)(),2),m=f[0],x=f[1].loading,v=n.inventory.filter((function(e){return e.type!==B.$7.Quest&&!e.enchantment})).sort(D.v4),p={},g=Dt(n.enchantments).sort().filter((function(e){var n;return p[e]?(p[e]=(null!==(n=p[e])&&void 0!==n?n:0)+1,!1):(p[e]=1,!0)})),y=v.find((function(e){return e.id===o}));!y&&o.length&&(v.length?(y=v[0],o=y.id):o="");var b=g.find((function(e){return e===u}));function Z(){return(Z=Bt(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,m({variables:{item:o,enchantment:u}});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}!b&&u.length&&(g.length?(b=g[0],u=b):u="");var S=y?y.level:0,w="Select base item",A="Select an enchantment";return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"body1",children:"Enchanting allows you to combine a pure item and pure enchantment into a new enchanted item! You can acquire pure enchantments through disenchanting items."}),(0,r.jsx)("br",{}),(0,r.jsxs)(I.Z,{fullWidth:!0,sx:{margin:1},children:[(0,r.jsx)(E.Z,{id:"enchant-baseItem-select-label",children:w}),(0,r.jsx)(z.Z,{id:"enchant-baseItem-select",labelId:"enchant-baseItem-select-label",value:o||"",label:w,onChange:function(e){var t=e.target.value;n.inventory.find((function(e){return e.id===t}))&&s(t)},children:v.map((function(e){return(0,r.jsxs)(q.Z,{value:e.id,children:[(0,D.GJ)(e),(0,D.mQ)(n,e)&&"*EQUIPPED*"]},e.id)}))})]}),(0,r.jsxs)(I.Z,{fullWidth:!0,sx:{margin:1},children:[(0,r.jsx)(E.Z,{id:"enchant-enchantment-select-label",children:A}),(0,r.jsx)(z.Z,{id:"enchant-enchantment-select",labelId:"enchant-enchantment-select-label",value:u||"",label:A,onChange:function(e){var n=e.target.value,t=g.find((function(e){return n===e}));t&&h(t)},children:g.map((function(e){return(0,r.jsxs)(q.Z,{value:e,children:[(0,D.uD)(e)," ",p[e]&&p[e]>1&&"(".concat(p[e],")"),"???"!==(0,D.Lt)(e)&&(0,r.jsxs)(d.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:["\xa0",(0,D.Lt)(e)]})]},e)}))})]}),(0,r.jsxs)(k.Z,{fullWidth:!0,variant:"contained",disabled:!y||t||x||S>n.enchantingDust,color:"success",onClick:function(){return Z.apply(this,arguments)},children:[y&&""!==u&&(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(d.Z,{children:["Create"," ",(0,r.jsx)("b",{children:(0,D.FK)(y.baseItem,u)})]}),(0,r.jsxs)(d.Z,{variant:"subtitle2",children:["Costs ",S.toLocaleString()," Enchantment Dust"]})]}),!y&&"Select Item"]})]})}function Qt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Nt(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Gt(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Nt(a,r,i,o,l,"next",e)}function l(e){Nt(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Rt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Qt(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Qt(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e){var n=e.hero,t=e.disabled,a=(0,i.useState)(""),o=a[0],s=a[1],c=(0,i.useState)(""),u=c[0],h=c[1],f=!!n.inventory.find((function(e){return(0,D.kJ)(e.baseItem)})),m=Rt((0,B.dg)(),2),x=m[0],v=m[1].loading,p=n.inventory.filter((function(e){return e.type!==B.$7.Quest&&(!(0,D.mQ)(n,e)&&!!e.enchantment)})),g=p.filter((function(e){return""===o||e.enchantment===o})).sort(D.v4),y=p.filter((function(e){return!(0,D.mQ)(n,e)})).map((function(e){return e.enchantment})).reduce((function(e,n){return n?(e.indexOf(n)<0&&e.push(n),e):e}),[]),b=g.find((function(e){return e.id===u}));function Z(){return(Z=Gt(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x({variables:{item:u}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}!b&&u.length&&(g.length?(b=g[0],u=b.id):u="");var S="Select item to disenchant",w=b?b.level:0;return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"body1",children:"Select an item to split from its enchantment. You will keep both the base item and the enchantment itself for use in further crafting."}),(0,r.jsx)("br",{}),(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"disenchant-select-label",children:S}),(0,r.jsx)(z.Z,{id:"disenchant-select",labelId:"disenchant-select-label",value:u||"",label:S,onChange:function(e){var t=e.target.value;n.inventory.find((function(e){return e.id===t}))&&h(t)},children:g.map((function(e){return(0,r.jsxs)(q.Z,{value:e.id,disabled:(0,D.mQ)(n,e),children:[(0,D.GJ)(e)," ",(0,D.mQ)(n,e)&&"*EQUIPPED*",e.enchantment&&(0,r.jsxs)(d.Z,{variant:"subtitle2",sx:{color:"info.main"},children:["\xa0",(0,D.Lt)(e.enchantment)]})]},e.id)}))}),(0,r.jsxs)(k.Z,{variant:"contained",disabled:!b||t||v||w>n.enchantingDust,color:"error",onClick:function(){return Z.apply(this,arguments)},children:[b&&(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(d.Z,{children:["Disenchant ",(0,r.jsx)("b",{children:(0,D.GJ)(b)})]}),(0,r.jsxs)(d.Z,{variant:"subtitle2",children:["Costs ",w.toLocaleString()," Enchantment Dust"]})]}),!b&&"Select Item"]})]}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),f&&(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"filter-select-label",children:"Filter by enchantment"}),(0,r.jsx)(z.Z,{id:"filter-select",labelId:"filter-select-label",value:o||"",label:"Filter by enchantment",onChange:function(e){var t=e.target.value;n.inventory.find((function(e){return e.enchantment===t}))&&s(t)},children:y.map((function(e){return(0,r.jsxs)(q.Z,{value:e,children:[(0,D.uD)(e),"???"!==(0,D.Lt)(e)&&(0,r.jsxs)(d.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:["\xa0",(0,D.Lt)(e)]})]},e)}))})]})]})}function Ut(e){var n=e.hero,t=e.disabled,a=(0,i.useState)("1"),o=a[0],c=a[1];return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(s.Z,{sx:{margin:2}}),(0,r.jsx)(d.Z,{variant:"h2",color:"secondary",children:"Crafting"}),(0,r.jsxs)(d.Z,{variant:"subtitle1",color:"secondary",children:["Enchanting Dust:"," ",(0,r.jsx)("span",{id:"hero-stats-enchanting-dust",children:n.enchantingDust.toLocaleString()})]}),(0,r.jsxs)(d.Z,{variant:"subtitle1",color:"secondary",children:["Enchantments:"," ",(0,r.jsx)("span",{id:"hero-stats-enchantments",children:n.enchantments.length.toLocaleString()})]}),(0,r.jsx)("br",{}),(0,r.jsx)(x.ZP,{value:o,children:(0,r.jsxs)(l.Z,{sx:{flexGrow:1,borderBottom:1,borderColor:"divider",display:"flex"},children:[(0,r.jsxs)(v.Z,{orientation:"vertical",onChange:function(e,n){return c(n)},"aria-label":"navigation tabs",variant:"scrollable",textColor:"secondary",indicatorColor:"secondary",sx:{flexShrink:0,flexGrow:0,width:"100px"},children:[(0,r.jsx)(u.Z,{icon:(0,r.jsx)(Cn.Z,{}),label:"Destroy",value:"1"}),(0,r.jsx)(u.Z,{icon:(0,r.jsx)(It.Z,{}),label:"Disenchant",value:"2"}),(0,r.jsx)(u.Z,{icon:(0,r.jsx)(Ct.Z,{}),label:"Enchant",value:"3"})]}),(0,r.jsx)(p.Z,{value:"1",children:(0,r.jsx)(Ft,{hero:n,disabled:t})}),(0,r.jsx)(p.Z,{value:"2",children:(0,r.jsx)(Ht,{hero:n,disabled:t})}),(0,r.jsx)(p.Z,{value:"3",children:(0,r.jsx)(qt,{hero:n,disabled:t})})]})})]})}function Yt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Jt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Yt(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Yt(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(e){e.hero,e.disabled;var n=function(){var e,n=se();return null!==(e=null===n||void 0===n?void 0:n.voidTravel)&&void 0!==e&&e}(),t=Jt((0,B.Rz)(),1)[0];return(0,r.jsxs)(l.Z,{sx:{padding:1,margin:1},children:[(0,r.jsx)(d.Z,{color:"secondary",variant:"h2",children:"Void Travel"}),(0,r.jsx)(d.Z,{sx:{mb:2},children:"Void dimensions have different rules than the overworld. While each void world which you visit may varry in mechanics, there is one common rule: Death in a void world results in immediate overworld rebirth."}),!n&&(0,r.jsx)(k.Z,{disabled:!0,size:"large",variant:"outlined",color:"error",children:"You must be near a void conduit"}),n&&(0,r.jsx)(k.Z,{size:"large",variant:"outlined",color:"secondary",onClick:function(){return t()},children:"Travel to the void"})]})}function _t(e){var n,t=e.hero,a=e.slot,o=e.label,l=e.onEquip,s=e.disabled,c=null===(n=t.equipment[a])||void 0===n?void 0:n.id,u=["leftHand","rightHand","bodyArmor","handArmor","legArmor","headArmor","footArmor"].filter((function(e){return t.equipment[e]&&e!==a})).map((function(e){var n;return null===(n=t.equipment[e])||void 0===n?void 0:n.id})),h=(0,i.useState)(c||""),f=(h[0],h[1]),m=t.inventory.filter((function(e){return function(e,n){switch(e){case"rightHand":case"leftHand":return n.type===B.$7.MeleeWeapon||n.type===B.$7.RangedWeapon||n.type===B.$7.Shield||n.type===B.$7.SpellFocus;case"bodyArmor":return n.type===B.$7.BodyArmor;case"handArmor":return n.type===B.$7.HandArmor;case"legArmor":return n.type===B.$7.LegArmor;case"headArmor":return n.type===B.$7.HeadArmor;case"footArmor":return n.type===B.$7.FootArmor;default:return!1}}(a,e)})).sort(D.v4);return(0,r.jsx)(i.Fragment,{children:(0,r.jsx)("div",{children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"".concat(a,"-equip-select-label"),children:o}),(0,r.jsx)(z.Z,{id:"".concat(a,"-equip-select"),labelId:"".concat(a,"-equip-select-label"),value:c||"",label:o,disabled:s,onChange:function(e){f(e.target.value),l(a,e.target.value)},children:m.map((function(e){return(0,r.jsxs)(q.Z,{value:e.id,disabled:u.indexOf(e.id)>=0,children:[e.id===c?(0,r.jsx)("b",{children:(0,D.GJ)(e)}):(0,D.GJ)(e),(0,r.jsxs)(d.Z,{variant:"caption",sx:{color:"info.secondary"},children:["\xa0Lvl. ",e.level]}),e.enchantment&&(0,r.jsxs)(d.Z,{variant:"subtitle2",sx:{color:"info.main"},children:["\xa0",(0,D.Lt)(e.enchantment)]})]},e.id)}))})]})})})}function Vt(e){var n=e.hero,t=e.disabled,a=e.onChange,o=(0,i.useState)(""),l=o[0],s=o[1],c=n.inventory.filter((function(e){return e.type===B.$7.Quest})).sort((function(e,n){return n.level-e.level})),u="Quest items (passive, always active)",h=n.inventory.find((function(e){return e.id===l}));return(0,i.useEffect)((function(){l.length&&!h&&s("")}),[h,l]),(0,r.jsx)(i.Fragment,{children:(0,r.jsx)("div",{children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(E.Z,{id:"quest-item-label",children:u}),(0,r.jsx)(z.Z,{id:"quest-item",labelId:"quest-item-label",value:l,label:u,disabled:t,onChange:function(e){if(s(e.target.value),a){var n=c.find((function(n){return n.id===e.target.value}));n&&a(n.baseItem)}},children:c.map((function(e){return(0,r.jsxs)(q.Z,{value:e.id,children:[(0,D.GJ)(e),"???"!==(0,D.Lt)(e.baseItem)&&(0,r.jsxs)(d.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:["\xa0",(0,D.Lt)(e.baseItem)]})]},e.id)}))})]})})})}function Xt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function er(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function nr(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){er(a,r,i,o,l,"next",e)}function l(e){er(a,r,i,o,l,"throw",e)}o(void 0)}))}}function tr(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Xt(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Xt(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(){var e=tr((0,le.g)(),1)[0],n=tr((0,B.aP)(),2),t=n[0],a=n[1].loading,o=(0,i.useState)(""),l=o[0],s=o[1],c=$(),u=a||e>0;if(!c)return null;function f(e,n){return m.apply(this,arguments)}function m(){return(m=nr(j().mark((function e(n,r){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({variables:{item:r,slot:n}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:1,children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(d.Z,{variant:"h3",sx:{fontSize:"1.2rem"},children:"Equipped items"})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(_t,{hero:c,slot:"leftHand",label:"Left Hand",onEquip:f,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(_t,{hero:c,slot:"rightHand",label:"Right Hand",onEquip:f,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(_t,{hero:c,slot:"bodyArmor",label:"Body Armor",onEquip:f,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(_t,{hero:c,slot:"handArmor",label:"Gauntlets",onEquip:f,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(_t,{hero:c,slot:"legArmor",label:"Leggings",onEquip:f,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(_t,{hero:c,slot:"headArmor",label:"Helmets",onEquip:f,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(_t,{hero:c,slot:"footArmor",label:"Greaves",onEquip:f,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Vt,{hero:c,disabled:u,onChange:s})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:c.equipment.artifact&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{children:"Active artifact"}),(0,r.jsx)(_,{artifact:c.equipment.artifact})]})}),c.level===c.levelCap&&(0,D.jr)(l)&&(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(Pt,{hero:c,disabled:u})}),(0,D.OB)(l)&&(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(Ut,{hero:c,disabled:u})}),(0,D.jj)(l)&&(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(Kt,{hero:c,disabled:u})})]})})}function ir(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ar(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return ir(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ir(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function or(e){var n=function(){a()},t=e.event.message,i=ar((0,B.PF)(),2),a=i[0],o=i[1].loading;return(0,r.jsx)(f.Z,{children:(0,r.jsxs)(Ye.Z,{open:!0,onClose:n,"aria-labelledby":"quest-event-title","aria-describedby":"quest-event-description",children:[(0,r.jsx)(Ve.Z,{id:"quest-event-title",children:"Quest Event"}),(0,r.jsx)(Ke.Z,{id:"quest-event-description",children:t&&t.map((function(e,n){return(0,r.jsx)(_e.Z,{children:e},"".concat(n))}))}),(0,r.jsx)(Je.Z,{children:(0,r.jsx)(k.Z,{variant:"contained",color:"error",onClick:n,disabled:o,children:"Continue"})})]})})}var lr=t(7358),sr=t(8895),cr=t(2797),ur=t(3508),dr=t(888),hr=t(8304);function fr(e){var n,t,a,o,s,u=e.quest,h=(0,i.useState)(!1),f=(h[0],h[1],(0,B.QT)({variables:(null===u||void 0===u||null===(n=u.lastEvent)||void 0===n?void 0:n.quest)?{quest:null===u||void 0===u||null===(t=u.lastEvent)||void 0===t?void 0:t.quest}:void 0,skip:!(null===u||void 0===u||null===(a=u.lastEvent)||void 0===a?void 0:a.quest)})),m=f.data,x=f.loading;if(!(null===u||void 0===u||null===(o=u.lastEvent)||void 0===o?void 0:o.quest)||x||!m)return(0,r.jsx)("div",{});var v=m.quest,p=u.progress||1;return p=Math.log2(p),(0,r.jsxs)(lr.Z,{children:[(0,r.jsx)(sr.Z,{expandIcon:(0,r.jsx)(ur.Z,{}),children:(0,r.jsxs)(rn.Z,{direction:"row",sx:{width:"100%"},spacing:1,children:[u.finished&&(0,r.jsx)(dr.Z,{}),!u.finished&&(0,r.jsx)(hr.Z,{}),(0,r.jsxs)(rn.Z,{sx:{width:"100%"},children:[(0,r.jsx)(d.Z,{sx:{lineHeight:3},children:(0,D.qh)(v.id)}),(0,r.jsx)(c.Z,{variant:"determinate",color:u.finished?"success":"secondary",value:u.finished?100:100*p/(p+1)})]})]})}),(0,r.jsxs)(cr.Z,{children:[(0,r.jsx)(d.Z,{children:v.description}),(null===(s=u.lastEvent)||void 0===s?void 0:s.message)&&(0,r.jsxs)(l.Z,{sx:{bgcolor:"warning.light",color:"warning.contrast",margin:2,padding:2},children:[(0,r.jsx)(d.Z,{variant:"h6",children:"Last event:"}),u.lastEvent.message.map((function(e,n){return(0,r.jsx)(d.Z,{sx:{fontStyle:"italic"},children:e},"".concat(n))}))]})]})]})}function mr(){var e=$();if(!e)return null;var n=e.questLog;e.currentQuest;return 2===Object.values(n).filter((function(e){return!!e})).length?(0,r.jsx)(l.Z,{children:"You have not yet started any quests. Explore the world and grow stronger."}):(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(d.Z,{variant:"h4",children:"Quest Log"}),(0,r.jsx)("br",{}),Object.values(n).filter((function(e){return!!e&&"string"!==typeof e})).sort((function(e,n){return e.finished?n.finished?n.progress-e.progress:1:n.finished?-1:n.progress-e.progress})).map((function(e){return e&&"string"!==typeof e?(0,r.jsx)(fr,{quest:e},e.id):null}))]})}function xr(e,n){return"".concat((Math.round(e/n*1e3)/10).toLocaleString(),"%")}function vr(e){var n=e.stats,t=e.skills;return(0,r.jsx)(l.Z,{children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:2,children:[(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Strength"}),": ",n.stats.strength.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Dexterity"}),": ",n.stats.dexterity.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Constitution"}),": ",n.stats.constitution.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Intelligence"}),": ",n.stats.intelligence.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Wisdom"}),": ",n.stats.wisdom.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Willpower"}),": ",n.stats.willpower.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Luck"}),": ",n.stats.luck.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Bonus Armor"}),": ",xr(n.damageReduction-1,1)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Bonus Damage"}),":"," ",xr(n.damageAmplification-1,1)]}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(h.ZP,{})}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Attacking Accuracy"}),": ",t.attackingAccuracy.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Attacking Damage"}),": ",t.attackingDamage.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Casting Accuracy"}),": ",t.castingAccuracy.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Casting Damage"}),": ",t.castingDamage.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Vitality"}),": ",t.vitality.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Resilience"}),": ",t.resilience.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Regeneration"}),": ",t.regeneration.toLocaleString()]}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(h.ZP,{})}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Strength"}),":"," ",xr(n.enemyStats.strength-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Dexterity"}),":"," ",xr(n.enemyStats.dexterity-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Constitution"}),":"," ",xr(n.enemyStats.constitution-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Intelligence"}),":"," ",xr(n.enemyStats.intelligence-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Wisdom"}),":"," ",xr(n.enemyStats.wisdom-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Willpower"}),":"," ",xr(n.enemyStats.willpower-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Luck"}),":"," ",xr(n.enemyStats.luck-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Armor Reduction"}),":"," ",xr(n.armorReduction-1,1)]})]})})}function pr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function gr(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function yr(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){gr(a,r,i,o,l,"next",e)}function l(e){gr(a,r,i,o,l,"throw",e)}o(void 0)}))}}function br(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return pr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pr(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(e){var n=e.hero,t=br((0,B.w3)(),1)[0],a=(0,i.useState)(n.settings.autoDust),o=a[0],l=a[1];function s(){return(s=yr(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({variables:{value:o}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(d.Z,{variant:"h5",children:"Autodust"})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(d.Z,{variant:"subtitle2",children:"Automatically destroy enchanted items as they drop off monsters if they are at or below the following level."})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(Q.Z,{label:"Gear Level",value:o,onChange:function(e){return function(e){var n=Math.round(Number(e));!isNaN(n)&&Number.isFinite(n)&&l(n)}(e.target.value)}})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(k.Z,{onClick:function(){return s.apply(this,arguments)},children:"Save"})})]})})}function Zr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Sr(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Zr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Zr(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wr={attackingAccuracy:"Attacking Accuracy",attackingDamage:"Attacking Damage",castingAccuracy:"Casting Accuracy",castingDamage:"Casting Damage",vitality:"Vitality",resilience:"Resilience",regeneration:"Regeneration"};function Ar(e){var n=e.hero,t=(0,i.useState)(n.skillPercent),a=t[0],o=t[1],l=Sr((0,B.Xx)(),2),s=l[0],c=l[1].loading,u=Sr((0,B.hv)(),2),h=u[0],f=u[1].loading;return(0,r.jsxs)("div",{children:[(0,r.jsx)(d.Z,{variant:"h4",children:"Skills"}),(0,r.jsx)(d.Z,{sx:{mb:1},children:"Select which skill you would like to improve, as well as percentage of how devoted your character is to leveling it up as opposed to receiving experience. This means that incoming experience is reduced by the percentage, however the amount of experience you gain doesn't affect the chances of gaining a skill level."}),(0,r.jsxs)(I.Z,{sx:{mb:5},children:[(0,r.jsx)(E.Z,{id:"active-skill-select-label",children:"Active Skill"}),(0,r.jsx)(z.Z,{labelId:"active-skill-select-label",id:"active-skill-select",value:n.activeSkill,label:"Active Skill",disabled:c,onChange:function(e){return s({variables:{skill:e.target.value}})},children:Object.values(B.lq).map((function(e){return(0,r.jsx)(q.Z,{value:e,children:wr[e]},e)}))})]}),(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(ot.ZP,{value:a,step:1,getAriaValueText:function(e){return"".concat(e,"%")},onChange:function(e,n){return!Array.isArray(n)&&o(n)},"aria-label":"Percent experience towards skills",valueLabelDisplay:"on",disabled:f}),(0,r.jsx)(k.Z,{disabled:f,onClick:function(){return h({variables:{percent:a}})},children:"Save Percent"})]})]})}function kr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Pr(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Cr(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Pr(a,r,i,o,l,"next",e)}function l(e){Pr(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Ir(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return kr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return kr(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Er(e){var n,t=e.hero,a=e.stat,o=(0,i.useState)(null!==(n=t.settings.minimumStats[a])&&void 0!==n?n:10),l=o[0],s=o[1],c=Ir((0,B.Rw)(),1)[0];function u(){return(u=Cr(j().mark((function e(n){var t;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Number(n),!isNaN(t)&&Number.isFinite(t)){e.next=3;break}return e.abrupt("return");case 3:t=Math.max(1,Math.min(2e9,t)),s(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=Cr(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{name:a,value:l}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(h.ZP,{item:!0,md:1,xs:2,children:["".concat(a.substr(0,1).toUpperCase()).concat(a.substr(1)),":"]}),(0,r.jsx)(h.ZP,{item:!0,xs:1,sm:2,children:(0,r.jsx)(Q.Z,{fullWidth:!0,label:"Minimum ".concat(a),value:l,onChange:function(e){return function(e){return u.apply(this,arguments)}(e.target.value)}})}),(0,r.jsx)(h.ZP,{item:!0,md:3,sm:2,xs:3,children:(0,r.jsxs)(k.Z,{onClick:function(){return d.apply(this,arguments)},children:["Set minimum ",a]})})]})}function Lr(){var e=$();return e?(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(d.Z,{variant:"h2",children:"Settings"}),(0,r.jsx)(d.Z,{variant:"subtitle2",sx:{mb:1},children:"Configure your mysterious automation"}),(0,r.jsx)(Ar,{hero:e}),(0,r.jsx)(d.Z,{variant:"h5",children:"Minimum Stats"}),(0,r.jsx)(d.Z,{variant:"subtitle2",children:"Prevents transfering from lowering your stats below these values..."}),(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:2,children:[(0,r.jsx)(Er,{hero:e,stat:"strength"}),(0,r.jsx)(Er,{hero:e,stat:"dexterity"}),(0,r.jsx)(Er,{hero:e,stat:"constitution"}),(0,r.jsx)(Er,{hero:e,stat:"intelligence"}),(0,r.jsx)(Er,{hero:e,stat:"wisdom"}),(0,r.jsx)(Er,{hero:e,stat:"willpower"}),(0,r.jsx)(Er,{hero:e,stat:"luck"})]}),(0,r.jsx)(jr,{hero:e})]}):(0,r.jsx)("div",{})}function Mr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Or(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Mr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Mr(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Fr=(0,o.default)((function(){return t.e(371).then(t.bind(t,2371))}),{loadableGenerated:{webpack:function(){return[2371]}}});function Wr(){var e,n,t,o,b,j,Z=(0,a.useRouter)(),S=Z.route.split("/").pop(),w=Or((0,Me.d)(),2),A=w[0],k=(w[1],(0,B.UE)()),P=k.data,C=k.loading,I=k.error,E=(0,i.useState)(null!==S&&void 0!==S?S:"play"),L=E[0],M=E[1],O=(0,B.Wg)({pollInterval:3e4}).data,F=null!==(b=null===P||void 0===P||null===(e=P.me)||void 0===e||null===(n=e.account)||void 0===n?void 0:n.hero)&&void 0!==b?b:null,W=null!==(j=null===P||void 0===P||null===(t=P.me)||void 0===t||null===(o=t.account)||void 0===o?void 0:o.access)&&void 0!==j?j:null;if((0,i.useEffect)((function(){!I&&A||Z.push("/?auth=".concat(Z.asPath))}),[I,A]),I||!A)return(0,r.jsx)(y.A,{children:(0,r.jsxs)(f.Z,{children:[(0,r.jsx)("br",{}),"Redirecting..."]})});if(C)return(0,r.jsx)(y.A,{children:(0,r.jsx)(f.Z,{children:C&&(0,r.jsx)(c.Z,{})})});var T=!!(null===F||void 0===F?void 0:F.inventory.find((function(e){return(0,D.r_)(e.baseItem)})));return(0,r.jsx)(y.A,{showHero:!0,children:(0,r.jsxs)(f.Z,{children:[(0,r.jsxs)(i.Fragment,{children:[F&&F.attributePoints>0&&(0,r.jsx)(dt,{}),F&&F.currentQuest&&(0,r.jsx)(or,{event:F.currentQuest})]}),(0,r.jsxs)(l.Z,{sx:{width:"100%",typography:"body1"},children:[(0,r.jsxs)(x.ZP,{value:L,children:[(0,r.jsxs)(l.Z,{sx:{borderBottom:1,borderColor:"divider"},children:[(0,r.jsx)(d.Z,{variant:"h1",sx:g.Z,children:"Navigation"}),(0,r.jsxs)(v.Z,{onChange:function(e,n){"play"===n?Z.push("/play","/play",{scroll:!1}):Z.push("/play/".concat(n),"/play/".concat(n),{scroll:!1}),M(n)},"aria-label":"navigation tabs",variant:"scrollable",children:[(0,r.jsx)(u.Z,{label:"Welcome",value:"play"}),(0,r.jsx)(u.Z,{label:"Combat",value:"combat"}),!(!(null===F||void 0===F?void 0:F.inventory.length)&&!(null===F||void 0===F?void 0:F.gold))&&(0,r.jsx)(u.Z,{label:"Shop",value:"shop"}),!!(null===F||void 0===F?void 0:F.inventory.length)&&(0,r.jsx)(u.Z,{label:"Inventory",value:"inventory"}),(0,r.jsx)(u.Z,{label:"Map",value:"map"}),F&&Object.values(F.questLog).filter((function(e){return!!e})).length>2&&(0,r.jsx)(u.Z,{label:"Quests",value:"quests"}),T&&(0,r.jsx)(u.Z,{label:"Settings",value:"settings"}),W===B.Ks.Admin&&(0,r.jsx)(u.Z,{label:"Admin",value:"admin"})]})]}),(0,r.jsx)(p.Z,{value:"play",children:(0,r.jsxs)(h.ZP,{container:!0,columns:12,spacing:4,children:[(0,r.jsxs)(h.ZP,{item:!0,xs:12,sm:7,md:8,children:[(0,r.jsxs)(d.Z,{variant:"h2",sx:{mb:2,fontSize:"1.8rem"},children:["Welcome to ",(0,r.jsx)("b",{children:"Proof of Combat"}),"!"]}),(0,r.jsx)(d.Z,{sx:{mb:2},children:"This game is once again being developed actively. It's been a long time coming and there's a lot of major changes to the underlying engine in order to unlock cooler and more interesting mechanics for the game."}),(0,r.jsxs)(d.Z,{sx:{mb:2},children:["If you'd like to talk more with other players, report bugs, or discuss upcoming features,"," ",(0,r.jsx)(m.Z,{underline:"hover",href:"https://discord.gg/t7AZSxvfJG",target:"_blank",rel:"noreferrer",children:"join the discord!"})]}),(0,r.jsxs)(d.Z,{sx:{mb:2},children:["A great deal of the game is undocumented, but the parts which are documented can be found,"," ",(0,r.jsx)(m.Z,{underline:"hover",href:"https://github.com/chrisinajar/proofofcombat/wiki/",target:"_blank",rel:"noreferrer",children:"in the wiki"}),". The game is nearly impossible to 100% without consulting the wiki."]}),(0,r.jsx)(d.Z,{variant:"h5",sx:{mb:2},children:"Combat Stats"}),(null===F||void 0===F?void 0:F.combatStats)&&(0,r.jsx)(vr,{skills:F.skills,stats:F.combatStats})]}),(null===O||void 0===O?void 0:O.leaderboard)&&(0,r.jsxs)(h.ZP,{item:!0,xs:12,sm:5,md:4,children:[(0,r.jsx)(d.Z,{variant:"h6",children:"Leaderboard"}),(0,r.jsx)("ul",{id:"leaderboard-list",children:O.leaderboard.slice(0,20).map((function(e,n){return(0,r.jsxs)("li",{id:"leaderboard-list-".concat(n),children:[(0,r.jsx)("b",{id:"leaderboard-list-".concat(n,"-name"),children:e.name})," ","(",(0,D.qh)(e.class),")"]},e.id)}))})]})]})}),(0,r.jsxs)(p.Z,{value:"combat",children:[(0,r.jsx)(d.Z,{variant:"h3",sx:{textAlign:"center"},children:"Combat"}),(0,r.jsx)(d.Z,{children:"Challenge a monster from the list, then fight it to the death. Note that other players in the same location see the same monster lists, so they may get to it first!"}),(0,r.jsx)("br",{}),(0,r.jsx)(Le,{})]}),(0,r.jsx)(p.Z,{value:"shop",children:(0,r.jsx)(Zt,{})}),(0,r.jsx)(p.Z,{value:"inventory",children:(0,r.jsx)(rr,{})}),(0,r.jsx)(p.Z,{value:"map",children:(0,r.jsx)(rt,{})}),(0,r.jsx)(p.Z,{value:"quests",children:(0,r.jsx)(mr,{})}),(0,r.jsx)(p.Z,{value:"settings",children:(0,r.jsx)(Lr,{})}),(0,r.jsx)(p.Z,{value:"admin",children:(0,r.jsx)(Fr,{})})]}),(0,r.jsx)("br",{}),(0,r.jsx)(s.Z,{}),(0,r.jsx)("br",{}),(0,r.jsx)(ae,{})]})]})})}}}]);